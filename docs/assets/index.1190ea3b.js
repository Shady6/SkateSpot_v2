var Or=Object.defineProperty,Ar=Object.defineProperties;var Pr=Object.getOwnPropertyDescriptors;var pt=Object.getOwnPropertySymbols;var Mr=Object.prototype.hasOwnProperty,Dr=Object.prototype.propertyIsEnumerable;var Ge=(t,e,r)=>e in t?Or(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,X=(t,e)=>{for(var r in e||(e={}))Mr.call(e,r)&&Ge(t,r,e[r]);if(pt)for(var r of pt(e))Dr.call(e,r)&&Ge(t,r,e[r]);return t},Be=(t,e)=>Ar(t,Pr(e));var F=(t,e,r)=>(Ge(t,typeof e!="symbol"?e+"":e,r),r);import{r as p,c as H,a as P,j as a,B as E,F as w,b as Rr,u as C,d as y,e as V,C as ft,f as d,g as St,h as re,I as ne,i as se,L as Lr,k as Fr,l as Ie,m as Ur,n as We,o as N,p as z,_ as Je,S as $r,M as _e,q as Vr,s as jr,t as Gr,v as Br,w as Ce,x as Wr,y as gt,z as Jr,A as vt,T as Hr,D as Te,E as zr,G as Yr,H as It,J as j,K as Kr,N as qr,O as Xr,P as Y,Q as Qr,R as Zr,U as G,V as en,W as tn,X as Ee,Y as rn,Z as _t,$ as Ct,a0 as nn,a1 as sn,a2 as Tt,a3 as on,a4 as an,a5 as Et,a6 as ln,a7 as He,a8 as cn,a9 as dn,aa as yt,ab as wt,ac as bt,ad as ye,ae as un,af as kt,ag as mn,ah as hn,ai as Nt,aj as pn,ak as fn,al as Sn,am as xt,an as Ot,ao as At,ap as Pt,aq as gn,ar as vn,as as In,at as _n,au as Cn,av as we,aw as Tn,ax as En,ay as yn,az as wn,aA as bn,aB as kn,aC as Nn,aD as xn,aE as On,aF as An,aG as Pn}from"./vendor.2cfc7617.js";const Mn=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}};Mn();var x;(function(t){t.ALL="All",t.SIGNED_IN="SignedInRoles",t.NOT_SIGNED_IN="NoRole",t.BASIC="Basic",t.MODERATOR="Moderator",t.ADMIN="Admin",t.SUPER_ADMIN="SuperAdmin"})(x||(x={}));const ze=(t,e)=>t.accessedBy.includes(x.ALL)||t.accessedBy.includes(x.SIGNED_IN)&&e.content||!e.content&&t.accessedBy.includes(x.NOT_SIGNED_IN)||e.content&&t.accessedBy.some(r=>{var s,n;return(n=(s=e.content)==null?void 0:s.roles)==null?void 0:n.some(o=>o===r)}),D=t=>{const[e,r]=p.exports.useState(t);return[e,s=>{r(s.target.value)},()=>r("")]};class Dn{constructor(e,r){F(this,"http");F(this,"baseUrl");F(this,"jsonParseReviver");this.http=r||window,this.baseUrl=e!=null?e:""}seed_Fake_Spots(e,r){let s=this.baseUrl+"/api/admin/seed/spots?";if(e===null)throw new Error("The parameter 'count' cannot be null.");e!==void 0&&(s+="count="+encodeURIComponent(""+e)+"&"),s=s.replace(/[?&]$/,"");let n={method:"POST",headers:{Authorization:r!=null?""+r:""}};return this.http.fetch(s,n).then(o=>this.processSeed_Fake_Spots(o))}processSeed_Fake_Spots(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}seed_Fake_Temp_Spots(e,r){let s=this.baseUrl+"/api/admin/seed/tempSpots?";if(e===null)throw new Error("The parameter 'count' cannot be null.");e!==void 0&&(s+="count="+encodeURIComponent(""+e)+"&"),s=s.replace(/[?&]$/,"");let n={method:"POST",headers:{Authorization:r!=null?""+r:""}};return this.http.fetch(s,n).then(o=>this.processSeed_Fake_Temp_Spots(o))}processSeed_Fake_Temp_Spots(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}comment(e,r,s,n){let o=this.baseUrl+"/api/{subjectType}/{subjectId}/comments";if(e==null)throw new Error("The parameter 'subjectType' must be defined.");if(o=o.replace("{subjectType}",encodeURIComponent(""+e)),r==null)throw new Error("The parameter 'subjectId' must be defined.");o=o.replace("{subjectId}",encodeURIComponent(""+r)),o=o.replace(/[?&]$/,"");let l={body:JSON.stringify(n),method:"POST",headers:{Authorization:s!=null?""+s:"","Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(o,l).then(c=>this.processComment(c))}processComment(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}edit_Comment(e,r,s,n,o){let i=this.baseUrl+"/api/{subjectType}/{subjectId}/comments/{commentId}";if(e==null)throw new Error("The parameter 'subjectType' must be defined.");if(i=i.replace("{subjectType}",encodeURIComponent(""+e)),r==null)throw new Error("The parameter 'subjectId' must be defined.");if(i=i.replace("{subjectId}",encodeURIComponent(""+r)),s==null)throw new Error("The parameter 'commentId' must be defined.");i=i.replace("{commentId}",encodeURIComponent(""+s)),i=i.replace(/[?&]$/,"");let c={body:JSON.stringify(o),method:"PUT",headers:{Authorization:n!=null?""+n:"","Content-Type":"application/json"}};return this.http.fetch(i,c).then(u=>this.processEdit_Comment(u))}processEdit_Comment(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Comment(e,r,s,n){let o=this.baseUrl+"/api/{SubjectType}/{SubjectId}/comments/{CommentId}";if(e==null)throw new Error("The parameter 'subjectId' must be defined.");if(o=o.replace("{SubjectId}",encodeURIComponent(""+e)),r==null)throw new Error("The parameter 'subjectType' must be defined.");if(o=o.replace("{SubjectType}",encodeURIComponent(""+r)),s==null)throw new Error("The parameter 'commentId' must be defined.");o=o.replace("{CommentId}",encodeURIComponent(""+s)),o=o.replace(/[?&]$/,"");let i={method:"DELETE",headers:{Authorization:n!=null?""+n:""}};return this.http.fetch(o,i).then(l=>this.processDelete_Comment(l))}processDelete_Comment(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Token(e){let r=this.baseUrl+"/api/identity/token";r=r.replace(/[?&]$/,"");let n={body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(r,n).then(o=>this.processGet_Token(o))}processGet_Token(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}logout(e){let r=this.baseUrl+"/api/identity/logout";r=r.replace(/[?&]$/,"");let s={method:"DELETE",headers:{Authorization:e!=null?""+e:""}};return this.http.fetch(r,s).then(n=>this.processLogout(n))}processLogout(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}register(e){let r=this.baseUrl+"/api/identity/register";r=r.replace(/[?&]$/,"");let n={body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(r,n).then(o=>this.processRegister(o))}processRegister(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}confirm_Email(e,r){let s=this.baseUrl+"/api/identity/confirm-email?";if(e===null)throw new Error("The parameter 'userId' cannot be null.");if(e!==void 0&&(s+="userId="+encodeURIComponent(""+e)+"&"),r===null)throw new Error("The parameter 'code' cannot be null.");r!==void 0&&(s+="code="+encodeURIComponent(""+r)+"&"),s=s.replace(/[?&]$/,"");let n={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(s,n).then(o=>this.processConfirm_Email(o))}processConfirm_Email(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}forgot_Password(e){let r=this.baseUrl+"/api/identity/forgot-password";r=r.replace(/[?&]$/,"");let n={body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json"}};return this.http.fetch(r,n).then(o=>this.processForgot_Password(o))}processForgot_Password(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}reset_Password(e){let r=this.baseUrl+"/api/identity/reset-password";r=r.replace(/[?&]$/,"");let n={body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(r,n).then(o=>this.processReset_Password(o))}processReset_Password(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Base64_Images(e,r){let s=this.baseUrl+"/api/ImageProxy/base64?";if(e===null)throw new Error("The parameter 'imagesUrls' cannot be null.");e!==void 0&&e&&e.forEach(o=>{s+="imagesUrls="+encodeURIComponent(""+o)+"&"}),s=s.replace(/[?&]$/,"");let n={method:"GET",headers:{Authorization:r!=null?""+r:"",Accept:"text/plain"}};return this.http.fetch(s,n).then(o=>this.processGet_Base64_Images(o))}processGet_Base64_Images(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}like(e,r,s,n){let o=this.baseUrl+"/api/{subjectType}/{subjectId}/Likes";if(e==null)throw new Error("The parameter 'subjectType' must be defined.");if(o=o.replace("{subjectType}",encodeURIComponent(""+e)),r==null)throw new Error("The parameter 'subjectId' must be defined.");o=o.replace("{subjectId}",encodeURIComponent(""+r)),o=o.replace(/[?&]$/,"");let l={body:JSON.stringify(n),method:"POST",headers:{Authorization:s!=null?""+s:"","Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(o,l).then(c=>this.processLike(c))}processLike(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Like(e,r,s){let n=this.baseUrl+"/api/{subjectType}/{subjectId}/Likes";if(e==null)throw new Error("The parameter 'subjectId' must be defined.");if(n=n.replace("{subjectId}",encodeURIComponent(""+e)),r==null)throw new Error("The parameter 'subjectType' must be defined.");n=n.replace("{subjectType}",encodeURIComponent(""+r)),n=n.replace(/[?&]$/,"");let o={method:"DELETE",headers:{Authorization:s!=null?""+s:"",Accept:"text/plain"}};return this.http.fetch(n,o).then(i=>this.processDelete_Like(i))}processDelete_Like(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Spots(e,r,s,n,o,i,l){let c=this.baseUrl+"/api/spots?";if(e===null)throw new Error("The parameter 'take' cannot be null.");if(e!==void 0&&(c+="take="+encodeURIComponent(""+e)+"&"),r===null)throw new Error("The parameter 'offset' cannot be null.");if(r!==void 0&&(c+="offset="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'sorting_Option' cannot be null.");if(s!==void 0&&(c+="Sorting.Option="+encodeURIComponent(""+s)+"&"),n===null)throw new Error("The parameter 'sorting_Ascending' cannot be null.");if(n!==void 0&&(c+="Sorting.Ascending="+encodeURIComponent(""+n)+"&"),o===null)throw new Error("The parameter 'filtering_SurfaceFilter_GreaterThan' cannot be null.");if(o!==void 0&&(c+="Filtering.SurfaceFilter.GreaterThan="+encodeURIComponent(""+o)+"&"),i===null)throw new Error("The parameter 'filtering_SurfaceFilter_Score' cannot be null.");if(i!==void 0&&(c+="Filtering.SurfaceFilter.Score="+encodeURIComponent(""+i)+"&"),l===null)throw new Error("The parameter 'filtering_ObstaclesFilter_Obstacles' cannot be null.");l!==void 0&&l&&l.forEach(h=>{c+="Filtering.ObstaclesFilter.Obstacles="+encodeURIComponent(""+h)+"&"}),c=c.replace(/[?&]$/,"");let u={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(c,u).then(h=>this.processGet_Spots(h))}processGet_Spots(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Spot(e){let r=this.baseUrl+"/api/spots/{spotName}";if(e==null)throw new Error("The parameter 'spotName' must be defined.");r=r.replace("{spotName}",encodeURIComponent(""+e)),r=r.replace(/[?&]$/,"");let s={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(r,s).then(n=>this.processGet_Spot(n))}processGet_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Perma_And_Temp_Spots_Marker_Data(e,r,s){let n=this.baseUrl+"/api/spots/marker?";if(e===null)throw new Error("The parameter 'surfaceFilter_GreaterThan' cannot be null.");if(e!==void 0&&(n+="SurfaceFilter.GreaterThan="+encodeURIComponent(""+e)+"&"),r===null)throw new Error("The parameter 'surfaceFilter_Score' cannot be null.");if(r!==void 0&&(n+="SurfaceFilter.Score="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'obstaclesFilter_Obstacles' cannot be null.");s!==void 0&&s&&s.forEach(i=>{n+="ObstaclesFilter.Obstacles="+encodeURIComponent(""+i)+"&"}),n=n.replace(/[?&]$/,"");let o={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(n,o).then(i=>this.processGet_Perma_And_Temp_Spots_Marker_Data(i))}processGet_Perma_And_Temp_Spots_Marker_Data(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Spot(e,r){let s=this.baseUrl+"/api/spots/{Id}";if(e==null)throw new Error("The parameter 'id' must be defined.");s=s.replace("{Id}",encodeURIComponent(""+e)),s=s.replace(/[?&]$/,"");let n={method:"DELETE",headers:{Authorization:r!=null?""+r:""}};return this.http.fetch(s,n).then(o=>this.processDelete_Spot(o))}processDelete_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Spot_And_Spot_Video_Stats(){let e=this.baseUrl+"/api/spots/stats";e=e.replace(/[?&]$/,"");let r={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(e,r).then(s=>this.processGet_Spot_And_Spot_Video_Stats(s))}processGet_Spot_And_Spot_Video_Stats(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Spot_Videos(e,r,s,n,o,i,l,c){let u=this.baseUrl+"/api/spotVideos?";if(e===null)throw new Error("The parameter 'take' cannot be null.");if(e!==void 0&&(u+="take="+encodeURIComponent(""+e)+"&"),r===null)throw new Error("The parameter 'offset' cannot be null.");if(r!==void 0&&(u+="offset="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'sorting_Option' cannot be null.");if(s!==void 0&&(u+="Sorting.Option="+encodeURIComponent(""+s)+"&"),n===null)throw new Error("The parameter 'sorting_Ascending' cannot be null.");if(n!==void 0&&(u+="Sorting.Ascending="+encodeURIComponent(""+n)+"&"),o===null)throw new Error("The parameter 'filtering_SurfaceFilter_GreaterThan' cannot be null.");if(o!==void 0&&(u+="Filtering.SurfaceFilter.GreaterThan="+encodeURIComponent(""+o)+"&"),i===null)throw new Error("The parameter 'filtering_SurfaceFilter_Score' cannot be null.");if(i!==void 0&&(u+="Filtering.SurfaceFilter.Score="+encodeURIComponent(""+i)+"&"),l===null)throw new Error("The parameter 'filtering_ObstaclesFilter_Obstacles' cannot be null.");l!==void 0&&l&&l.forEach(m=>{u+="Filtering.ObstaclesFilter.Obstacles="+encodeURIComponent(""+m)+"&"}),u=u.replace(/[?&]$/,"");let h={method:"GET",headers:{Authorization:c!=null?""+c:"",Accept:"text/plain"}};return this.http.fetch(u,h).then(m=>this.processGet_Spot_Videos(m))}processGet_Spot_Videos(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Spot_Videos_Of_Spot(e,r,s,n,o,i){let l=this.baseUrl+"/api/spots/{spotName}/spotVideos?";if(e==null)throw new Error("The parameter 'spotName' must be defined.");if(l=l.replace("{spotName}",encodeURIComponent(""+e)),r===null)throw new Error("The parameter 'take' cannot be null.");if(r!==void 0&&(l+="take="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'offset' cannot be null.");if(s!==void 0&&(l+="offset="+encodeURIComponent(""+s)+"&"),n===null)throw new Error("The parameter 'option' cannot be null.");if(n!==void 0&&(l+="Option="+encodeURIComponent(""+n)+"&"),o===null)throw new Error("The parameter 'ascending' cannot be null.");o!==void 0&&(l+="Ascending="+encodeURIComponent(""+o)+"&"),l=l.replace(/[?&]$/,"");let c={method:"GET",headers:{Authorization:i!=null?""+i:"",Accept:"text/plain"}};return this.http.fetch(l,c).then(u=>this.processGet_Spot_Videos_Of_Spot(u))}processGet_Spot_Videos_Of_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}add_Spot_Video(e,r,s){let n=this.baseUrl+"/api/spots/{spotName}/spotVideos";if(e==null)throw new Error("The parameter 'spotName' must be defined.");n=n.replace("{spotName}",encodeURIComponent(""+e)),n=n.replace(/[?&]$/,"");let i={body:JSON.stringify(s),method:"POST",headers:{Authorization:r!=null?""+r:"","Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(n,i).then(l=>this.processAdd_Spot_Video(l))}processAdd_Spot_Video(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Spot_Video(e,r){let s=this.baseUrl+"/api/spotVideos/{spotVideoId}";if(e==null)throw new Error("The parameter 'spotVideoId' must be defined.");s=s.replace("{spotVideoId}",encodeURIComponent(""+e)),s=s.replace(/[?&]$/,"");let n={method:"DELETE",headers:{Authorization:r!=null?""+r:""}};return this.http.fetch(s,n).then(o=>this.processDelete_Spot_Video(o))}processDelete_Spot_Video(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}create_Spot(e,r){let s=this.baseUrl+"/api/TempSpots";s=s.replace(/[?&]$/,"");let o={body:JSON.stringify(r),method:"POST",headers:{Authorization:e!=null?""+e:"","Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(s,o).then(i=>this.processCreate_Spot(i))}processCreate_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Temp_Spots(e,r,s,n,o,i,l){let c=this.baseUrl+"/api/TempSpots?";if(e===null)throw new Error("The parameter 'take' cannot be null.");if(e!==void 0&&(c+="take="+encodeURIComponent(""+e)+"&"),r===null)throw new Error("The parameter 'offset' cannot be null.");if(r!==void 0&&(c+="offset="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'sorting_Option' cannot be null.");if(s!==void 0&&(c+="Sorting.Option="+encodeURIComponent(""+s)+"&"),n===null)throw new Error("The parameter 'sorting_Ascending' cannot be null.");if(n!==void 0&&(c+="Sorting.Ascending="+encodeURIComponent(""+n)+"&"),o===null)throw new Error("The parameter 'filtering_SurfaceFilter_GreaterThan' cannot be null.");if(o!==void 0&&(c+="Filtering.SurfaceFilter.GreaterThan="+encodeURIComponent(""+o)+"&"),i===null)throw new Error("The parameter 'filtering_SurfaceFilter_Score' cannot be null.");if(i!==void 0&&(c+="Filtering.SurfaceFilter.Score="+encodeURIComponent(""+i)+"&"),l===null)throw new Error("The parameter 'filtering_ObstaclesFilter_Obstacles' cannot be null.");l!==void 0&&l&&l.forEach(h=>{c+="Filtering.ObstaclesFilter.Obstacles="+encodeURIComponent(""+h)+"&"}),c=c.replace(/[?&]$/,"");let u={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(c,u).then(h=>this.processGet_Temp_Spots(h))}processGet_Temp_Spots(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Temp_Spot(e){let r=this.baseUrl+"/api/TempSpots/{id}";if(e==null)throw new Error("The parameter 'id' must be defined.");r=r.replace("{id}",encodeURIComponent(""+e)),r=r.replace(/[?&]$/,"");let s={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(r,s).then(n=>this.processGet_Temp_Spot(n))}processGet_Temp_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Temp_Spot(e,r){let s=this.baseUrl+"/api/TempSpots/{id}";if(e==null)throw new Error("The parameter 'id' must be defined.");s=s.replace("{id}",encodeURIComponent(""+e)),s=s.replace(/[?&]$/,"");let n={method:"DELETE",headers:{Authorization:r!=null?""+r:""}};return this.http.fetch(s,n).then(o=>this.processDelete_Temp_Spot(o))}processDelete_Temp_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_User_Stats(e){let r=this.baseUrl+"/api/user/stats";r=r.replace(/[?&]$/,"");let s={method:"GET",headers:{Authorization:e!=null?""+e:"",Accept:"text/plain"}};return this.http.fetch(r,s).then(n=>this.processGet_User_Stats(n))}processGet_User_Stats(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_User_Related_Spots(e,r,s,n){let o=this.baseUrl+"/api/user/Spots/{interactionType}?";if(e==null)throw new Error("The parameter 'interactionType' must be defined.");if(o=o.replace("{interactionType}",encodeURIComponent(""+e)),r===null)throw new Error("The parameter 'take' cannot be null.");if(r!==void 0&&(o+="take="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'skip' cannot be null.");s!==void 0&&(o+="skip="+encodeURIComponent(""+s)+"&"),o=o.replace(/[?&]$/,"");let i={method:"GET",headers:{Authorization:n!=null?""+n:"",Accept:"text/plain"}};return this.http.fetch(o,i).then(l=>this.processGet_User_Related_Spots(l))}processGet_User_Related_Spots(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_User_Related_Spot_Videos(e,r,s,n){let o=this.baseUrl+"/api/user/Videos/{interactionType}?";if(e==null)throw new Error("The parameter 'interactionType' must be defined.");if(o=o.replace("{interactionType}",encodeURIComponent(""+e)),r===null)throw new Error("The parameter 'take' cannot be null.");if(r!==void 0&&(o+="take="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'skip' cannot be null.");s!==void 0&&(o+="skip="+encodeURIComponent(""+s)+"&"),o=o.replace(/[?&]$/,"");let i={method:"GET",headers:{Authorization:n!=null?""+n:"",Accept:"text/plain"}};return this.http.fetch(o,i).then(l=>this.processGet_User_Related_Spot_Videos(l))}processGet_User_Related_Spot_Videos(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}vote(e,r,s){let n=this.baseUrl+"/api/tempSpots/{tempSpotId}/vote";if(e==null)throw new Error("The parameter 'tempSpotId' must be defined.");n=n.replace("{tempSpotId}",encodeURIComponent(""+e)),n=n.replace(/[?&]$/,"");let i={body:JSON.stringify(s),method:"POST",headers:{Authorization:r!=null?""+r:"","Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(n,i).then(l=>this.processVote(l))}processVote(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Vote(e,r){let s=this.baseUrl+"/api/tempSpots/{tempSpotId}/vote";if(e==null)throw new Error("The parameter 'tempSpotId' must be defined.");s=s.replace("{tempSpotId}",encodeURIComponent(""+e)),s=s.replace(/[?&]$/,"");let n={method:"DELETE",headers:{Authorization:r!=null?""+r:"",Accept:"text/plain"}};return this.http.fetch(s,n).then(o=>this.processDelete_Vote(o))}processDelete_Vote(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>_("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}}var me;(function(t){t.Spots="Spots",t.SpotVideos="SpotVideos",t.TempSpots="TempSpots"})(me||(me={}));var be;(function(t){t.DEFAULT_ERROR="DEFAULT_ERROR",t.ALREADY_EXISTS="ALREADY_EXISTS",t.VOTING_FINISHED="VOTING_FINISHED",t.DOESNT_EXIST="DOESNT_EXIST",t.NOT_OWNED="NOT_OWNED",t.EMAIL_NOT_VERIFIED="EMAIL_NOT_VERIFIED",t.CANT_DO_THAT="CANT_DO_THAT",t.IMAGES_MAXED="IMAGES_MAXED",t.TOO_MANY_IMAGES="TOO_MANY_IMAGES",t.BAD_INPUT="BAD_INPUT",t.UNAUTHORIZED="UNAUTHORIZED",t.FORBIDDEN="FORBIDDEN"})(be||(be={}));var Q;(function(t){t.Spots="Spots",t.SpotVideos="SpotVideos",t.Comments="Comments"})(Q||(Q={}));var L;(function(t){t.Ledge="Ledge",t.Stairs="Stairs",t.Quater="Quater",t.Kicker="Kicker",t.Downhill="Downhill",t.Rail="Rail",t.Bank="Bank",t.Flatground="Flatground",t.Manualpad="Manualpad",t.Skatepark="Skatepark"})(L||(L={}));var K;(function(t){t.CREATION_DATE="CREATION_DATE",t.LIKES="LIKES",t.COMMENTS="COMMENTS",t.VIDEOS="VIDEOS"})(K||(K={}));var oe;(function(t){t.Added="Added",t.Liked="Liked",t.Commented="Commented"})(oe||(oe={}));var Z;(function(t){t.Instagram="Instagram",t.YouTube="YouTube"})(Z||(Z={}));class Mt extends Error{constructor(e,r,s,n,o){super();F(this,"message");F(this,"status");F(this,"response");F(this,"headers");F(this,"result");F(this,"isApiException",!0);this.message=e,this.status=r,this.response=s,this.headers=n,this.result=o}static isApiException(e){return e.isApiException===!0}}function _(t,e,r,s,n){throw n!=null?n:new Mt(t,e,r,s,null)}const ke=H({name:"flashMsg",initialState:[],reducers:{setFlashMsg:(t,e)=>{t.push(e.payload)},clearFlashMsg:(t,e)=>t.filter(r=>r.clearAtDate!==e.payload)}}),ae=P("flashMsg/createFlashMsgWithTimeout",async(t,{dispatch:e})=>{var s;(s=t.clearAtDate)!=null||(t.clearAtDate=new Date(Date.now()+1e4)),e(ke.actions.setFlashMsg(t));const r=setTimeout(()=>{e(ke.actions.clearFlashMsg(t.clearAtDate)),clearTimeout(r)},t.clearAtDate.getTime()-Date.now())}),{clearFlashMsg:Rn}=ke.actions;var Ln=ke.reducer;class Ye extends Dn{constructor(){super("https://skatespot.azurewebsites.net")}}const Ke=async(t,e)=>{try{const r=await t(new Ye,"Bearer "+(e==null?void 0:e.jwToken));return r===void 0?{content:void 0,error:void 0}:r}catch(r){return r instanceof Mt?JSON.parse(r.response):new Promise(s=>{s({content:void 0,error:{statusCode:be.DEFAULT_ERROR}})})}},O=async(t,e,r,s,n=1e4)=>{var i,l;const o=await Ke(r,e);return o.error&&t(ae({message:((i=o==null?void 0:o.error)==null?void 0:i.statusCode)!==be.DEFAULT_ERROR?(l=o.error)==null?void 0:l.message:s||"Something went wrong, try again later.",severity:"error",clearAtDate:new Date(Date.now()+n)})),o},Ne="SkateSpotJWT",xe=P("auth/login",async({loginData:t,history:e},{rejectWithValue:r,dispatch:s})=>{const n=await O(s,void 0,o=>o.get_Token(t));return n.error?r(null):(localStorage.setItem(Ne,n.content.jwToken),e.push(I.HOME),n.content)}),Oe=P("auth/register",async(t,{rejectWithValue:e,dispatch:r})=>{if((await O(r,void 0,n=>n.register(t))).error)return e(null)}),Dt=P("auth/logout",async()=>{const t=localStorage.getItem(Ne);localStorage.removeItem(Ne),t&&await new Ye().logout("Bearer "+t)}),Rt={loginLoading:!1,registerSuccess:!1,registerLoading:!1},Lt=H({name:"auth",initialState:Rt,reducers:{setAuthStateFromLocalStorage:(t,e)=>{Ft(t,e.payload)}},extraReducers:t=>{t.addCase(xe.pending,e=>{e.loginLoading=!0}).addCase(xe.fulfilled,(e,r)=>{Ft(e,r.payload)}).addCase(xe.rejected,e=>{e.loginLoading=!1}).addCase(Oe.pending,e=>{e.registerLoading=!0}).addCase(Oe.fulfilled,e=>{e.registerSuccess=!0,e.registerLoading=!1}).addCase(Oe.rejected,e=>{e.registerLoading=!1}).addCase(Dt.pending,()=>Rt)}}),Ft=(t,e)=>{Array.isArray(e.roles)||(e.roles=[e.roles]),t.content=e,t.loginLoading=!1},{setAuthStateFromLocalStorage:Fn}=Lt.actions;var Un=Lt.reducer;const $n=({name:t,isSelected:e,toggleSelection:r})=>a(E,{style:e?{backgroundColor:"#9df990"}:void 0,className:"me-1 mt-1 px-2",onClick:r,variant:e?"contained":"text",children:t}),Ut=[{obstacleType:L.Skatepark,isSelected:!1},{obstacleType:L.Ledge,isSelected:!1},{obstacleType:L.Rail,isSelected:!1},{obstacleType:L.Stairs,isSelected:!1},{obstacleType:L.Bank,isSelected:!1},{obstacleType:L.Kicker,isSelected:!1},{obstacleType:L.Manualpad,isSelected:!1},{obstacleType:L.Flatground,isSelected:!1},{obstacleType:L.Quater,isSelected:!1},{obstacleType:L.Downhill,isSelected:!1}],$t=({tags:t,setTags:e})=>{const r=s=>{e(t.map(n=>({obstacleType:n.obstacleType,isSelected:n.obstacleType===s.obstacleType?!n.isSelected:n.isSelected})))};return a(w,{children:t.map(s=>a($n,{name:s.obstacleType,isSelected:s.isSelected,toggleSelection:()=>r(s)},s.obstacleType))})},Vt={sort:{option:K.CREATION_DATE,ascending:!1},filter:{surfaceScore:{enabled:!1,gtFiltering:!0,score:5},tags:{enabled:!1,tags:Ut}}},Vn={sort:Vt.sort,filter:void 0},jt={appliedFilter:Vn,filterInMaking:Vt},Gt=H({name:"filters",initialState:jt,reducers:{applyFilters:t=>{var e,r,s,n;t.appliedFilter.sort=t.filterInMaking.sort,t.filterInMaking.filter.surfaceScore.enabled&&((r=(e=t.appliedFilter).filter)!=null||(e.filter={}),t.appliedFilter.filter.surfaceScore={score:t.filterInMaking.filter.surfaceScore.score,gtFiltering:t.filterInMaking.filter.surfaceScore.gtFiltering}),t.filterInMaking.filter.tags.enabled&&((n=(s=t.appliedFilter).filter)!=null||(s.filter={}),t.appliedFilter.filter.tags=t.filterInMaking.filter.tags.tags.filter(o=>o.isSelected).map(o=>o.obstacleType)),!t.filterInMaking.filter.surfaceScore.enabled&&!t.filterInMaking.filter.tags.enabled&&(t.appliedFilter.filter=void 0)},clearFilters:t=>jt,setSortingOption:(t,e)=>{t.filterInMaking.sort.option=e.payload},setSortAscending:(t,e)=>{t.filterInMaking.sort.ascending=e.payload},toggleSurfaceScore:t=>{t.filterInMaking.filter.surfaceScore.enabled=!t.filterInMaking.filter.surfaceScore.enabled},toggleSurfaceScoreGt:t=>{t.filterInMaking.filter.surfaceScore.gtFiltering=!t.filterInMaking.filter.surfaceScore.gtFiltering},setSurfaceScore:(t,e)=>{t.filterInMaking.filter.surfaceScore.score=e.payload},setTags:(t,e)=>{t.filterInMaking.filter.tags.enabled=e.payload.some(r=>r.isSelected),t.filterInMaking.filter.tags.tags=e.payload}}}),$=Gt.actions;var jn=Gt.reducer;const R={spots:{fetchListItems:(t,e,r,s)=>{var n,o,i,l,c,u,h;return t.get_Spots(e,r,(n=s.sort)==null?void 0:n.option,(o=s.sort)==null?void 0:o.ascending,(l=(i=s.filter)==null?void 0:i.surfaceScore)==null?void 0:l.gtFiltering,(u=(c=s.filter)==null?void 0:c.surfaceScore)==null?void 0:u.score,(h=s.filter)==null?void 0:h.tags)},getSpecificState:t=>t.spotsState,name:"spots",commentSubjectType:me.Spots},tempSpots:{fetchListItems:(t,e,r,s)=>{var n,o,i,l,c,u,h;return t.get_Temp_Spots(e,r,(n=s.sort)==null?void 0:n.option,(o=s.sort)==null?void 0:o.ascending,(l=(i=s.filter)==null?void 0:i.surfaceScore)==null?void 0:l.gtFiltering,(u=(c=s.filter)==null?void 0:c.surfaceScore)==null?void 0:u.score,(h=s.filter)==null?void 0:h.tags)},getSpecificState:t=>t.tempSpotsState,name:"tempSpots",commentSubjectType:me.TempSpots},spotVideos:{fetchListItems:(t,e,r,s)=>{var n,o,i,l,c,u,h;return t.get_Spot_Videos(e,r,(n=s.sort)==null?void 0:n.option,(o=s.sort)==null?void 0:o.ascending,(l=(i=s.filter)==null?void 0:i.surfaceScore)==null?void 0:l.gtFiltering,(u=(c=s.filter)==null?void 0:c.surfaceScore)==null?void 0:u.score,(h=s.filter)==null?void 0:h.tags,void 0)},getSpecificState:t=>t.spotVideosState,name:"spotVideos",commentSubjectType:me.SpotVideos}};var g;(function(t){t.SPOTS="spots",t.TEMP_SPOTS="tempSpots",t.SPOT_VIDEOS="spotVideos"})(g||(g={}));const qe=(t,e)=>P(`${R[t].name}/like${e===Q.Comments?"/"+Q.Comments:""}`,async({isPositive:r,deletedLike:s,subjectId:n,parentId:o},{getState:i,dispatch:l,rejectWithValue:c})=>{const u=i(),h=await O(l,u.auth.content,(m,f)=>s?m.delete_Like(n,e,f):m.like(e,n,f,{positive:r}),"Error occured while liking, please try again later");return h.error?c(null):{result:h.content,likeSubjectType:e,subjectId:n,parentId:o}}),Ae=qe(g.SPOTS,Q.Spots),Gn=t=>P(`${R[t].name}/comment`,async({listItemId:e,text:r},{getState:s,dispatch:n,rejectWithValue:o})=>{const i=s(),l=await O(n,i.auth.content,(c,u)=>c.comment(R[t].commentSubjectType,e,u,{text:r}),"Couldn't add comment, please try again later");return l.error?o(null):{comment:l.content,listItemId:e}}),Bn=t=>P(`${R[t].name}/deleteComment`,async({listItemId:e,commentId:r},{getState:s,dispatch:n,rejectWithValue:o})=>{const i=s();return(await O(n,i.auth.content,(c,u)=>c.delete_Comment(e,R[t].commentSubjectType,r,u),"Couldn't delete comment, please try again later")).error?o(null):{listItemId:e,commentId:r}}),Wn=t=>P(`${R[t].name}/deleteListItem`,async({listItemId:e,deleteFunc:r},{getState:s,dispatch:n,rejectWithValue:o})=>{const i=s();return(await O(n,i.auth.content,(c,u)=>r(c,u))).error?o(null):{listItemId:e}}),Jn=t=>P(`${R[t].name}/editComment`,async({listItemId:e,commentId:r,newText:s},{getState:n,dispatch:o,rejectWithValue:i})=>{const l=n();return(await O(o,l.auth.content,(u,h)=>u.edit_Comment(R[t].commentSubjectType,e,r,h,{newText:s}),"Couldn't edit comment, please try again later")).error?i(null):{listItemId:e,commentId:r,newText:s}}),Hn=t=>P(`${R[t].name}/fetchListItems`,async(e,{getState:r,dispatch:s,rejectWithValue:n})=>{const o=r(),i=R[t].getSpecificState(o),l=await O(s,o.auth.content,c=>R[t].fetchListItems(c,i.paging.take,i.paging.skip,o.filtersState.appliedFilter),"Error occured while loading next records, please try again later.");return l.error?n(null):l.content}),Bt=t=>P(`${R[t].name}/fetchListItems`,async({fetchFunc:e},{getState:r,dispatch:s,rejectWithValue:n})=>{const o=r(),i=R[t].getSpecificState(o),l=await O(s,o.auth.content,c=>e(c,i.paging.take,i.paging.skip),"Error occured while loading next records, please try again later.");return l.error?n(null):l.content}),he={fetchListItems:Hn,fetchListItemsCustomFunc:Bt,comment:Gn,deleteComment:Bn,editComment:Jn,likeComment:qe,deleteListItem:Wn},q=()=>{let t={};return Object.keys(g).forEach(e=>{t[g[e]]={},Object.keys(he).forEach(r=>{he[r].name===he.likeComment.name?t[g[e]][r]=he[r](g[e],Q.Comments):t[g[e]][r]=he[r](g[e])})}),t},Xe={like:{fulfilled:(t,e)=>{var o;const{result:r,listItemId:s}=e,n=(o=t.listWithCount.data)==null?void 0:o.find(i=>i.id===s);return n.verificationProcess?n.verificationProcess.votes=r:n.likes=r,n}}},Pe=t=>({reset:()=>t,setItems:(e,r)=>{e.listWithCount={data:r.payload,totalCount:e.listWithCount.totalCount}}}),Qe=(t,e)=>{const r=q()[e];t.addCase(r.fetchListItems.pending,s=>{s.loading=!0,s.error=!1}).addCase(r.fetchListItems.fulfilled,(s,{payload:n})=>{var o,i,l;s.loading=!1,s.error=!1,((o=n==null?void 0:n.data)==null?void 0:o.length)!==0&&((l=(i=s==null?void 0:s.listWithCount)==null?void 0:i.data)==null||l.push(...n.data),s.listWithCount.totalCount=n.totalCount,s.paging.skip+=s.paging.take)}).addCase(r.fetchListItems.rejected,s=>{s.error=!0,s.loading=!1}).addCase(r.comment.fulfilled,(s,{payload:n})=>{var c,u,h;const{comment:o,listItemId:i}=n,l=(c=s.listWithCount.data)==null?void 0:c.find(m=>m.id===i);l.verificationProcess?(u=l.verificationProcess.discussion)==null||u.unshift(o):(h=l.comments)==null||h.unshift(o)}).addCase(r.deleteComment.fulfilled,(s,{payload:n})=>{var u,h,m,f;const{commentId:o,listItemId:i}=n,l=(u=s.listWithCount.data)==null?void 0:u.find(S=>S.id===i);let c=((m=(h=l.verificationProcess)==null?void 0:h.discussion)==null?void 0:m.find(S=>S.id===o))||((f=l.comments)==null?void 0:f.find(S=>S.id===o));c.text="",c.isDeleted=!0,c.author={id:"",userName:void 0},c.authorId=void 0}).addCase(r.editComment.fulfilled,(s,{payload:n})=>{var h,m,f,S;const{commentId:o,listItemId:i,newText:l}=n,c=(h=s.listWithCount.data)==null?void 0:h.find(v=>v.id===i);let u=((f=(m=c.verificationProcess)==null?void 0:m.discussion)==null?void 0:f.find(v=>v.id===o))||((S=c.comments)==null?void 0:S.find(v=>v.id===o));u.text=l}).addCase(r.likeComment.fulfilled,(s,{payload:n})=>{var h,m,f;const{result:o,subjectId:i,parentId:l}=n,c=(h=s.listWithCount.data)==null?void 0:h.find(S=>S.id===l);let u;c.verificationProcess?u=(m=c.verificationProcess.discussion)==null?void 0:m.find(S=>S.id===i):u=(f=c.comments)==null?void 0:f.find(S=>S.id===i),u.likes=o}).addCase(r.deleteListItem.fulfilled,(s,{payload:n})=>{s.listWithCount.data=s.listWithCount.data.filter(o=>o.id!==n.listItemId),s.listWithCount.totalCount--})},Wt={listWithCount:{data:[],totalCount:0},paging:{take:5,skip:0},loading:!1,error:!1},Jt=H({name:"spots",initialState:Wt,reducers:X({},Pe(Wt)),extraReducers:t=>{Qe(t,g.SPOTS),t.addCase(Ae.fulfilled,(e,r)=>{Xe.like.fulfilled(e,{result:r.payload.result,listItemId:r.payload.subjectId})})}}),pe=Jt.actions;var zn=Jt.reducer;const Yn=Bt(g.SPOT_VIDEOS),Ze=qe(g.SPOT_VIDEOS,Q.SpotVideos),Ht={listWithCount:{data:[],totalCount:0},paging:{take:5,skip:0},loading:!1,error:!1},zt=H({name:"spotVideo",initialState:Ht,reducers:Be(X({},Pe(Ht)),{prependVideo:(t,e)=>{t.listWithCount.data.unshift(e.payload)}}),extraReducers:t=>{Qe(t,g.SPOT_VIDEOS),t.addCase(Ze.fulfilled,(e,r)=>{Xe.like.fulfilled(e,{result:r.payload.result,listItemId:r.payload.subjectId})})}}),Yt=zt.actions;var Kn=zt.reducer;const Kt=P("tempSpots/vote",async({tempSpotId:t,isReal:e,deletedVote:r},{getState:s,dispatch:n,rejectWithValue:o})=>{const i=s(),l=await O(n,i.auth.content,(c,u)=>r?c.delete_Vote(t,u):c.vote(t,u,{isReal:e}),"Error occured while voting, please try again later");return l.error?o(null):{result:l.content,tempSpotId:t}}),qt={listWithCount:{data:[],totalCount:0},paging:{take:5,skip:0},loading:!1,error:!1},Xt=H({name:"tempSpots",initialState:qt,reducers:X({},Pe(qt)),extraReducers:t=>{Qe(t,g.TEMP_SPOTS),t.addCase(Kt.fulfilled,(e,r)=>{var n;const s=Xe.like.fulfilled(e,{listItemId:r.payload.tempSpotId,result:(n=r.payload.result)==null?void 0:n.votes});s.verificationProcess.isVerified=r.payload.result.verified})}}),qn=Xt.actions;var Xn=Xt.reducer;const Me=P("userProfile/getStats",async(t,{getState:e,dispatch:r,rejectWithValue:s})=>{const n=e(),o=await O(r,n.auth.content,(i,l)=>i.get_User_Stats(l),"Error occured while fetching stats.");return o.error?s(null):o.content});var ee;(function(t){t.SPOTS="Spots",t.SPOT_VIDEOS="SpotVideos"})(ee||(ee={}));const Qt={stats:{loading:!1,value:{spotStats:{addedCount:0,likedCount:0,commentedCount:0},spotVideoStats:{addedCount:0,likedCount:0,commentedCount:0}}},listItems:{interactionType:oe.Added,what:ee.SPOTS}},Zt=H({name:"userProfile",initialState:Qt,reducers:{setInteractionType:(t,e)=>{t.listItems.interactionType=e.payload},setWhat:(t,e)=>{t.listItems.what=e.payload}},extraReducers:t=>{t.addCase(Me.pending,e=>{e.stats.loading=!0}),t.addCase(Me.fulfilled,(e,r)=>{e.stats.loading=!1,e.stats.value=r.payload}),t.addCase(Me.rejected,e=>{e.stats.loading=!1,e.stats.value=Qt.stats.value})}}),er=Zt.actions;var Qn=Zt.reducer;const fe=P("mapSpots/getMarkersData",async(t,{getState:e,dispatch:r,rejectWithValue:s})=>{const n=e(),o=await O(r,n.auth.content,i=>{var l,c,u,h,m,f,S,v,b,k,M;return i.get_Perma_And_Temp_Spots_Marker_Data((h=(u=(c=(l=n.filtersState)==null?void 0:l.appliedFilter)==null?void 0:c.filter)==null?void 0:u.surfaceScore)==null?void 0:h.gtFiltering,(v=(S=(f=(m=n.filtersState)==null?void 0:m.appliedFilter)==null?void 0:f.filter)==null?void 0:S.surfaceScore)==null?void 0:v.score,(M=(k=(b=n.filtersState)==null?void 0:b.appliedFilter)==null?void 0:k.filter)==null?void 0:M.tags)});return o.error?s(null):o.content}),De=P("mapSpots/fetchSpot",async({markerData:t},{getState:e,dispatch:r,rejectWithValue:s})=>{const n=e(),o=t.isTempSpot?await O(r,n.auth.content,i=>i.get_Temp_Spot(t.id)):await O(r,n.auth.content,i=>i.get_Spot(t.name));return o.error?s(null):o.content}),Zn={loadingMarkers:!1,loadingSpotInModal:!1,currentSpotInModal:null,markersData:[],isSpotModalOpen:!1,isFilterModalOpen:!1},tr=H({name:"mapSpots",initialState:Zn,reducers:{toggleSpotModal:(t,e)=>{t.isSpotModalOpen=e.payload},toggleFilterModal:(t,e)=>{t.isFilterModalOpen=e.payload}},extraReducers:t=>{t.addCase(fe.pending,e=>{e.loadingMarkers=!0}).addCase(fe.fulfilled,(e,r)=>{e.loadingMarkers=!1,e.markersData=r.payload}).addCase(fe.rejected,e=>{e.loadingMarkers=!1}).addCase(De.pending,e=>{e.currentSpotInModal=null,e.loadingSpotInModal=!0}).addCase(De.fulfilled,(e,r)=>{e.loadingSpotInModal=!1,e.currentSpotInModal=r.payload}).addCase(De.rejected,e=>{e.loadingSpotInModal=!1})}});var es=tr.reducer;const te=tr.actions,ts=Rr({reducer:{auth:Un,flashMsgs:Ln,tempSpotsState:Xn,spotsState:zn,spotVideosState:Kn,filtersState:jn,mapSpotsState:es,userProfileState:Qn},middleware:t=>t({serializableCheck:!1})}),Re=()=>C(),U=()=>y(t=>t),rs=()=>{const[t,e]=D(""),[r,s]=D(""),n=V(),o=Re();return a(ft,{className:"mt-5",children:d(St,{children:[d(re,{margin:"dense",children:[a(ne,{htmlFor:"email",children:"Email Address"}),a(se,{id:"email",value:t,onChange:e})]}),d(re,{margin:"dense",children:[a(ne,{htmlFor:"password",children:"Password"}),a(se,{type:"password",id:"password",value:r,onChange:s})]}),a(E,{onClick:()=>{o(xe({loginData:{email:t,password:r},history:n}))},children:"Login"})]})})},ns=()=>{const t=C(),e=V();return p.exports.useEffect(()=>{t(Dt()),t(ae({message:"Logged out successfuly!",severity:"success",clearAtDate:new Date(Date.now()+5e3)})),e.push(I.HOME)},[]),a(w,{})},ss=()=>{const[t,e]=D(""),[r,s]=D(""),[n,o]=D(""),[i,l]=D(""),c=V(),u=y(m=>m.auth),h=Re();return p.exports.useEffect(()=>{u.registerSuccess&&(h(ae({message:"Registration successful, you can login now",severity:"success"})),c.push(I.LOGIN))},[u.registerSuccess]),a(ft,{className:"mt-5",children:d(St,{children:[d(re,{margin:"dense",children:[a(ne,{htmlFor:"email",children:"Email Address"}),a(se,{id:"email",value:t,onChange:e})]}),d(re,{margin:"dense",children:[a(ne,{htmlFor:"username",children:"Username"}),a(se,{id:"username",value:r,onChange:s})]}),d(re,{margin:"dense",children:[a(ne,{htmlFor:"password",children:"Password"}),a(se,{type:"password",id:"password",value:n,onChange:o})]}),d(re,{margin:"dense",children:[a(ne,{htmlFor:"repeat-password",children:"Repeat Password"}),a(se,{type:"password",id:"repeat-password",value:i,onChange:l})]}),a(Lr,{loading:u.registerLoading,onClick:()=>{h(Oe({userName:r,password:n,confirmPassword:i,email:t}))},children:"Register"})]})})},rr=()=>{p.exports.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[])};const os=()=>{const t=Fr(),[e,r]=p.exports.useState(null),[s,n]=p.exports.useState(!1);rr(),p.exports.useEffect(()=>{(async()=>{var l;n(!0);let i=await Ke(c=>c.get_Spot_And_Spot_Video_Stats(),void 0);n(!1),r((l=i.content)!=null?l:null)})()},[]);const o=i=>s?a(z,{size:20,color:"secondary"}):i!==0&&!i?"_":i;return d("div",{id:"main",className:"row mt-3",children:[a("div",{className:"col d-lg-block d-none",children:a("img",{className:"ms-3",src:"./skate.png",alt:"skate-person"})}),a("div",{className:"col d-flex align-items-center justify-content-center justify-content-lg-start",children:d("div",{className:" px-lg-0 px-3",children:[d("div",{className:"mb-5",children:[d("h1",{style:{color:t.palette.primary.main},children:[a(Ie,{id:"title-svg"}),"SkateSpot"]}),a("p",{children:"This website serves as a database of skateboarding spots from all around the world."})]}),a("div",{children:d("p",{children:[a(Ie,{className:"me-3"}),"View spots in form of list or map and add your own"]})}),a("div",{children:d("p",{children:[a(Ur,{className:"me-3"}),"Community spots verification system. Temp spots are verified based on number of likes and dislikes"]})}),a("div",{children:d("p",{children:[a(We,{className:"me-3"}),"Add videos from Instagram or YouTube to spots and see others' people clips"]})}),d("div",{id:"quick-actions",className:"mt-2",children:[a(N,{to:I.ADD_TEMP_SPOT,children:a(E,{className:"me-3",children:"Add Spot"})}),a(N,{to:I.MAP,children:a(E,{className:"me-3",children:"View on map"})}),a(N,{to:I.SPOTS,children:a(E,{className:"me-3",children:"View as a list"})})]}),d("div",{className:"mt-5",children:[a("p",{children:"Community currently added:"}),a("div",{style:{color:t.palette.secondary.main},className:"d-flex",children:!s&&!e?a("h3",{children:"Couldn't load the statistics"}):d(w,{children:[d("h3",{className:"me-4",children:[o(e==null?void 0:e.spotsCount)," Spots"]}),d("h3",{children:[o(e==null?void 0:e.spotVideosCount)," Spot Videos"]})]})})]})]})})]})},et=()=>{const t=C();p.exports.useEffect(()=>(t($.clearFilters()),()=>{t($.clearFilters())}),[])},as=[{actions:qn,listViewType:g.TEMP_SPOTS},{actions:pe,listViewType:g.SPOTS},{actions:Yt,listViewType:g.SPOT_VIDEOS}],Le=()=>{let t={};return as.forEach(e=>{t[e.listViewType]={},Object.keys(Pe({})).forEach(r=>{t[e.listViewType][r]=e.actions[r]})}),t},nr=(t,e,r)=>{const s=C(),n=y(o=>o.filtersState.appliedFilter,Je.isEqual);p.exports.useEffect(()=>{!t||e!==g.SPOTS&&n.sort.option===K.VIDEOS||(s(Le()[e].reset()),s(r?r():q()[e].fetchListItems()))},[n])},tt=(t,e)=>{const r=R[e].getSpecificState(U()),s=C(),[n,o]=p.exports.useState(0),i=()=>{o(document.documentElement.scrollTop/(document.documentElement.scrollHeight-document.documentElement.clientHeight))};p.exports.useEffect(()=>(window.addEventListener("scroll",i),()=>{window.removeEventListener("scroll",i)}),[]),p.exports.useEffect(()=>{!r.loading&&r.listWithCount.data.length<r.listWithCount.totalCount&&n>=.8&&n<=1&&s(t())},[n])},is=t=>{const e=V(),r=C(),s=U();p.exports.useEffect(()=>{var o;r(pe.reset());const n=(o=e.location.state)==null?void 0:o.spot;return n&&n.videosCount?r(pe.setItems([n])):(async()=>{const i=await O(r,s.auth.content,(l,c)=>l.get_Spot(t));i.content&&r(pe.setItems([i.content]))})(),()=>{r(pe.reset())}},[])},ls=()=>{const t=C();return a(E,{onClick:e=>t($.applyFilters()),className:"me-2",variant:"contained",color:"primary",children:"Apply"})},cs=()=>{const t=C();return a(E,{onClick:e=>t($.clearFilters()),variant:"contained",color:"secondary",children:"Clear"})},rt=()=>d("div",{className:"mt-3",children:[a(ls,{}),a(cs,{})]}),sr=({listViewType:t})=>{const e=y(s=>s.filtersState.filterInMaking.sort),r=C();return d("div",{className:"d-flex",children:[d($r,{style:{fontSize:"1rem"},className:"me-2",onChange:s=>r($.setSortingOption(s.target.value)),value:e.option,label:"Age",children:[a(_e,{value:K.CREATION_DATE,children:"Creation date"}),a(_e,{value:K.LIKES,children:"Likes"}),a(_e,{value:K.COMMENTS,children:"Comments"}),t===g.SPOTS&&a(_e,{value:K.VIDEOS,children:"Videos"})]}),d(E,{onClick:()=>r($.setSortAscending(!e.ascending)),children:[e.ascending?a(Vr,{}):a(jr,{}),a(Gr,{})]})]})},ds=({listViewType:t})=>d("div",{className:"ms-3",children:[a(sr,{listViewType:t}),a(rt,{})]}),us=(t,e)=>{const[r,s,n]=D(""),o=C();return{comment:r,setComment:s,sendComment:()=>{!r||(o(e({listItemId:t,text:r})),n())}}},or=({subjectId:t,parentId:e,likes:r,likeAction:s})=>{var u,h;const n=C(),o=U().auth,i=p.exports.useCallback(()=>r.reduce((m,f)=>m+Number(f.positive),0),[r]),l=()=>Br.first(r.filter(m=>{var f;return m.userId===((f=o==null?void 0:o.content)==null?void 0:f.id)})),c=async m=>{const f=l();let S=!1;f&&f.positive===m&&(S=!0),n(s({isPositive:m,deletedLike:S,subjectId:t,parentId:e}))};return[{highlited:((u=l())==null?void 0:u.positive)===!0,onClick:async()=>await c(!0),isPositive:!0,likesCount:i()},{highlited:((h=l())==null?void 0:h.positive)===!1,onClick:async()=>await c(!1),isPositive:!1,likesCount:r.length-i()}]},Fe={fontSize:"1.2rem"},ms=({likesCount:t,isPositive:e,onClick:r,highlited:s=!1})=>d("div",{style:{cursor:"pointer",color:"#e3e3e3"},onClick:async()=>await r(),className:"me-3",children:[d("span",{className:"me-0",children:[e?s?a(Ce,{sx:Fe}):a(Wr,{sx:Fe}):s?a(gt,{sx:Fe}):a(Jr,{sx:Fe})," "]}),a("span",{style:{color:"#dbd8d8",fontSize:"0.8rem"},className:"ms-0",children:t})]}),hs=({commentId:t,likes:e,listItemId:r,likeAction:s})=>{const n=or({subjectId:t,parentId:r,likes:e==null?void 0:e.map(o=>({positive:o.positive,userId:o.userId})),likeAction:s});return a("div",{className:"d-flex",children:n.map(o=>a(ms,X({},o),o.isPositive.toString()))})},ar=({isTooltipOpen:t,setIsTooltipOpen:e,children:r})=>a(vt,{onClickAway:()=>e(!1),children:a("div",{children:a(Hr,{PopperProps:{disablePortal:!0},onClose:()=>e(!1),open:t,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:a(w,{children:r}),children:a(Te,{onClick:()=>{e(!t)},className:"ms-1 p-0",children:a(zr,{style:{color:"#d2d2d2",fontSize:"1.1rem",cursor:"pointer"}})})})})}),ps=t=>{const[e,r]=p.exports.useState(!1),s=C();return a(ar,{isTooltipOpen:e,setIsTooltipOpen:r,children:d("div",{children:[a(Te,{onClick:()=>{r(!1),t.setIsEditingComment(!0)},className:"p-1 me-2",children:a(Yr,{style:{cursor:"pointer",fontSize:"1.1rem"}})}),a(Te,{onClick:()=>{s(t.deleteCommentAction({listItemId:t.listItemId,commentId:t.comment.id})),r(!1)},className:"p-1",children:a(It,{style:{cursor:"pointer",fontSize:"1.1rem"}})})]})})},fs=t=>{const[e,r]=D(t.comment.text),s=C();return a("div",{children:d("div",{className:"d-flex align-items-end mb-3",children:[a(j,{color:"primary",className:"me-2 flex-grow-1",variant:"standard",multiline:!0,maxRows:4,value:e,onChange:r,onKeyDown:n=>{n.key==="Enter"}}),a(Kr,{className:"me-2",style:{cursor:"pointer"},color:e?"inherit":"disabled",onClick:()=>{t.setIsEditingComment(!1),e!==t.comment.text&&s(t.editCommentAction({listItemId:t.listItemId,commentId:t.comment.id,newText:e}))}}),a(qr,{onClick:()=>{t.setIsEditingComment(!1)},style:{cursor:"pointer"}})]})})},Ss=t=>{var n,o;const e=U().auth,[r,s]=p.exports.useState(!1);return d("div",{className:"mb-4",children:[d("div",{className:"mb-0 d-flex align-items-center",children:[a("b",{className:"me-1",children:(n=t.comment.author)==null?void 0:n.userName}),a("span",{style:{color:"#8d8d8d",fontSize:"0.8rem"},children:d("span",{children:[new Date(t.comment.createdAt).toDateString(),new Date(t.comment.editedAt).getFullYear()!==1&&a("span",{className:"ms-1",children:"[Edited]"})]})}),((o=e.content)==null?void 0:o.id)===t.comment.authorId&&a(ps,{setIsEditingComment:s,comment:t.comment,listItemId:t.listItemId,deleteCommentAction:t.deleteCommentAction,editCommentAction:t.editCommentAction})]}),a("div",{className:"d-flex",children:r?a(fs,{comment:t.comment,listItemId:t.listItemId,editCommentAction:t.editCommentAction,setIsEditingComment:s}):a("p",{className:"mb-1",children:t.comment.text})}),a(hs,{likeAction:t.likeAction,listItemId:t.listItemId,commentId:t.comment.id,likes:t.comment.likes||[]})]})},gs=()=>a("div",{className:"mb-4",style:{color:"#949494"},children:a("p",{className:"m-0",children:"[This comments has been deleted by user.]"})}),vs=t=>{var n;const{comment:e,setComment:r,sendComment:s}=us(t.listItemId,t.commentAction);return d("div",{className:"mt-4",children:[d("div",{className:"d-flex align-items-end mb-3",children:[a(j,{color:"primary",className:"me-2 flex-grow-1",variant:"standard",label:"Write something",multiline:!0,maxRows:4,value:e,onChange:r,onKeyDown:o=>{o.key==="Enter"&&s()}}),a(Xr,{onClick:s,style:{cursor:"pointer"},color:e?"inherit":"disabled"})]}),(n=t.comments)==null?void 0:n.map(o=>o.isDeleted?a(gs,{},Y()):a(Ss,{deleteCommentAction:t.deleteCommentAction,editCommentAction:t.editCommentAction,listItemId:t.listItemId,comment:o,likeAction:t.likeAction},Y()))]})},ie=t=>{const e=q()[t.listViewType];return a(vs,{listItemId:t.listItemId,comments:t.comments,commentAction:e.comment,likeAction:e.likeComment,deleteCommentAction:e.deleteComment,editCommentAction:e.editComment})},le=({commentsCount:t,onClick:e})=>a("div",{children:d(E,{onClick:e,variant:"outlined",size:"small",className:"me-1",children:[a(Qr,{className:"me-1"}),a("span",{children:t||"0"})]})});function Is({likesCount:t,isPositive:e,onClick:r,highlited:s=!1}){return d(E,{onClick:async()=>await r(),size:"small",variant:s?"contained":"outlined",color:e?"success":"warning",className:"me-1",children:[e?a(Ce,{}):a(gt,{})," ",a("span",{className:"ms-1",children:t})]})}function ce({likes:t,listItemId:e,likeAction:r}){const s=or({subjectId:e,parentId:e,likes:t,likeAction:r});return a("div",{children:s.map(n=>a(Is,X({},n),n.isPositive.toString()))})}const ir=t=>{const e=y(o=>o.auth.content),r=C(),[s,n]=p.exports.useState(!1);return t.authorId===(e==null?void 0:e.id)?a(ar,{isTooltipOpen:s,setIsTooltipOpen:n,children:a("div",{children:a(Te,{onClick:()=>{r(q()[t.listViewType].deleteListItem({listItemId:t.listItemId,deleteFunc:t.deleteFunc})),n(!1)},className:"p-1",children:a(It,{style:{cursor:"pointer",fontSize:"1.1rem"}})})})}):a(w,{})};function Se({author:t}){return d("div",{style:{marginLeft:"auto"},children:[a(Zr,{})," ",t==null?void 0:t.userName]})}const nt=t=>a("iframe",{title:"Instagram video",src:`https://www.instagram.com/p/${t.videoId}/embed`,width:"400",height:"480",frameBorder:"0",scrolling:"no"}),st=t=>a("iframe",{width:"560",height:"315",src:`https://www.youtube.com/embed/${t.videoId}`,title:"YouTube video player",frameBorder:0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),_s=G.memo(({spotVideo:t})=>{var s;const[e,r]=p.exports.useState(!1);return d("div",{className:"mb-4",children:[d("div",{className:"d-flex justify-content-between",children:[t.platformType===Z.Instagram?a(nt,{videoId:t.embedId}):a(st,{videoId:t.embedId}),a(ir,{authorId:t.author.id,listItemId:t.id,listViewType:g.SPOT_VIDEOS,deleteFunc:(n,o)=>n.delete_Spot_Video(t.id,o)})]}),a("p",{children:t.description}),d("div",{className:"d-flex mt-2",children:[a(ce,{listItemId:t.id,likes:t.likes,likeAction:Ze}),a(le,{onClick:()=>r(!e),commentsCount:((s=t==null?void 0:t.comments)==null?void 0:s.length)||0}),a(Se,{author:t.author})]}),e&&a("div",{className:"row col-4",children:ie({listItemId:t.id,comments:t.comments,listViewType:g.SPOT_VIDEOS})}),a("hr",{})]})},(t,e)=>JSON.stringify({likes:t.spotVideo.likes,comments:t.spotVideo.comments})===JSON.stringify({likes:e.spotVideo.likes,comments:e.spotVideo.comments})),Cs={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,cursor:"default"},lr=t=>a(en,{style:{cursor:"pointer"},open:t.isOpen,onClose:()=>t.setIsOpen(!1),children:a(tn,{sx:Cs,children:t.children})}),cr=({fontSize:t="1rem",color:e,className:r,children:s})=>a("i",{className:`fa fa-map-marker ${r}`,style:{fontSize:t,color:e},children:s}),ge=({position:t,size:e=30,color:r="rgb(0,50,255)",text:s,flyToMarkerZoom:n=null,animateFly:o=!0,onMouseEnter:i,onMouseLeave:l,onClick:c,children:u})=>{const h=Ee();return p.exports.useEffect(()=>{n!=null&&(o?h.flyTo(t,n):h.setView(t,n))},[t]),a(rn,{eventHandlers:{mouseover:m=>i&&i(m),mouseout:m=>l&&l(m),click:m=>c&&c(m)},position:t,icon:new _t.exports.DivIcon({html:Ct.exports.renderToStaticMarkup(a(cr,{fontSize:e.toString()+"px",color:r,children:s})),iconSize:[e/1.75,e],iconAnchor:[e/1.75/2,e]}),children:u})},ot=({children:t,whenReady:e,style:r=null})=>d(nn,{style:r||{height:600},center:{lat:12.12,lng:12.12},zoom:2,whenReady:()=>e&&e(),children:[a(sn,{attribution:'\xA9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t]}),Ts=({address:t})=>d("div",{children:[a(ot,{children:a(ge,{flyToMarkerZoom:16,animateFly:!1,position:t.coords})}),d("p",{children:[t.country," ",t.city," ",t.streetName&&","," ",t.streetName," ",t.streetName&&t.streetNumber]})]}),Ue=t=>a(lr,{isOpen:t.isMapModalOpen,setIsOpen:t.setIsMapModalOpen,children:a(Ts,{address:t.address})}),Es=({setIsOpen:t,disabled:e,children:r})=>a("div",{children:a(E,{disabled:e!=null?e:!1,onClick:()=>t(!0),size:"small",variant:"outlined",children:r})}),$e=t=>a(Es,{disabled:t.disabled,setIsOpen:t.setIsMapModalOpen,children:a(Tt,{})});function de({obstacles:t,style:e}){return a("div",{style:{fontSize:"0.2rem"},children:t==null?void 0:t.map(r=>a(on,{style:e,label:r,variant:"outlined",className:"me-1"},Y()))})}const Ve=({images:t,height:e=600,width:r=800})=>t&&t.length?a("div",{children:a(an,{showThumbnails:!1,showPlayButton:!1,items:t.map(s=>({original:s.base64,originalWidth:r,originalHeight:e}))})}):a("div",{children:"No images were added for this spot."});function ue({surfaceScore:t,style:e}){return a("div",{className:"me-1",children:a(Et,{style:e,variant:"outlined",label:`${t}/10`,icon:a(ln,{style:{color:(e==null?void 0:e.color)||"inherit"}})})})}const ys=t=>{const[e,r,s]=D(""),[n,o,i]=D(""),[l,c]=p.exports.useState(null),u=C(),h=U(),[m,f]=p.exports.useState(!1),S=()=>{c(null);let T="";try{e.indexOf("youtube")!==-1?(T=v(e),T&&c({type:Z.YouTube,id:T})):e.indexOf("instagram")!==-1&&(T=b(e),T&&c({type:Z.Instagram,id:T}))}catch{k()}finally{T||k()}},v=T=>{let A=T.slice(T.indexOf("?v=")+3);return A.indexOf("/")!==-1&&(A=A.slice(0,A.indexOf("/"))),A},b=T=>{let A=T.slice(T.indexOf("/p/")+3);return A.indexOf("/")!==-1&&(A=A.slice(0,A.indexOf("/"))),A},k=()=>{u(ae({message:"The url is invalid.",severity:"warning"}))},M=async()=>{f(!0);const T=await O(u,h.auth.content,(A,J)=>A.add_Spot_Video(t.spotName,J,{description:n,embedId:l.id,platformType:l.type}));return f(!1),{resContent:T.content}},W=async()=>{const{resContent:T}=await M();!T||(u(Yt.prependVideo(T)),s(),i(),c(null),t.setIsOpen(!1))};return a(lr,{isOpen:t.isOpen,setIsOpen:t.setIsOpen,children:d("div",{children:[d("div",{className:"d-flex",children:[a("div",{className:"col-5 me-2",children:a(j,{value:e,onChange:r,fullWidth:!0,label:"Copy and paste link to a Instagram or YouTube video ",variant:"standard"})}),a(E,{onClick:S,size:"small",variant:"contained",children:"Load"})]}),l&&d("div",{className:"mt-4",style:{fontSize:"1.10rem"},children:[a("p",{children:"This is the preview of the video. If you can see it you are good to go otherwise please insert correct link."}),l.type===Z.Instagram?a(nt,{videoId:l.id}):a(st,{videoId:l.id}),a("div",{className:"col-5 mt-2 mb-3",children:a(j,{value:n,onChange:o,rows:3,multiline:!0,fullWidth:!0,variant:"standard",label:"Description"})})]}),d("div",{className:"mt-2",children:[a(E,{disabled:!l,className:"me-2",color:"primary",variant:"contained",onClick:async()=>{await W()},children:m?a(z,{}):"Submit"}),a(E,{onClick:()=>{c(null),s(),i(),t.setIsOpen(!1)},color:"warning",variant:"contained",children:"Cancel"})]})]})})},ws=t=>a("div",{className:"me-1",children:a(He,{size:"small",onClick:()=>t.setIsAddSpotVideoModalOpen(!0),variant:"outlined",children:a(cn,{})})}),bs=G.memo(({spot:t})=>{var l;const[e,r]=p.exports.useState(!1),[s,n]=p.exports.useState(!1),[o,i]=p.exports.useState(!1);return d("div",{className:"mb-4",children:[a("h4",{children:t.name}),a("p",{children:t.description}),a(Ve,{images:t.images}),d("div",{className:"d-flex mt-2",children:[a(ce,{listItemId:t.id,likes:t.likes,likeAction:Ae}),a(le,{onClick:()=>n(!s),commentsCount:((l=t==null?void 0:t.comments)==null?void 0:l.length)||0}),a(ws,{setIsAddSpotVideoModalOpen:i}),a($e,{setIsMapModalOpen:r}),d("div",{className:"ms-3 d-flex",children:[a(ue,{surfaceScore:t.surfaceScore}),a(de,{obstacles:t.obstacles})]}),a(Se,{author:t.author})]}),s&&a("div",{className:"row col-4",children:ie({listItemId:t.id,comments:t.comments,listViewType:g.SPOTS})}),a("hr",{}),a(Ue,{isMapModalOpen:e,setIsMapModalOpen:r,address:t.address}),a(ys,{isOpen:o,setIsOpen:i,spotName:t.name})]})},(t,e)=>JSON.stringify({likes:t.spot.likes,comments:t.spot.comments})===JSON.stringify({likes:e.spot.likes,comments:e.spot.comments})),ks=()=>{var u,h,m;const t=U(),e=C(),r=y(f=>f.filtersState.appliedFilter.sort,Je.isEqual),n=V().location.pathname.split("/"),o=I.SPOTS.replace("/",""),i=n[n.indexOf(o)+1];is(i);const l=(u=t.spotsState.listWithCount.data)==null?void 0:u[0],c=()=>Yn({fetchFunc:(f,S,v)=>f.get_Spot_Videos_Of_Spot(i,S,v,r.option,r.ascending,void 0)});return p.exports.useEffect(()=>()=>{e(Le().spotVideos.reset())},[]),tt(c,g.SPOT_VIDEOS),et(),nr(!0,g.SPOT_VIDEOS,c),d("div",{className:"mt-5",style:{fontSize:"1rem"},children:[d("div",{className:"row mt-5 mx-0",children:[a("div",{className:"col-3"}),a("div",{className:"col-6",children:l&&a(bs,{spot:l})})]}),d("div",{className:"row mx-0",children:[a("div",{className:"col-2",children:a(ds,{listViewType:g.SPOT_VIDEOS})}),a("div",{className:"col-1"}),d("div",{className:"col-6",children:[a("h4",{className:"mb-5",children:"Videos"}),(m=(h=t.spotVideosState.listWithCount)==null?void 0:h.data)==null?void 0:m.map(f=>a(_s,{spotVideo:f},f.createdAt)),t.spotVideosState.loading&&a(z,{color:"secondary"})]})]})]})},dr=()=>{const t=y(o=>o.filtersState.filterInMaking.filter.surfaceScore),e=C(),[r,s]=p.exports.useState(t.score),n=o=>{o>10?o=10:o<1&&(o=1),e($.setSurfaceScore(o)),s(o)};return d("div",{className:"mt-4",children:[a("p",{className:"m-0",children:"Surface score"}),d("div",{className:"d-flex align-items-center",children:[a(dn,{onChange:()=>e($.toggleSurfaceScore()),checked:t.enabled}),a(E,{disabled:!t.enabled,className:"py-0",onClick:()=>e($.toggleSurfaceScoreGt()),style:{fontSize:"1.2rem"},children:t.gtFiltering?"\u2265":"<"}),a(yt,{disabled:!t.enabled,min:1,max:10,onChangeCommitted:o=>n(r),onChange:(o,i)=>s(i),value:r}),a(j,{disabled:!t.enabled,variant:"standard",className:"ms-3",value:r,size:"small",onChange:o=>n(Number(o.target.value)),type:"number",InputProps:{inputProps:{max:10,min:1}}})]})]})},ur=()=>{const t=y(r=>r.filtersState.filterInMaking.filter.tags.tags),e=C();return d("div",{className:"mt-4",children:[a("p",{className:"m-0",children:"Tags"}),a($t,{tags:t,setTags:r=>{e($.setTags(r))}})]})},Ns=({listViewType:t})=>d("div",{className:"ms-3",children:[a(sr,{listViewType:t}),a(dr,{}),a(ur,{}),a(rt,{})]}),mr=t=>{t.history.push(I.SPOT_DEDICATED_PAGE.replace(je.SPOT_NAME,t.spot.name),{spot:t.spot})},hr=t=>a("div",{children:d(He,{onClick:t.onClick,variant:"outlined",size:"small",className:"me-1",children:[a(We,{className:"me-1"}),a("span",{children:t.videosCount||"0"})]})}),at=({spotName:t})=>a(N,{style:{textDecoration:"none",color:"#9abeff"},to:I.SPOT_DEDICATED_PAGE.replace(je.SPOT_NAME,t),children:a("h4",{children:t})}),it=t=>d("div",{className:"d-flex mb-1 justify-content-between",children:[t.children,a(ir,{authorId:t.authorId,listItemId:t.listItemId,listViewType:t.listViewType,deleteFunc:t.deleteFunc})]}),pr=G.memo(({spot:t})=>{var i;const[e,r]=p.exports.useState(!1),[s,n]=p.exports.useState(!1),o=V();return d("div",{className:"mb-4",children:[a(it,{authorId:t.author.id,listItemId:t.id,listViewType:g.SPOTS,deleteFunc:(l,c)=>l.delete_Spot(t.id,c),children:a(at,{spotName:t.name})}),a("p",{children:t.description}),a(Ve,{images:t.images}),d("div",{className:"d-flex mt-2",children:[a(ce,{listItemId:t.id,likes:t.likes,likeAction:Ae}),a(le,{onClick:()=>n(!s),commentsCount:((i=t==null?void 0:t.comments)==null?void 0:i.length)||0}),a(hr,{videosCount:t.videosCount,onClick:()=>mr({history:o,spot:t})}),a($e,{setIsMapModalOpen:r}),d("div",{className:"ms-3 d-flex",children:[a(ue,{surfaceScore:t.surfaceScore}),a(de,{obstacles:t.obstacles})]}),a(Se,{author:t.author})]}),s&&a("div",{className:"row col-4",children:ie({listItemId:t.id,comments:t.comments,listViewType:g.SPOTS})}),a("hr",{}),a(Ue,{isMapModalOpen:e,setIsMapModalOpen:r,address:t.address})]})},(t,e)=>JSON.stringify({likes:t.spot.likes,comments:t.spot.comments})===JSON.stringify({likes:e.spot.likes,comments:e.spot.comments})),fr=G.memo(({spotVideo:t})=>{var o,i;const[e,r]=p.exports.useState(!1),[s,n]=p.exports.useState(!1);return d("div",{className:"mb-4",children:[a(it,{authorId:t.author.id,listItemId:t.id,listViewType:g.SPOT_VIDEOS,deleteFunc:(l,c)=>l.delete_Spot_Video(t.id,c),children:t.spot?a(at,{spotName:(o=t==null?void 0:t.spot)==null?void 0:o.name}):a("h4",{style:{color:"rgb(148,148,148)"},children:"[Spot deleted]"})}),t.platformType===Z.Instagram?a(nt,{videoId:t.embedId}):a(st,{videoId:t.embedId}),a("p",{children:t.description}),d("div",{className:"d-flex mt-2",children:[a(ce,{listItemId:t.id,likes:t.likes,likeAction:Ze}),a(le,{onClick:()=>n(!s),commentsCount:((i=t==null?void 0:t.comments)==null?void 0:i.length)||0}),a($e,{disabled:!t.spot,setIsMapModalOpen:r}),t.spot&&d("div",{className:"ms-3 d-flex",children:[a(ue,{surfaceScore:t.spot.surfaceScore}),a(de,{obstacles:t.spot.obstacles})]}),a(Se,{author:t.author})]}),s&&a("div",{className:"row col-4",children:ie({listItemId:t.id,comments:t.comments,listViewType:g.SPOT_VIDEOS})}),a("hr",{}),t.spot&&a(Ue,{isMapModalOpen:e,setIsMapModalOpen:r,address:t.spot.address})]})},(t,e)=>JSON.stringify({likes:t.spotVideo.likes,comments:t.spotVideo.comments})===JSON.stringify({likes:e.spotVideo.likes,comments:e.spotVideo.comments})),Sr=({isPositive:t,deletedLike:e,subjectId:r})=>Kt({tempSpotId:r,isReal:t,deletedVote:e}),xs=G.memo(({tempSpot:t})=>{var o,i;const[e,r]=p.exports.useState(!1),[s,n]=p.exports.useState(!1);return d("div",{className:"mb-4",children:[a(it,{authorId:t.author.id,listItemId:t.id,listViewType:g.TEMP_SPOTS,deleteFunc:(l,c)=>l.delete_Temp_Spot(t.id,c),children:a("h4",{children:t.name})}),a("p",{children:t.description}),a(Ve,{images:t.images}),d("div",{className:"d-flex mt-2",children:[a(ce,{listItemId:t.id,likes:t.verificationProcess.votes.map(l=>({userId:l.voterId,positive:l.isReal})),likeAction:Sr}),a(le,{onClick:()=>n(!s),commentsCount:(i=(o=t.verificationProcess)==null?void 0:o.discussion)==null?void 0:i.length}),a($e,{setIsMapModalOpen:r}),d("div",{className:"ms-3 d-flex",children:[a(ue,{surfaceScore:t.surfaceScore}),a(de,{obstacles:t.obstacles})]}),a(Se,{author:t.author})]}),s&&a("div",{className:"row col-4",children:ie({listItemId:t.id,comments:t.verificationProcess.discussion,listViewType:g.TEMP_SPOTS})}),a("hr",{}),a(Ue,{isMapModalOpen:e,setIsMapModalOpen:r,address:t.address})]})},(t,e)=>JSON.stringify(t.tempSpot.verificationProcess)===JSON.stringify(e.tempSpot.verificationProcess)),lt=({listViewType:t})=>{const e=C(),[r,s]=p.exports.useState(!1);p.exports.useEffect(()=>{s(!0),e(q()[t].fetchListItems())},[]),tt(q()[t].fetchListItems,t),et(),nr(r,t);const n=y(i=>i[t+"State"]),o=i=>{switch(t){case g.SPOTS:return a(pr,{spot:i},i.id);case g.SPOT_VIDEOS:return a(fr,{spotVideo:i},i.id);case g.TEMP_SPOTS:return a(xs,{tempSpot:i},i.id)}};return a(w,{children:d("div",{className:"row m-0 mt-5",style:{fontSize:"1rem"},children:[a("div",{className:"col-2",children:a("div",{className:"col-2",style:{position:"fixed"},children:a(Ns,{listViewType:t})})}),a("div",{className:"col-1"}),d("div",{className:"col-6",children:[!n.loading&&!n.error&&n.listWithCount.data.length===0&&a("p",{children:"There is nothing to view here \u{1F625}"}),n.listWithCount.data.map(i=>o(i)),n.loading&&a(z,{color:"secondary"})]})]})})},Os=t=>{const e=y(r=>r.filtersState.appliedFilter,Je.isEqual);p.exports.useEffect(()=>{t()},[e])},B={tempSpot:{color:"#ff640a",name:"Temp Spot"},spot:{color:"#00b360",name:"Spot"},selected:{color:"#1f4eb9",name:"Selected"}},As=({displaySelectedMarkerLegend:t,map:e})=>{p.exports.useEffect(()=>{const r=new _t.exports.Control({position:"bottomleft"});r.onAdd=()=>{const s=wt.DomUtil.create("div");return s.innerHTML=Ct.exports.renderToStaticMarkup(a("div",{className:"p-1",style:{background:"rgba(255,255,255, 0.5)",color:"black",marginBottom:"5rem"},children:a("ul",{className:"p-0 m-0",style:{listStyleType:"none"},children:Object.keys(B).filter(n=>!(n==="selected"&&!t)).map(n=>d("li",{className:"mb-1",children:[a(cr,{className:"me-1",fontSize:"1.5rem",color:B[n].color}),a("span",{children:B[n].name})]},n))})})),s},e.addControl(r)},[])},gr=t=>a(ge,{color:t.color?t.color:t.spotMarkerData.isTempSpot?B.tempSpot.color:B.spot.color,position:t.spotMarkerData.address.coords,onClick:t.onClick,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,size:t.size,children:t.children}),vr=({displaySelectedMarkerLegend:t=!1})=>(As({displaySelectedMarkerLegend:t,map:Ee()}),a(w,{})),Ps=({ref:t})=>{const e=Ee();p.exports.useEffect(()=>{if(!!t.current)return wt.DomEvent.disableScrollPropagation(t.current),t.current.onmouseenter=r=>e.dragging.disable(),t.current.onmouseleave=r=>e.dragging.enable(),()=>{e.dragging.enable()}},[t])},Ir=({outsideOfIds:t,funcToExecute:e})=>{bt({click(r){r.originalEvent.path.map(s=>s.id).some(s=>t.indexOf(s)!==-1)||e(r)}})},_r=({hide:t,style:e,children:r,className:s})=>{var o;const n=p.exports.useRef(null);return Ps({ref:n}),Ir({outsideOfIds:t?[t.mainContainerId,...t.dontHideOnIds]:[],funcToExecute:t?i=>t.funcToHide(i):()=>{}}),a("div",{style:e,ref:n,id:(o=t==null?void 0:t.mainContainerId)!=null?o:Y(),className:"on-top-of-map "+(s!=null?s:""),children:r})},ct="filter-btn",Ms=()=>{const t=C(),e=y(r=>r.mapSpotsState.isFilterModalOpen);return a(ye,{onClick:r=>{t(te.toggleFilterModal(!e))},className:"on-top-of-map ms-2",id:ct,children:a(un,{})})},dt="filters-modal",Ds=()=>{const t=C();return Ir({outsideOfIds:[dt,ct,Cr],funcToExecute:e=>{t(te.toggleFilterModal(!1))}}),d("div",{className:"pt-2 pb-4 px-4 mt-2",id:dt,children:[a("div",{className:"d-flex justify-content-end",children:a(ye,{onClick:e=>t(te.toggleFilterModal(!1)),className:"m-0 p-0",children:a(kt,{})})}),a(dr,{}),a(ur,{}),a(rt,{})]})},Rs=({marker:t})=>a(mn,{className:"leaflet-tooltip",direction:"top",offset:[0,-30],children:d("div",{style:{color:"white"},children:[a("p",{children:t.name}),d("div",{className:"d-flex",children:[a(ue,{style:{fontSize:"0.7rem"},surfaceScore:t.surfaceScore}),a(de,{style:{fontSize:"0.7rem",padding:0},obstacles:t.obstacles})]})]})}),Ls=t=>{var e;return{address:t.address,author:t.author,comments:t.verificationProcess.discussion,createdAt:t.createdAt,description:t.description,id:t.id,images:t.images,likes:(e=t.verificationProcess.votes)==null?void 0:e.map(r=>({positive:r.isReal,userId:r.voterId})),name:t.name,obstacles:t.obstacles,surfaceScore:t.surfaceScore,videosCount:0}};const Fs=()=>{var f;const t=C(),[e,r]=hn(),s=p.exports.useRef(null),[n,o]=p.exports.useState(!1),i=y(S=>S.mapSpotsState),l=y(S=>{var v;return(v=S.spotsState.listWithCount.data)==null?void 0:v[0]}),c=y(S=>{var v;return(v=S.tempSpotsState.listWithCount.data)==null?void 0:v[0]});p.exports.useEffect(()=>{s.current&&e(s.current)},[s]);const u=V(),h=i.currentSpotInModal?!!i.currentSpotInModal.verificationProcess:!1,m=l||c?h?Ls(c):l:null;return p.exports.useEffect(()=>{const S=Le()[h?g.TEMP_SPOTS:g.SPOTS];return i.currentSpotInModal&&t(S.setItems([i.currentSpotInModal])),()=>{t(S.reset())}},[i.currentSpotInModal]),d(w,{children:[i.loadingSpotInModal&&a(z,{size:72,className:"align-self-center",style:{marginTop:"auto",marginBottom:"auto"}}),m&&!i.loadingSpotInModal&&d("div",{style:{position:"relative"},children:[m.images&&m.images.length>0&&a("div",{style:{backgroundColor:"black"},children:a(Ve,{images:m.images,height:300,width:r.width})}),d("div",{className:`${m.images&&m.images.length?"mt-3":"mt-5"} ms-3`,children:[a(at,{spotName:m.name}),a("p",{children:m.description}),d("div",{className:"d-flex mt-5 mb-3",children:[a(ue,{surfaceScore:m.surfaceScore}),a(de,{obstacles:m.obstacles})]}),d("div",{className:"d-flex",children:[a(ce,{likes:m.likes,listItemId:m.id,likeAction:h?Sr:Ae}),a(le,{onClick:()=>o(!n),commentsCount:(f=m.comments)==null?void 0:f.length}),!h&&a(hr,{videosCount:m.videosCount,onClick:()=>mr({history:u,spot:m})})]}),n&&ie({listItemId:m.id,comments:m.comments,listViewType:h?g.TEMP_SPOTS:g.SPOTS})]}),a("div",{style:{position:"absolute",left:0,top:0},children:a(ye,{onClick:S=>t(te.toggleSpotModal(!1)),className:"mt-2 ms-2 p-0",children:a(kt,{})})})]})]})},Cr="spot-preview-modal",Us=()=>{const t=C(),e=y(o=>o.mapSpotsState),[r,s]=p.exports.useState(Y());et(),Os(()=>t(fe())),rr(),p.exports.useEffect(()=>{s(Y())},[e.markersData.length]);const n=o=>{var i;return((i=e.currentSpotInModal)==null?void 0:i.name)==o&&e.isSpotModalOpen};return a("div",{style:{height:"100%",position:"relative"},children:d(ot,{style:{height:"100%"},children:[d(_r,{className:"col-2",style:{backgroundColor:"transparent",top:"15%"},children:[a(Ms,{}),e.isFilterModalOpen&&a(Ds,{})]}),e.isSpotModalOpen&&a(_r,{className:"col-12 col-md-5 col-lg-4 d-flex flex-column",hide:{mainContainerId:Cr,dontHideOnIds:[ct,dt],funcToHide:()=>t(te.toggleSpotModal(!1))},children:a(Fs,{})}),a(Nt,{showCoverageOnHover:!1,children:e.markersData.length&&e.markersData.map(o=>a(gr,{spotMarkerData:o,color:n(o.name)?B.selected.color:void 0,size:n(o.name)?35:void 0,onClick:()=>{var i;((i=e.currentSpotInModal)==null?void 0:i.id)===o.id&&e.isSpotModalOpen?t(te.toggleSpotModal(!1)):(t(De({markerData:o})),t(te.toggleSpotModal(!0)))},children:a(Rs,{marker:o})},o.id))},r),a(vr,{displaySelectedMarkerLegend:!0})]})})},$s=async(t,e,r,s,n,o,i)=>await(async()=>{var u,h,m,f,S;let c={name:e,description:r,address:(s==null?void 0:s.coords)?{streetName:(u=s==null?void 0:s.address)==null?void 0:u.streetName,streetNumber:(h=s==null?void 0:s.address)==null?void 0:h.streetNumber,postCode:(m=s==null?void 0:s.address)==null?void 0:m.postCode,city:(f=s==null?void 0:s.address)==null?void 0:f.city,country:(S=s==null?void 0:s.address)==null?void 0:S.country,coords:s==null?void 0:s.coords}:void 0,surfaceScore:n,obstacles:o.filter(v=>v.isSelected).map(v=>L[v.obstacleType]),base64Images:t};return await Ke((v,b)=>v.create_Spot(b,c),i.content)})(),Vs=t=>d("div",{children:[d("p",{children:[t.country," ",t.city]}),d("p",{children:[t.streetName," ",t.streetName&&t.streetNumber]})]}),js=({children:t,displaySelectedMarkerLegend:e=!1})=>{const r=C(),s=y(n=>n.mapSpotsState.markersData);return p.exports.useEffect(()=>{r(fe())},[]),a("div",{children:d(ot,{children:[a(Nt,{showCoverageOnHover:!1,children:s.length&&s.map(n=>a(gr,{spotMarkerData:n,children:d(pn,{children:[a("b",{children:n.name}),Vs(n.address)]})},n.name))}),t,a(vr,{displaySelectedMarkerLegend:e})]})})},Tr=t=>({city:t.address.city||t.address.town||t.address.village,country:t.address.country,postCode:t.address.postcode,streetName:t.address.road,streetNumber:t.address.house_number,display:t.display_name});class ve{constructor(e,r){F(this,"coords");F(this,"address");this.coords=e,this.address=r}getKey(e){return`${this.coords.lat}${this.coords.lng}-${e}`}toString(){var e,r;return(r=(e=this.address)==null?void 0:e.display)!=null?r:""}static FromGeocode(e){return new ve({lat:e.lat,lng:e.lon},Tr(e))}}const Gs=async t=>{const e=`https://nominatim.openstreetmap.org/reverse?lat=${t.lat}&lon=${t.lng}&format=json`;let r;try{const n=await(await fetch(e)).json();n.address&&(r=Tr(n))}catch(s){console.log(s)}finally{return new ve(t,r)}},Bs=({setLocation:t,showClickMarker:e,setShowClickMarker:r})=>{const[s,n]=p.exports.useState(null);return bt({click(o){n(o.latlng),r(!0),Gs(o.latlng).then(i=>{t(i)})}}),s&&e?a(ge,{color:B.selected.color,position:s}):null},Ws=({setGeocodeLocations:t,setLocation:e,setShowClickMarker:r,setShowMore:s})=>{const[n,o]=D("");C();const i=async()=>{if(s(!1),!n)return;const l=await fetch(`https://nominatim.openstreetmap.org/search?q=
        ${encodeURIComponent(n)}&format=json&addressdetails=1`);if(l.status!==200)return;const c=await l.json()||[];t(c.map(u=>ve.FromGeocode(u))),e(c.length>0?ve.FromGeocode(c[0]):null),r(!1)};return d(w,{children:[a("div",{children:"Search by address"}),d("div",{className:"d-flex mb-2 align-items-end",children:[a(j,{className:"me-1",value:n,onChange:o,type:"text",label:"Address",variant:"standard",onKeyDown:l=>{l.key==="Enter"&&i()}}),a(E,{style:{height:"100%"},size:"small",variant:"contained",className:"px-2 py-2",onClick:i,children:"Search"})]})]})},Js=t=>{let e=[[91,91],[-91,-91]];return t.forEach(r=>{r.coords.lat<e[0][0]&&(e[0][0]=r.coords.lat),r.coords.lat>e[1][0]&&(e[1][0]=r.coords.lat),r.coords.lng<e[0][1]&&(e[0][1]=r.coords.lng),r.coords.lng>e[1][1]&&(e[1][1]=r.coords.lng)}),e},Hs=({showMore:t,fromGeocodeLocations:e,setHoveredAddress:r,hoveredAddress:s,pickAddress:n,location:o})=>{const i=Ee();return p.exports.useEffect(()=>{t&&e&&i.fitBounds(Js(e),{animate:!0,duration:1.5,padding:[4,4]})},[t,e]),a("div",{children:(()=>t?e==null?void 0:e.map((c,u)=>a(ge,{size:s===u?40:30,text:`${(u+1).toString()}`,color:B.selected.color,position:c.coords,onMouseEnter:m=>r(u),onMouseLeave:m=>r(null),onClick:m=>n(u)},c.getKey(u))):a(ge,{color:B.selected.color,position:o.coords,flyToMarkerZoom:12}))()})},ut=(t,e)=>{const[r,s]=p.exports.useState("");return p.exports.useEffect(()=>{const o=t();if(s(o),o){const i=setTimeout(()=>s(""),1e4);return()=>clearTimeout(i)}},e),()=>{if(r)return a("p",{className:"text-danger text-sm",children:r})}},zs=({fromGeocodeLocations:t,showMore:e,setShowMore:r,hoveredAddress:s,setHoveredAddress:n,location:o,pickAddress:i})=>{const l=ut(()=>o?"":"No address found",[o]),c=h=>{const m=Number(h.currentTarget.innerText.substr(0,h.currentTarget.innerText.indexOf(".")))-1;n(m)};return a("div",{children:(()=>o?e?t.map((h,m)=>a("div",{children:a(E,{style:s===m?{backgroundColor:"#363636"}:void 0,onClick:f=>i(m),onMouseEnter:c,onMouseLeave:()=>n(null),children:`${m+1}. ${h.toString()}`})},h.getKey(m))):d("div",{children:[a("span",{children:o.toString()}),a(E,{onClick:()=>r(!0),children:"Show more"})]}):l())()})},Ys=(t,e)=>{const[r,s]=p.exports.useState("");return p.exports.useEffect(()=>{const o=t();s(o)},e),()=>{if(r)return a("p",{className:"text-info text-sm",children:r})}},Ks=({location:t})=>{const e=Ys(()=>(t==null?void 0:t.address)?"":"No address found but location of spot has been saved",[t]);return a("div",{children:(()=>(t==null?void 0:t.address)?a("p",{className:"text-sm",children:t.toString()}):e())()})},qs=({location:t,setLocation:e})=>{const[r,s]=p.exports.useState(null),[n,o]=p.exports.useState(!0),[i,l]=p.exports.useState(!1),[c,u]=p.exports.useState(null),h=m=>{l(!1),e(r[m])};return d(w,{children:[a("p",{children:"Select spot on map"}),d(js,{displaySelectedMarkerLegend:!0,children:[a(Bs,{showClickMarker:n,setShowClickMarker:o,setLocation:e}),!n&&t&&a(Hs,{showMore:i,fromGeocodeLocations:r,setHoveredAddress:u,hoveredAddress:c,pickAddress:h,location:t})]}),a("div",{className:"mt-2",children:a(Ws,{setGeocodeLocations:s,setLocation:e,setShowClickMarker:o,setShowMore:l})}),n&&t&&a(Ks,{location:t}),!n&&a(zs,{fromGeocodeLocations:r,showMore:i,setShowMore:l,hoveredAddress:c,setHoveredAddress:u,location:t,pickAddress:h})]})},Er=t=>Math.round(new TextEncoder().encode(t).length/1024/1024*100)/100,yr=t=>Math.round(t.reduce((e,r)=>Array.isArray(r)?e+yr(r):e+Er(r),0)*100)/100,wr=({children:t,uploadedItems:e,setUploadedItems:r,otherUploadedItemsCount:s,uploadLimit:n,uploadedItemPluralized:o,onUploadBtnClick:i,uploadedCount:l,setUploadedCount:c,showUploadButton:u=!0,renderItem:h})=>{const m=ut(()=>{const S=l+s;let v="";if(s>=n)v=`You can't upload more ${o} because you've reached the images limit.`;else if(S>n){const b=n-s;v=`Only ${b} ${o} of ${l} were uploaded because of the limit`,c(b)}return v},[e]);function f(){if(e.length)return d("div",{children:[d("p",{className:"mb-1",children:["Uploaded ",o,": ",e.length]}),a("div",{className:"d-flex flex-wrap",children:e.map((S,v)=>d(E,{className:"p-1 me-3 mb-2 text-sm",onClick:b=>r([...e.filter((k,M)=>M!==v)]),children:[a(fn,{style:{textTransform:"none"},children:h(S)}),a("i",{className:"fa fa-times-circle ms-2","aria-hidden":"true"})]},Y()))})]})}return d("div",{className:"mb-2",children:[d("div",{className:"d-flex",children:[d("div",{className:"order-2",children:[a(E,{hidden:!u,variant:"contained",onClick:i,className:"me-1",children:"Upload Files"}),e.length!==0&&a(E,{variant:"contained",color:"warning",onClick:S=>{r([]),c(0)},children:"Remove all"})]}),t]}),m(),f()]})},br=t=>d(w,{children:[a("img",{alt:"Your uploaded spot img",style:{maxWidth:100,maxHeight:100,width:"auto",height:"auto"},src:t}),d("span",{children:[" ",Er(t),"MBs"]})]}),Xs=["image/png","image/jpg","image/jpeg","image/webp"],Qs=({images:t,setImages:e,imagesLimit:r,otherImagesCount:s})=>{const[n,o]=p.exports.useState(0),i=p.exports.useRef(null);return a(wr,{uploadedItems:t,setUploadedItems:e,uploadLimit:r,uploadedItemPluralized:"images",onUploadBtnClick:()=>{var c;return(c=i.current)==null?void 0:c.click()},uploadedCount:n,setUploadedCount:o,renderItem:br,otherUploadedItemsCount:s,children:a("input",{ref:i,onChange:c=>{var v,b;const u=r-s,h=(b=(v=c.target.files)==null?void 0:v.length)!=null?b:0;let m=[],f=0;Array.from(c.target.files||[]).forEach((k,M)=>{if(M+1>u)return;const W=new FileReader;W.addEventListener("load",T=>{m.push(T.target.result),f++}),W.addEventListener("error",()=>f++),W.addEventListener("abort",()=>f++),W.readAsDataURL(k)});const S=setInterval(()=>{(f===h||h>u&&f===u)&&(o(h),e(m),clearInterval(S))},100);c.target.value=null},style:{display:"none"},type:"file",accept:Xs.join(", "),multiple:!0})})},Zs=({images:t,setImages:e,otherImagesCount:r,imagesLimit:s})=>{const[n,o]=p.exports.useState(0),[i,l,c]=D(""),[u,h]=p.exports.useState(""),m=ut(()=>u,[u]),f=U().auth,S=()=>t.length+r<s&&i!=="",v=k=>{e([...t,k])},b=async()=>{var k;if(!!S())if(h(""),i.startsWith("data:image"))v(i),c();else try{const M=await new Ye().get_Base64_Images([i],"Bearer "+((k=f==null?void 0:f.content)==null?void 0:k.jwToken));M.content[0].success?(v(M.content[0].base64),c()):h(`The url contains invalid image - ${i}`)}catch{h("Couldn't load your image now, try later.")}};return a(wr,{uploadedItems:t,setUploadedItems:e,otherUploadedItemsCount:r,uploadLimit:s,uploadedItemPluralized:"images",onUploadBtnClick:()=>{},uploadedCount:n,setUploadedCount:o,showUploadButton:!1,renderItem:br,children:d(w,{children:[d("div",{className:"order-1",children:[a(j,{value:i,onKeyDown:k=>{k.key==="Enter"&&b()},onChange:l,variant:"standard",label:"Url"}),a(ye,{onClick:b,disabled:!S(),className:"align-self-end ms-2",children:a(Sn,{className:"fa fa-plus-circle","aria-hidden":"true"})})]}),m()]})})},mt=10,kr=20,eo=G.memo(({fromLinkImages:t,setFromLinkImages:e,fromFileImages:r,setFromFileImages:s})=>d(w,{children:[a("p",{className:"m-0",children:"Upload spot images"}),(()=>{const o=t.length+r.length,i=yr([t,r]);return d("p",{style:{fontSize:"0.85rem"},className:"text-info m-0",children:[`Uploaded ${o}/${mt}, `,a("span",{className:i>kr?"text-danger":"",children:`Size ${i}/${kr}MBs`})]})})(),a("div",{className:"mt-4 mb-3",children:a(Qs,{images:r,setImages:s,imagesLimit:mt,otherImagesCount:t.length})}),a("div",{children:a(Zs,{images:t,setImages:e,imagesLimit:mt,otherImagesCount:r.length})})]})),to=()=>{const[t,e]=D(""),[r,s]=D(""),[n,o]=p.exports.useState(5),[i,l]=p.exports.useState(null),[c,u]=p.exports.useState([]),[h,m]=p.exports.useState([]),[f,S]=p.exports.useState(""),[v,b]=p.exports.useState(Ut),[k,M]=p.exports.useState(!1),W=U().auth,T=C(),A=async()=>{if(k)return;M(!0);const J=await $s(c.concat(h),t,r,i,n,v,W);M(!1),J.error?S(J.error.message):(S(""),T(ae({clearAtDate:new Date(Date.now()+1e4),message:"Thank you! Your spot has been added to verification.",severity:"success"})))};return d("div",{className:"container pb-5",children:[a("div",{className:"mb-4 col-2",children:a(j,{value:t,onChange:e,required:!0,fullWidth:!0,variant:"standard",label:"Name"})}),a("div",{className:"mb-4 col-2",children:a(j,{value:r,onChange:s,rows:3,multiline:!0,fullWidth:!0,variant:"standard",label:"Description"})}),d("div",{className:"mb-4 col-2",children:[a("p",{className:"m-0",children:"Surface score"}),a(yt,{defaultValue:n,onChange:J=>o(Number(J.target.value)),"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,min:1,max:10,marks:[{value:1,label:"The worst"},{value:10,label:"The best"}]})]}),a("div",{className:"mb-5",children:a(qs,{location:i,setLocation:l})}),d("div",{className:"mb-5",children:[a("p",{className:"m-0",children:"Select at least one tag"}),a($t,{tags:v,setTags:b})]}),a("div",{className:"mb-5",children:a(eo,{fromLinkImages:h,setFromLinkImages:m,fromFileImages:c,setFromFileImages:u})}),f!==""&&a("p",{className:"text-sm text-danger",children:f.split(`
`).map(J=>a("p",{children:J},Y()))}),a(E,{onClick:A,size:"large",variant:"contained",children:k?a(z,{color:"secondary"}):"Submit"})]})},ro=({listViewType:t,fetchFunc:e,userInteractionType:r})=>{const s=C();p.exports.useEffect(()=>{s(Le()[t].reset()),s(q()[t].fetchListItemsCustomFunc({fetchFunc:e}))},[t,r]),tt(q()[t].fetchListItemsCustomFunc({fetchFunc:e}),t);const n=y(i=>i[t+"State"]),o=i=>{switch(t){case g.SPOTS:return a(pr,{spot:i},i.id);case g.SPOT_VIDEOS:return a(fr,{spotVideo:i},i.id)}};return d("div",{className:"container m-0 mt-5",style:{fontSize:"1rem"},children:[!n.loading&&!n.error&&n.listWithCount.data.length===0&&a("p",{children:"There is nothing to view here \u{1F625}"}),n.listWithCount.data.map(i=>o(i)),n.loading&&d(w,{children:[a("span",{children:"Loading activities "}),a(z,{color:"secondary"})]})]})},Nr={listItems:[{label:"Spots",icon:a(Tt,{}),value:ee.SPOTS},{label:"Videos",icon:a(We,{}),value:ee.SPOT_VIDEOS}],interactions:[{label:"Added",icon:a(xt,{}),value:oe.Added},{label:"Liked",icon:a(Ce,{}),value:oe.Liked},{label:"Commented",icon:a(Ot,{}),value:oe.Commented}]},no=()=>{const t=y(r=>r.userProfileState),e=C();return d("div",{className:"w-100",style:{position:"fixed",bottom:0,left:0,zIndex:100},children:[a(At,{onChange:(r,s)=>e(er.setWhat(s)),value:t.listItems.what,showLabels:!0,children:Nr.listItems.map(r=>a(Pt,{value:r.value,label:r.label,icon:r.icon},r.value))}),a(At,{onChange:(r,s)=>e(er.setInteractionType(s)),value:t.listItems.interactionType,showLabels:!0,children:Nr.interactions.map(r=>a(Pt,{value:r.value,label:r.label,icon:r.icon},r.value))})]})},so=()=>{const t=y(r=>r.userProfileState),e=y(r=>{var s;return(s=r.auth.content)==null?void 0:s.jwToken});return d("div",{children:[a("h1",{children:"Activites"}),a("div",{style:{paddingBottom:"10rem"},children:a(ro,{fetchFunc:(r,s,n)=>t.listItems.what===ee.SPOTS?r.get_User_Related_Spots(t.listItems.interactionType,s,n,"Bearer "+e):r.get_User_Related_Spot_Videos(t.listItems.interactionType,s,n,"Bearer "+e),userInteractionType:t.listItems.interactionType,listViewType:t.listItems.what===ee.SPOTS?g.SPOTS:g.SPOT_VIDEOS})}),a(no,{})]})},oo=()=>{const t=C(),e=y(s=>s.userProfileState.stats);p.exports.useEffect(()=>{t(Me())},[]);const r=s=>[{key:"Added",icon:a(xt,{}),count:s.addedCount},{key:"Liked",icon:a(Ce,{}),count:s.likedCount},{key:"Commented",icon:a(Ot,{}),count:s.commentedCount}];return d("div",{className:"mb-5",children:[a("h1",{children:"Stats"}),e.loading?d(w,{children:[a("span",{children:"Loading stats "}),a(z,{color:"secondary"})]}):d(w,{children:[a(xr,{label:"Spots",stats:r(e.value.spotStats)}),a(xr,{label:"Spot Videos",stats:r(e.value.spotVideoStats)})]})]})},xr=t=>d("div",{className:"mb-3",children:[a("p",{style:{fontSize:"1rem"},className:"m-0",children:t.label}),a("div",{children:t.stats.map(e=>a(Et,{className:"me-2 px-2 py-1",icon:e.icon,label:e.count},e.key))})]}),ao=()=>d("div",{className:"container",children:[a(oo,{}),a(so,{})]});var je;(function(t){t.SPOT_NAME=":spotName"})(je||(je={}));var I;(function(t){t.HOME="/",t.LOGIN="/auth/login",t.REGISTER="/auth/register",t.ADD_TEMP_SPOT="/temp/add",t.TEMP_SPOTS="/temp",t.SPOTS="/spot",t.LOGOUT="/logout",t.MAP="/map",t.SPOT_VIDEO="/video",t.SPOT_DEDICATED_PAGE="/spot/:spotName",t.USER_PROFILE="/user"})(I||(I={}));const ht=[{linkName:"SkateSpot",path:I.HOME,component:os,accessedBy:[x.ALL],renderLink:!1},{linkName:"Login",path:I.LOGIN,component:rs,accessedBy:[x.NOT_SIGNED_IN],renderLink:!1},{linkName:"Register",path:I.REGISTER,component:ss,accessedBy:[x.NOT_SIGNED_IN],renderLink:!1},{linkName:"Add Spot",path:I.ADD_TEMP_SPOT,component:to,accessedBy:[x.SIGNED_IN],renderLink:!0},{linkName:"Temp Spots",path:I.TEMP_SPOTS,component:()=>a(lt,{listViewType:g.TEMP_SPOTS}),accessedBy:[x.ALL],renderLink:!0},{linkName:"Spots",path:I.SPOTS,component:()=>a(lt,{listViewType:g.SPOTS}),accessedBy:[x.ALL],renderLink:!0},{linkName:"Videos",path:I.SPOT_VIDEO,component:()=>a(lt,{listViewType:g.SPOT_VIDEOS}),accessedBy:[x.ALL],renderLink:!0},{linkName:null,path:I.SPOT_DEDICATED_PAGE,component:ks,accessedBy:[x.ALL],renderLink:!1},{linkName:"Map",path:I.MAP,component:Us,accessedBy:[x.ALL],renderLink:!0},{linkName:null,path:I.USER_PROFILE,component:ao,accessedBy:[x.SIGNED_IN],renderLink:!1},{linkName:"Logout",path:I.LOGOUT,component:ns,accessedBy:[x.SIGNED_IN],renderLink:!1}];const io=()=>{const[t,e]=p.exports.useState({width:void 0,height:void 0});return p.exports.useEffect(()=>{const r=()=>{e({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[]),t},lo=t=>{const[e,r]=p.exports.useState(!1),s=p.exports.useRef(null),n=U().auth,o=V(),i=()=>{r(m=>!m)},l=m=>{s.current&&s.current.contains(m.target)||r(!1)},c=m=>{m.key==="Tab"?(m.preventDefault(),r(!1)):m.key==="Escape"&&r(!1)},u=G.useRef(e);G.useEffect(()=>{u.current===!0&&e===!1&&s.current.focus(),u.current=e},[e]);const h=()=>ht.filter(m=>m.renderLink).map(m=>ze(m,n)?a(N,{to:m.path,children:a(we,{style:{fontWeight:o.location.pathname.endsWith(m.path)?700:400},onClick:l,children:m.linkName})},m.path):null).filter(m=>m);return d("div",{id:"nav",className:"d-flex justify-content-between align-items-center",children:[a("div",{children:a("b",{children:d(N,{to:I.HOME,children:[a(Ie,{})," SkateSpot"]})})}),d("div",{children:[n.content&&a(N,{className:"me-2",to:I.USER_PROFILE,children:n.content.userName}),a(He,{ref:s,id:"composition-button",onClick:i,children:a(gn,{})}),a(vn,{id:"mobile-nav",open:e,anchorEl:s.current,role:void 0,placement:"bottom-start",transition:!0,disablePortal:!0,children:({TransitionProps:m,placement:f})=>a(In,Be(X({},m),{style:{transformOrigin:f==="bottom-start"?"left top":"left bottom"},children:a(_n,{children:a(vt,{onClickAway:l,children:d(Cn,{className:"py-0",autoFocusItem:e,onKeyDown:c,children:[h(),n.content?a(N,{to:I.LOGOUT,children:a(we,{onClick:l,children:"Logout"})}):d(w,{children:[a(N,{to:I.LOGIN,children:a(we,{onClick:l,children:"Login"})}),a(N,{to:I.REGISTER,children:a(we,{onClick:l,children:"Register"})})]})]})})})}))})]})]})},co=()=>{const t=U().auth,e=V(),r=Tn(),s=io(),n=()=>ht.filter(o=>o.renderLink).map(o=>ze(o,t)?a(N,{style:{fontWeight:e.location.pathname.endsWith(o.path)?700:400},to:o.path,children:o.linkName},o.path):null).filter(o=>o);return s.width&&s.width<=r.breakpoints.values.md?a(lo,{}):d("div",{id:"nav",className:"d-flex justify-content-between",children:[d("div",{children:[a("b",{children:d(N,{to:I.HOME,children:[a(Ie,{})," SkateSpot"]})}),n()]}),t.content?d("div",{children:[a(N,{to:I.USER_PROFILE,children:t.content.userName}),a(N,{to:I.LOGOUT,children:"Logout"})]}):d("div",{children:[a(N,{to:I.REGISTER,children:"Register"}),a(N,{to:I.LOGIN,children:"Login"})]})]})},uo=()=>{const t=C(),e=y(r=>r.auth);return p.exports.useEffect(()=>{t(ae({message:e.content?"You can't do this":"Please login first",severity:"info",clearAtDate:new Date(Date.now()+5e3)}))},[]),a(En,{to:I.HOME})};const mo=({clearDate:t})=>{const e=100,r=50,s=t-Date.now(),[n,o]=p.exports.useState(e);return p.exports.useEffect(()=>{o(e);const i=setInterval(()=>{const l=t-r-Date.now();if(o((l<0?0:l)*e/s),l<=0){clearInterval(i);return}},r);return()=>clearInterval(i)},[t]),a(yn,{variant:"determinate",value:n})},ho=()=>{const t=Re(),e=U();return e.flashMsgs.length!==0?a("div",{style:{position:"fixed",zIndex:1e4,opacity:.95},children:e.flashMsgs.map(r=>d(wn,{className:"mt-1",variant:"filled",severity:r.severity,onClose:()=>t(Rn(r.clearAtDate)),children:[r.message,a(mo,{clearDate:r.clearAtDate.getTime()})]},r.clearAtDate.getTime()))}):a(w,{})},po=()=>{const t=Re();p.exports.useEffect(()=>{const e=localStorage.getItem(Ne);if(e)try{const r=JSON.parse(atob(e.split(".")[1]));fo(r)||t(Fn({id:r.uid,userName:r.sub,email:r.email,roles:r.roles,isVerified:!1,jwToken:e,issuedOn:new Date(r.nbf*1e3),expiresOn:new Date(r.exp*1e3)}))}catch(r){console.log("Can't set auth state from local storage. Malformed state",r)}},[])},fo=t=>new Date().getTime()>t.exp*1e3,So=()=>{const t=U();return po(),d(w,{children:[a(ho,{}),d(bn,{basename:"/SkateSpot_v2/",children:[a(co,{}),a(kn,{children:(()=>ht.map(r=>a(Nn,{path:r.path,exact:!0,render:()=>ze(r,t.auth)?a(r.component,{}):a(uo,{})},r.linkName)))()})]})]})};xn.render(a(G.StrictMode,{children:a(On,{store:ts,children:a(An,{theme:Pn({palette:{mode:"dark"}}),children:a(So,{})})})}),document.getElementById("root"));
