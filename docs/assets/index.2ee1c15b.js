var kr=Object.defineProperty,xr=Object.defineProperties;var Or=Object.getOwnPropertyDescriptors;var ct=Object.getOwnPropertySymbols;var Ar=Object.prototype.hasOwnProperty,Pr=Object.prototype.propertyIsEnumerable;var Ve=(t,e,r)=>e in t?kr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,te=(t,e)=>{for(var r in e||(e={}))Ar.call(e,r)&&Ve(t,r,e[r]);if(ct)for(var r of ct(e))Pr.call(e,r)&&Ve(t,r,e[r]);return t},dt=(t,e)=>xr(t,Or(e));var L=(t,e,r)=>(Ve(t,typeof e!="symbol"?e+"":e,r),r);import{r as p,c as W,a as A,j as a,B as E,F as N,b as Mr,u as _,d as y,e as J,C as ut,f as d,g as mt,h as re,I as ne,i as se,L as Dr,k as Rr,l as je,m as Lr,n as Ge,o as U,p as H,_ as Be,S as Fr,M as Ie,q as Ur,s as $r,t as Vr,v as jr,w as _e,x as Gr,y as ht,z as Br,A as Wr,T as Jr,D as Ce,E as Hr,G as zr,H as pt,J as V,K as Yr,N as Kr,O as qr,P as z,Q as Xr,R as Qr,U as q,V as Zr,W as en,X as Te,Y as tn,Z as ft,$ as St,a0 as rn,a1 as nn,a2 as gt,a3 as sn,a4 as on,a5 as vt,a6 as an,a7 as It,a8 as ln,a9 as cn,aa as _t,ab as Ct,ac as Tt,ad as Ee,ae as dn,af as Et,ag as un,ah as mn,ai as yt,aj as hn,ak as pn,al as fn,am as wt,an as bt,ao as Nt,ap as kt,aq as Sn,ar as gn,as as vn,at as In,au as _n,av as Cn,aw as Tn,ax as En,ay as yn,az as wn}from"./vendor.35d371d3.js";const bn=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}};bn();var k;(function(t){t.ALL="All",t.SIGNED_IN="SignedInRoles",t.NOT_SIGNED_IN="NoRole",t.BASIC="Basic",t.MODERATOR="Moderator",t.ADMIN="Admin",t.SUPER_ADMIN="SuperAdmin"})(k||(k={}));const xt=(t,e)=>t.accessedBy.includes(k.ALL)||t.accessedBy.includes(k.SIGNED_IN)&&e.content||!e.content&&t.accessedBy.includes(k.NOT_SIGNED_IN)||e.content&&t.accessedBy.some(r=>{var s,n;return(n=(s=e.content)==null?void 0:s.roles)==null?void 0:n.some(o=>o===r)}),M=t=>{const[e,r]=p.exports.useState(t);return[e,s=>{r(s.target.value)},()=>r("")]};class Nn{constructor(e,r){L(this,"http");L(this,"baseUrl");L(this,"jsonParseReviver");this.http=r||window,this.baseUrl=e!=null?e:""}seed_Fake_Spots(e,r){let s=this.baseUrl+"/api/admin/seed/spots?";if(e===null)throw new Error("The parameter 'count' cannot be null.");e!==void 0&&(s+="count="+encodeURIComponent(""+e)+"&"),s=s.replace(/[?&]$/,"");let n={method:"POST",headers:{Authorization:r!=null?""+r:""}};return this.http.fetch(s,n).then(o=>this.processSeed_Fake_Spots(o))}processSeed_Fake_Spots(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}seed_Fake_Temp_Spots(e,r){let s=this.baseUrl+"/api/admin/seed/tempSpots?";if(e===null)throw new Error("The parameter 'count' cannot be null.");e!==void 0&&(s+="count="+encodeURIComponent(""+e)+"&"),s=s.replace(/[?&]$/,"");let n={method:"POST",headers:{Authorization:r!=null?""+r:""}};return this.http.fetch(s,n).then(o=>this.processSeed_Fake_Temp_Spots(o))}processSeed_Fake_Temp_Spots(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}comment(e,r,s,n){let o=this.baseUrl+"/api/{subjectType}/{subjectId}/comments";if(e==null)throw new Error("The parameter 'subjectType' must be defined.");if(o=o.replace("{subjectType}",encodeURIComponent(""+e)),r==null)throw new Error("The parameter 'subjectId' must be defined.");o=o.replace("{subjectId}",encodeURIComponent(""+r)),o=o.replace(/[?&]$/,"");let l={body:JSON.stringify(n),method:"POST",headers:{Authorization:s!=null?""+s:"","Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(o,l).then(c=>this.processComment(c))}processComment(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}edit_Comment(e,r,s,n,o){let i=this.baseUrl+"/api/{subjectType}/{subjectId}/comments/{commentId}";if(e==null)throw new Error("The parameter 'subjectType' must be defined.");if(i=i.replace("{subjectType}",encodeURIComponent(""+e)),r==null)throw new Error("The parameter 'subjectId' must be defined.");if(i=i.replace("{subjectId}",encodeURIComponent(""+r)),s==null)throw new Error("The parameter 'commentId' must be defined.");i=i.replace("{commentId}",encodeURIComponent(""+s)),i=i.replace(/[?&]$/,"");let c={body:JSON.stringify(o),method:"PUT",headers:{Authorization:n!=null?""+n:"","Content-Type":"application/json"}};return this.http.fetch(i,c).then(u=>this.processEdit_Comment(u))}processEdit_Comment(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Comment(e,r,s,n){let o=this.baseUrl+"/api/{SubjectType}/{SubjectId}/comments/{CommentId}";if(e==null)throw new Error("The parameter 'subjectId' must be defined.");if(o=o.replace("{SubjectId}",encodeURIComponent(""+e)),r==null)throw new Error("The parameter 'subjectType' must be defined.");if(o=o.replace("{SubjectType}",encodeURIComponent(""+r)),s==null)throw new Error("The parameter 'commentId' must be defined.");o=o.replace("{CommentId}",encodeURIComponent(""+s)),o=o.replace(/[?&]$/,"");let i={method:"DELETE",headers:{Authorization:n!=null?""+n:""}};return this.http.fetch(o,i).then(l=>this.processDelete_Comment(l))}processDelete_Comment(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Token(e){let r=this.baseUrl+"/api/identity/token";r=r.replace(/[?&]$/,"");let n={body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(r,n).then(o=>this.processGet_Token(o))}processGet_Token(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}logout(e){let r=this.baseUrl+"/api/identity/logout";r=r.replace(/[?&]$/,"");let s={method:"DELETE",headers:{Authorization:e!=null?""+e:""}};return this.http.fetch(r,s).then(n=>this.processLogout(n))}processLogout(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}register(e){let r=this.baseUrl+"/api/identity/register";r=r.replace(/[?&]$/,"");let n={body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(r,n).then(o=>this.processRegister(o))}processRegister(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}confirm_Email(e,r){let s=this.baseUrl+"/api/identity/confirm-email?";if(e===null)throw new Error("The parameter 'userId' cannot be null.");if(e!==void 0&&(s+="userId="+encodeURIComponent(""+e)+"&"),r===null)throw new Error("The parameter 'code' cannot be null.");r!==void 0&&(s+="code="+encodeURIComponent(""+r)+"&"),s=s.replace(/[?&]$/,"");let n={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(s,n).then(o=>this.processConfirm_Email(o))}processConfirm_Email(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}forgot_Password(e){let r=this.baseUrl+"/api/identity/forgot-password";r=r.replace(/[?&]$/,"");let n={body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json"}};return this.http.fetch(r,n).then(o=>this.processForgot_Password(o))}processForgot_Password(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}reset_Password(e){let r=this.baseUrl+"/api/identity/reset-password";r=r.replace(/[?&]$/,"");let n={body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(r,n).then(o=>this.processReset_Password(o))}processReset_Password(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Base64_Images(e,r){let s=this.baseUrl+"/api/ImageProxy/base64?";if(e===null)throw new Error("The parameter 'imagesUrls' cannot be null.");e!==void 0&&e&&e.forEach(o=>{s+="imagesUrls="+encodeURIComponent(""+o)+"&"}),s=s.replace(/[?&]$/,"");let n={method:"GET",headers:{Authorization:r!=null?""+r:"",Accept:"text/plain"}};return this.http.fetch(s,n).then(o=>this.processGet_Base64_Images(o))}processGet_Base64_Images(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}like(e,r,s,n){let o=this.baseUrl+"/api/{subjectType}/{subjectId}/Likes";if(e==null)throw new Error("The parameter 'subjectType' must be defined.");if(o=o.replace("{subjectType}",encodeURIComponent(""+e)),r==null)throw new Error("The parameter 'subjectId' must be defined.");o=o.replace("{subjectId}",encodeURIComponent(""+r)),o=o.replace(/[?&]$/,"");let l={body:JSON.stringify(n),method:"POST",headers:{Authorization:s!=null?""+s:"","Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(o,l).then(c=>this.processLike(c))}processLike(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Like(e,r,s){let n=this.baseUrl+"/api/{subjectType}/{subjectId}/Likes";if(e==null)throw new Error("The parameter 'subjectId' must be defined.");if(n=n.replace("{subjectId}",encodeURIComponent(""+e)),r==null)throw new Error("The parameter 'subjectType' must be defined.");n=n.replace("{subjectType}",encodeURIComponent(""+r)),n=n.replace(/[?&]$/,"");let o={method:"DELETE",headers:{Authorization:s!=null?""+s:"",Accept:"text/plain"}};return this.http.fetch(n,o).then(i=>this.processDelete_Like(i))}processDelete_Like(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Spots(e,r,s,n,o,i,l){let c=this.baseUrl+"/api/spots?";if(e===null)throw new Error("The parameter 'take' cannot be null.");if(e!==void 0&&(c+="take="+encodeURIComponent(""+e)+"&"),r===null)throw new Error("The parameter 'offset' cannot be null.");if(r!==void 0&&(c+="offset="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'sorting_Option' cannot be null.");if(s!==void 0&&(c+="Sorting.Option="+encodeURIComponent(""+s)+"&"),n===null)throw new Error("The parameter 'sorting_Ascending' cannot be null.");if(n!==void 0&&(c+="Sorting.Ascending="+encodeURIComponent(""+n)+"&"),o===null)throw new Error("The parameter 'filtering_SurfaceFilter_GreaterThan' cannot be null.");if(o!==void 0&&(c+="Filtering.SurfaceFilter.GreaterThan="+encodeURIComponent(""+o)+"&"),i===null)throw new Error("The parameter 'filtering_SurfaceFilter_Score' cannot be null.");if(i!==void 0&&(c+="Filtering.SurfaceFilter.Score="+encodeURIComponent(""+i)+"&"),l===null)throw new Error("The parameter 'filtering_ObstaclesFilter_Obstacles' cannot be null.");l!==void 0&&l&&l.forEach(m=>{c+="Filtering.ObstaclesFilter.Obstacles="+encodeURIComponent(""+m)+"&"}),c=c.replace(/[?&]$/,"");let u={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(c,u).then(m=>this.processGet_Spots(m))}processGet_Spots(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Spot(e){let r=this.baseUrl+"/api/spots/{spotName}";if(e==null)throw new Error("The parameter 'spotName' must be defined.");r=r.replace("{spotName}",encodeURIComponent(""+e)),r=r.replace(/[?&]$/,"");let s={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(r,s).then(n=>this.processGet_Spot(n))}processGet_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Perma_And_Temp_Spots_Marker_Data(e,r,s){let n=this.baseUrl+"/api/spots/marker?";if(e===null)throw new Error("The parameter 'surfaceFilter_GreaterThan' cannot be null.");if(e!==void 0&&(n+="SurfaceFilter.GreaterThan="+encodeURIComponent(""+e)+"&"),r===null)throw new Error("The parameter 'surfaceFilter_Score' cannot be null.");if(r!==void 0&&(n+="SurfaceFilter.Score="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'obstaclesFilter_Obstacles' cannot be null.");s!==void 0&&s&&s.forEach(i=>{n+="ObstaclesFilter.Obstacles="+encodeURIComponent(""+i)+"&"}),n=n.replace(/[?&]$/,"");let o={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(n,o).then(i=>this.processGet_Perma_And_Temp_Spots_Marker_Data(i))}processGet_Perma_And_Temp_Spots_Marker_Data(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Spot(e,r){let s=this.baseUrl+"/api/spots/{Id}";if(e==null)throw new Error("The parameter 'id' must be defined.");s=s.replace("{Id}",encodeURIComponent(""+e)),s=s.replace(/[?&]$/,"");let n={method:"DELETE",headers:{Authorization:r!=null?""+r:""}};return this.http.fetch(s,n).then(o=>this.processDelete_Spot(o))}processDelete_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Spot_And_Spot_Video_Stats(){let e=this.baseUrl+"/api/spots/stats";e=e.replace(/[?&]$/,"");let r={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(e,r).then(s=>this.processGet_Spot_And_Spot_Video_Stats(s))}processGet_Spot_And_Spot_Video_Stats(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Spot_Videos(e,r,s,n,o,i,l,c){let u=this.baseUrl+"/api/spotVideos?";if(e===null)throw new Error("The parameter 'take' cannot be null.");if(e!==void 0&&(u+="take="+encodeURIComponent(""+e)+"&"),r===null)throw new Error("The parameter 'offset' cannot be null.");if(r!==void 0&&(u+="offset="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'sorting_Option' cannot be null.");if(s!==void 0&&(u+="Sorting.Option="+encodeURIComponent(""+s)+"&"),n===null)throw new Error("The parameter 'sorting_Ascending' cannot be null.");if(n!==void 0&&(u+="Sorting.Ascending="+encodeURIComponent(""+n)+"&"),o===null)throw new Error("The parameter 'filtering_SurfaceFilter_GreaterThan' cannot be null.");if(o!==void 0&&(u+="Filtering.SurfaceFilter.GreaterThan="+encodeURIComponent(""+o)+"&"),i===null)throw new Error("The parameter 'filtering_SurfaceFilter_Score' cannot be null.");if(i!==void 0&&(u+="Filtering.SurfaceFilter.Score="+encodeURIComponent(""+i)+"&"),l===null)throw new Error("The parameter 'filtering_ObstaclesFilter_Obstacles' cannot be null.");l!==void 0&&l&&l.forEach(h=>{u+="Filtering.ObstaclesFilter.Obstacles="+encodeURIComponent(""+h)+"&"}),u=u.replace(/[?&]$/,"");let m={method:"GET",headers:{Authorization:c!=null?""+c:"",Accept:"text/plain"}};return this.http.fetch(u,m).then(h=>this.processGet_Spot_Videos(h))}processGet_Spot_Videos(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Spot_Videos_Of_Spot(e,r,s,n,o,i){let l=this.baseUrl+"/api/spots/{spotName}/spotVideos?";if(e==null)throw new Error("The parameter 'spotName' must be defined.");if(l=l.replace("{spotName}",encodeURIComponent(""+e)),r===null)throw new Error("The parameter 'take' cannot be null.");if(r!==void 0&&(l+="take="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'offset' cannot be null.");if(s!==void 0&&(l+="offset="+encodeURIComponent(""+s)+"&"),n===null)throw new Error("The parameter 'option' cannot be null.");if(n!==void 0&&(l+="Option="+encodeURIComponent(""+n)+"&"),o===null)throw new Error("The parameter 'ascending' cannot be null.");o!==void 0&&(l+="Ascending="+encodeURIComponent(""+o)+"&"),l=l.replace(/[?&]$/,"");let c={method:"GET",headers:{Authorization:i!=null?""+i:"",Accept:"text/plain"}};return this.http.fetch(l,c).then(u=>this.processGet_Spot_Videos_Of_Spot(u))}processGet_Spot_Videos_Of_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}add_Spot_Video(e,r,s){let n=this.baseUrl+"/api/spots/{spotName}/spotVideos";if(e==null)throw new Error("The parameter 'spotName' must be defined.");n=n.replace("{spotName}",encodeURIComponent(""+e)),n=n.replace(/[?&]$/,"");let i={body:JSON.stringify(s),method:"POST",headers:{Authorization:r!=null?""+r:"","Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(n,i).then(l=>this.processAdd_Spot_Video(l))}processAdd_Spot_Video(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Spot_Video(e,r){let s=this.baseUrl+"/api/spotVideos/{spotVideoId}";if(e==null)throw new Error("The parameter 'spotVideoId' must be defined.");s=s.replace("{spotVideoId}",encodeURIComponent(""+e)),s=s.replace(/[?&]$/,"");let n={method:"DELETE",headers:{Authorization:r!=null?""+r:""}};return this.http.fetch(s,n).then(o=>this.processDelete_Spot_Video(o))}processDelete_Spot_Video(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}create_Spot(e,r){let s=this.baseUrl+"/api/TempSpots";s=s.replace(/[?&]$/,"");let o={body:JSON.stringify(r),method:"POST",headers:{Authorization:e!=null?""+e:"","Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(s,o).then(i=>this.processCreate_Spot(i))}processCreate_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Temp_Spots(e,r,s,n,o,i,l){let c=this.baseUrl+"/api/TempSpots?";if(e===null)throw new Error("The parameter 'take' cannot be null.");if(e!==void 0&&(c+="take="+encodeURIComponent(""+e)+"&"),r===null)throw new Error("The parameter 'offset' cannot be null.");if(r!==void 0&&(c+="offset="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'sorting_Option' cannot be null.");if(s!==void 0&&(c+="Sorting.Option="+encodeURIComponent(""+s)+"&"),n===null)throw new Error("The parameter 'sorting_Ascending' cannot be null.");if(n!==void 0&&(c+="Sorting.Ascending="+encodeURIComponent(""+n)+"&"),o===null)throw new Error("The parameter 'filtering_SurfaceFilter_GreaterThan' cannot be null.");if(o!==void 0&&(c+="Filtering.SurfaceFilter.GreaterThan="+encodeURIComponent(""+o)+"&"),i===null)throw new Error("The parameter 'filtering_SurfaceFilter_Score' cannot be null.");if(i!==void 0&&(c+="Filtering.SurfaceFilter.Score="+encodeURIComponent(""+i)+"&"),l===null)throw new Error("The parameter 'filtering_ObstaclesFilter_Obstacles' cannot be null.");l!==void 0&&l&&l.forEach(m=>{c+="Filtering.ObstaclesFilter.Obstacles="+encodeURIComponent(""+m)+"&"}),c=c.replace(/[?&]$/,"");let u={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(c,u).then(m=>this.processGet_Temp_Spots(m))}processGet_Temp_Spots(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Temp_Spot(e){let r=this.baseUrl+"/api/TempSpots/{id}";if(e==null)throw new Error("The parameter 'id' must be defined.");r=r.replace("{id}",encodeURIComponent(""+e)),r=r.replace(/[?&]$/,"");let s={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(r,s).then(n=>this.processGet_Temp_Spot(n))}processGet_Temp_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Temp_Spot(e,r){let s=this.baseUrl+"/api/TempSpots/{id}";if(e==null)throw new Error("The parameter 'id' must be defined.");s=s.replace("{id}",encodeURIComponent(""+e)),s=s.replace(/[?&]$/,"");let n={method:"DELETE",headers:{Authorization:r!=null?""+r:""}};return this.http.fetch(s,n).then(o=>this.processDelete_Temp_Spot(o))}processDelete_Temp_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_User_Stats(e){let r=this.baseUrl+"/api/user/stats";r=r.replace(/[?&]$/,"");let s={method:"GET",headers:{Authorization:e!=null?""+e:"",Accept:"text/plain"}};return this.http.fetch(r,s).then(n=>this.processGet_User_Stats(n))}processGet_User_Stats(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_User_Related_Spots(e,r,s,n){let o=this.baseUrl+"/api/user/Spots/{interactionType}?";if(e==null)throw new Error("The parameter 'interactionType' must be defined.");if(o=o.replace("{interactionType}",encodeURIComponent(""+e)),r===null)throw new Error("The parameter 'take' cannot be null.");if(r!==void 0&&(o+="take="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'skip' cannot be null.");s!==void 0&&(o+="skip="+encodeURIComponent(""+s)+"&"),o=o.replace(/[?&]$/,"");let i={method:"GET",headers:{Authorization:n!=null?""+n:"",Accept:"text/plain"}};return this.http.fetch(o,i).then(l=>this.processGet_User_Related_Spots(l))}processGet_User_Related_Spots(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_User_Related_Spot_Videos(e,r,s,n){let o=this.baseUrl+"/api/user/Videos/{interactionType}?";if(e==null)throw new Error("The parameter 'interactionType' must be defined.");if(o=o.replace("{interactionType}",encodeURIComponent(""+e)),r===null)throw new Error("The parameter 'take' cannot be null.");if(r!==void 0&&(o+="take="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'skip' cannot be null.");s!==void 0&&(o+="skip="+encodeURIComponent(""+s)+"&"),o=o.replace(/[?&]$/,"");let i={method:"GET",headers:{Authorization:n!=null?""+n:"",Accept:"text/plain"}};return this.http.fetch(o,i).then(l=>this.processGet_User_Related_Spot_Videos(l))}processGet_User_Related_Spot_Videos(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}vote(e,r,s){let n=this.baseUrl+"/api/tempSpots/{tempSpotId}/vote";if(e==null)throw new Error("The parameter 'tempSpotId' must be defined.");n=n.replace("{tempSpotId}",encodeURIComponent(""+e)),n=n.replace(/[?&]$/,"");let i={body:JSON.stringify(s),method:"POST",headers:{Authorization:r!=null?""+r:"","Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(n,i).then(l=>this.processVote(l))}processVote(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Vote(e,r){let s=this.baseUrl+"/api/tempSpots/{tempSpotId}/vote";if(e==null)throw new Error("The parameter 'tempSpotId' must be defined.");s=s.replace("{tempSpotId}",encodeURIComponent(""+e)),s=s.replace(/[?&]$/,"");let n={method:"DELETE",headers:{Authorization:r!=null?""+r:"",Accept:"text/plain"}};return this.http.fetch(s,n).then(o=>this.processDelete_Vote(o))}processDelete_Vote(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>I("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}}var me;(function(t){t.Spots="Spots",t.SpotVideos="SpotVideos",t.TempSpots="TempSpots"})(me||(me={}));var ye;(function(t){t.DEFAULT_ERROR="DEFAULT_ERROR",t.ALREADY_EXISTS="ALREADY_EXISTS",t.VOTING_FINISHED="VOTING_FINISHED",t.DOESNT_EXIST="DOESNT_EXIST",t.NOT_OWNED="NOT_OWNED",t.EMAIL_NOT_VERIFIED="EMAIL_NOT_VERIFIED",t.CANT_DO_THAT="CANT_DO_THAT",t.IMAGES_MAXED="IMAGES_MAXED",t.TOO_MANY_IMAGES="TOO_MANY_IMAGES",t.BAD_INPUT="BAD_INPUT",t.UNAUTHORIZED="UNAUTHORIZED",t.FORBIDDEN="FORBIDDEN"})(ye||(ye={}));var X;(function(t){t.Spots="Spots",t.SpotVideos="SpotVideos",t.Comments="Comments"})(X||(X={}));var R;(function(t){t.Ledge="Ledge",t.Stairs="Stairs",t.Quater="Quater",t.Kicker="Kicker",t.Downhill="Downhill",t.Rail="Rail",t.Bank="Bank",t.Flatground="Flatground",t.Manualpad="Manualpad",t.Skatepark="Skatepark"})(R||(R={}));var Y;(function(t){t.CREATION_DATE="CREATION_DATE",t.LIKES="LIKES",t.COMMENTS="COMMENTS",t.VIDEOS="VIDEOS"})(Y||(Y={}));var oe;(function(t){t.Added="Added",t.Liked="Liked",t.Commented="Commented"})(oe||(oe={}));var Q;(function(t){t.Instagram="Instagram",t.YouTube="YouTube"})(Q||(Q={}));class Ot extends Error{constructor(e,r,s,n,o){super();L(this,"message");L(this,"status");L(this,"response");L(this,"headers");L(this,"result");L(this,"isApiException",!0);this.message=e,this.status=r,this.response=s,this.headers=n,this.result=o}static isApiException(e){return e.isApiException===!0}}function I(t,e,r,s,n){throw n!=null?n:new Ot(t,e,r,s,null)}const we=W({name:"flashMsg",initialState:[],reducers:{setFlashMsg:(t,e)=>{t.push(e.payload)},clearFlashMsg:(t,e)=>t.filter(r=>r.clearAtDate!==e.payload)}}),ae=A("flashMsg/createFlashMsgWithTimeout",async(t,{dispatch:e})=>{var s;(s=t.clearAtDate)!=null||(t.clearAtDate=new Date(Date.now()+1e4)),e(we.actions.setFlashMsg(t));const r=setTimeout(()=>{e(we.actions.clearFlashMsg(t.clearAtDate)),clearTimeout(r)},t.clearAtDate.getTime()-Date.now())}),{clearFlashMsg:kn}=we.actions;var xn=we.reducer;class We extends Nn{constructor(){super("http://20.73.213.51:80")}}const Je=async(t,e)=>{try{const r=await t(new We,"Bearer "+(e==null?void 0:e.jwToken));return r===void 0?{content:void 0,error:void 0}:r}catch(r){return r instanceof Ot?JSON.parse(r.response):new Promise(s=>{s({content:void 0,error:{statusCode:ye.DEFAULT_ERROR}})})}},x=async(t,e,r,s,n=1e4)=>{var i,l;const o=await Je(r,e);return o.error&&t(ae({message:((i=o==null?void 0:o.error)==null?void 0:i.statusCode)!==ye.DEFAULT_ERROR?(l=o.error)==null?void 0:l.message:s||"Something went wrong, try again later.",severity:"error",clearAtDate:new Date(Date.now()+n)})),o},be="SkateSpotJWT",Ne=A("auth/login",async({loginData:t,history:e},{rejectWithValue:r,dispatch:s})=>{const n=await x(s,void 0,o=>o.get_Token(t));return n.error?r(null):(localStorage.setItem(be,n.content.jwToken),e.push(C.HOME),n.content)}),ke=A("auth/register",async(t,{rejectWithValue:e,dispatch:r})=>{if((await x(r,void 0,n=>n.register(t))).error)return e(null)}),At=A("auth/logout",async()=>{const t=localStorage.getItem(be);localStorage.removeItem(be),t&&await new We().logout("Bearer "+t)}),Pt={loginLoading:!1,registerSuccess:!1,registerLoading:!1},Mt=W({name:"auth",initialState:Pt,reducers:{setAuthStateFromLocalStorage:(t,e)=>{Dt(t,e.payload)}},extraReducers:t=>{t.addCase(Ne.pending,e=>{e.loginLoading=!0}).addCase(Ne.fulfilled,(e,r)=>{Dt(e,r.payload)}).addCase(Ne.rejected,e=>{e.loginLoading=!1}).addCase(ke.pending,e=>{e.registerLoading=!0}).addCase(ke.fulfilled,e=>{e.registerSuccess=!0,e.registerLoading=!1}).addCase(ke.rejected,e=>{e.registerLoading=!1}).addCase(At.pending,()=>Pt)}}),Dt=(t,e)=>{Array.isArray(e.roles)||(e.roles=[e.roles]),t.content=e,t.loginLoading=!1},{setAuthStateFromLocalStorage:On}=Mt.actions;var An=Mt.reducer;const Pn=({name:t,isSelected:e,toggleSelection:r})=>a(E,{style:e?{backgroundColor:"#9df990"}:void 0,className:"me-1 mt-1 px-2",onClick:r,variant:e?"contained":"text",children:t}),Rt=[{obstacleType:R.Skatepark,isSelected:!1},{obstacleType:R.Ledge,isSelected:!1},{obstacleType:R.Rail,isSelected:!1},{obstacleType:R.Stairs,isSelected:!1},{obstacleType:R.Bank,isSelected:!1},{obstacleType:R.Kicker,isSelected:!1},{obstacleType:R.Manualpad,isSelected:!1},{obstacleType:R.Flatground,isSelected:!1},{obstacleType:R.Quater,isSelected:!1},{obstacleType:R.Downhill,isSelected:!1}],Lt=({tags:t,setTags:e})=>{const r=s=>{e(t.map(n=>({obstacleType:n.obstacleType,isSelected:n.obstacleType===s.obstacleType?!n.isSelected:n.isSelected})))};return a(N,{children:t.map(s=>a(Pn,{name:s.obstacleType,isSelected:s.isSelected,toggleSelection:()=>r(s)},s.obstacleType))})},Ft={sort:{option:Y.CREATION_DATE,ascending:!1},filter:{surfaceScore:{enabled:!1,gtFiltering:!0,score:5},tags:{enabled:!1,tags:Rt}}},Mn={sort:Ft.sort,filter:void 0},Ut={appliedFilter:Mn,filterInMaking:Ft},$t=W({name:"filters",initialState:Ut,reducers:{applyFilters:t=>{var e,r,s,n;t.appliedFilter.sort=t.filterInMaking.sort,t.filterInMaking.filter.surfaceScore.enabled&&((r=(e=t.appliedFilter).filter)!=null||(e.filter={}),t.appliedFilter.filter.surfaceScore={score:t.filterInMaking.filter.surfaceScore.score,gtFiltering:t.filterInMaking.filter.surfaceScore.gtFiltering}),t.filterInMaking.filter.tags.enabled&&((n=(s=t.appliedFilter).filter)!=null||(s.filter={}),t.appliedFilter.filter.tags=t.filterInMaking.filter.tags.tags.filter(o=>o.isSelected).map(o=>o.obstacleType)),!t.filterInMaking.filter.surfaceScore.enabled&&!t.filterInMaking.filter.tags.enabled&&(t.appliedFilter.filter=void 0)},clearFilters:t=>Ut,setSortingOption:(t,e)=>{t.filterInMaking.sort.option=e.payload},setSortAscending:(t,e)=>{t.filterInMaking.sort.ascending=e.payload},toggleSurfaceScore:t=>{t.filterInMaking.filter.surfaceScore.enabled=!t.filterInMaking.filter.surfaceScore.enabled},toggleSurfaceScoreGt:t=>{t.filterInMaking.filter.surfaceScore.gtFiltering=!t.filterInMaking.filter.surfaceScore.gtFiltering},setSurfaceScore:(t,e)=>{t.filterInMaking.filter.surfaceScore.score=e.payload},setTags:(t,e)=>{t.filterInMaking.filter.tags.enabled=e.payload.some(r=>r.isSelected),t.filterInMaking.filter.tags.tags=e.payload}}}),$=$t.actions;var Dn=$t.reducer;const D={spots:{fetchListItems:(t,e,r,s)=>{var n,o,i,l,c,u,m;return t.get_Spots(e,r,(n=s.sort)==null?void 0:n.option,(o=s.sort)==null?void 0:o.ascending,(l=(i=s.filter)==null?void 0:i.surfaceScore)==null?void 0:l.gtFiltering,(u=(c=s.filter)==null?void 0:c.surfaceScore)==null?void 0:u.score,(m=s.filter)==null?void 0:m.tags)},getSpecificState:t=>t.spotsState,name:"spots",commentSubjectType:me.Spots},tempSpots:{fetchListItems:(t,e,r,s)=>{var n,o,i,l,c,u,m;return t.get_Temp_Spots(e,r,(n=s.sort)==null?void 0:n.option,(o=s.sort)==null?void 0:o.ascending,(l=(i=s.filter)==null?void 0:i.surfaceScore)==null?void 0:l.gtFiltering,(u=(c=s.filter)==null?void 0:c.surfaceScore)==null?void 0:u.score,(m=s.filter)==null?void 0:m.tags)},getSpecificState:t=>t.tempSpotsState,name:"tempSpots",commentSubjectType:me.TempSpots},spotVideos:{fetchListItems:(t,e,r,s)=>{var n,o,i,l,c,u,m;return t.get_Spot_Videos(e,r,(n=s.sort)==null?void 0:n.option,(o=s.sort)==null?void 0:o.ascending,(l=(i=s.filter)==null?void 0:i.surfaceScore)==null?void 0:l.gtFiltering,(u=(c=s.filter)==null?void 0:c.surfaceScore)==null?void 0:u.score,(m=s.filter)==null?void 0:m.tags,void 0)},getSpecificState:t=>t.spotVideosState,name:"spotVideos",commentSubjectType:me.SpotVideos}};var g;(function(t){t.SPOTS="spots",t.TEMP_SPOTS="tempSpots",t.SPOT_VIDEOS="spotVideos"})(g||(g={}));const He=(t,e)=>A(`${D[t].name}/like${e===X.Comments?"/"+X.Comments:""}`,async({isPositive:r,deletedLike:s,subjectId:n,parentId:o},{getState:i,dispatch:l,rejectWithValue:c})=>{const u=i(),m=await x(l,u.auth.content,(h,f)=>s?h.delete_Like(n,e,f):h.like(e,n,f,{positive:r}),"Error occured while liking, please try again later");return m.error?c(null):{result:m.content,likeSubjectType:e,subjectId:n,parentId:o}}),xe=He(g.SPOTS,X.Spots),Rn=t=>A(`${D[t].name}/comment`,async({listItemId:e,text:r},{getState:s,dispatch:n,rejectWithValue:o})=>{const i=s(),l=await x(n,i.auth.content,(c,u)=>c.comment(D[t].commentSubjectType,e,u,{text:r}),"Couldn't add comment, please try again later");return l.error?o(null):{comment:l.content,listItemId:e}}),Ln=t=>A(`${D[t].name}/deleteComment`,async({listItemId:e,commentId:r},{getState:s,dispatch:n,rejectWithValue:o})=>{const i=s();return(await x(n,i.auth.content,(c,u)=>c.delete_Comment(e,D[t].commentSubjectType,r,u),"Couldn't delete comment, please try again later")).error?o(null):{listItemId:e,commentId:r}}),Fn=t=>A(`${D[t].name}/deleteListItem`,async({listItemId:e,deleteFunc:r},{getState:s,dispatch:n,rejectWithValue:o})=>{const i=s();return(await x(n,i.auth.content,(c,u)=>r(c,u))).error?o(null):{listItemId:e}}),Un=t=>A(`${D[t].name}/editComment`,async({listItemId:e,commentId:r,newText:s},{getState:n,dispatch:o,rejectWithValue:i})=>{const l=n();return(await x(o,l.auth.content,(u,m)=>u.edit_Comment(D[t].commentSubjectType,e,r,m,{newText:s}),"Couldn't edit comment, please try again later")).error?i(null):{listItemId:e,commentId:r,newText:s}}),$n=t=>A(`${D[t].name}/fetchListItems`,async(e,{getState:r,dispatch:s,rejectWithValue:n})=>{const o=r(),i=D[t].getSpecificState(o),l=await x(s,o.auth.content,c=>D[t].fetchListItems(c,i.paging.take,i.paging.skip,o.filtersState.appliedFilter),"Error occured while loading next records, please try again later.");return l.error?n(null):l.content}),Vt=t=>A(`${D[t].name}/fetchListItems`,async({fetchFunc:e},{getState:r,dispatch:s,rejectWithValue:n})=>{const o=r(),i=D[t].getSpecificState(o),l=await x(s,o.auth.content,c=>e(c,i.paging.take,i.paging.skip),"Error occured while loading next records, please try again later.");return l.error?n(null):l.content}),he={fetchListItems:$n,fetchListItemsCustomFunc:Vt,comment:Rn,deleteComment:Ln,editComment:Un,likeComment:He,deleteListItem:Fn},K=()=>{let t={};return Object.keys(g).forEach(e=>{t[g[e]]={},Object.keys(he).forEach(r=>{he[r].name===he.likeComment.name?t[g[e]][r]=he[r](g[e],X.Comments):t[g[e]][r]=he[r](g[e])})}),t},ze={like:{fulfilled:(t,e)=>{var o;const{result:r,listItemId:s}=e,n=(o=t.listWithCount.data)==null?void 0:o.find(i=>i.id===s);return n.verificationProcess?n.verificationProcess.votes=r:n.likes=r,n}}},Oe=t=>({reset:()=>t,setItems:(e,r)=>{e.listWithCount={data:r.payload,totalCount:e.listWithCount.totalCount}}}),Ye=(t,e)=>{const r=K()[e];t.addCase(r.fetchListItems.pending,s=>{s.loading=!0,s.error=!1}).addCase(r.fetchListItems.fulfilled,(s,{payload:n})=>{var o,i,l;s.loading=!1,s.error=!1,((o=n==null?void 0:n.data)==null?void 0:o.length)!==0&&((l=(i=s==null?void 0:s.listWithCount)==null?void 0:i.data)==null||l.push(...n.data),s.listWithCount.totalCount=n.totalCount,s.paging.skip+=s.paging.take)}).addCase(r.fetchListItems.rejected,s=>{s.error=!0,s.loading=!1}).addCase(r.comment.fulfilled,(s,{payload:n})=>{var c,u,m;const{comment:o,listItemId:i}=n,l=(c=s.listWithCount.data)==null?void 0:c.find(h=>h.id===i);l.verificationProcess?(u=l.verificationProcess.discussion)==null||u.unshift(o):(m=l.comments)==null||m.unshift(o)}).addCase(r.deleteComment.fulfilled,(s,{payload:n})=>{var u,m,h,f;const{commentId:o,listItemId:i}=n,l=(u=s.listWithCount.data)==null?void 0:u.find(S=>S.id===i);let c=((h=(m=l.verificationProcess)==null?void 0:m.discussion)==null?void 0:h.find(S=>S.id===o))||((f=l.comments)==null?void 0:f.find(S=>S.id===o));c.text="",c.isDeleted=!0,c.author={id:"",userName:void 0},c.authorId=void 0}).addCase(r.editComment.fulfilled,(s,{payload:n})=>{var m,h,f,S;const{commentId:o,listItemId:i,newText:l}=n,c=(m=s.listWithCount.data)==null?void 0:m.find(v=>v.id===i);let u=((f=(h=c.verificationProcess)==null?void 0:h.discussion)==null?void 0:f.find(v=>v.id===o))||((S=c.comments)==null?void 0:S.find(v=>v.id===o));u.text=l}).addCase(r.likeComment.fulfilled,(s,{payload:n})=>{var m,h,f;const{result:o,subjectId:i,parentId:l}=n,c=(m=s.listWithCount.data)==null?void 0:m.find(S=>S.id===l);let u;c.verificationProcess?u=(h=c.verificationProcess.discussion)==null?void 0:h.find(S=>S.id===i):u=(f=c.comments)==null?void 0:f.find(S=>S.id===i),u.likes=o}).addCase(r.deleteListItem.fulfilled,(s,{payload:n})=>{s.listWithCount.data=s.listWithCount.data.filter(o=>o.id!==n.listItemId),s.listWithCount.totalCount--})},jt={listWithCount:{data:[],totalCount:0},paging:{take:5,skip:0},loading:!1,error:!1},Gt=W({name:"spots",initialState:jt,reducers:te({},Oe(jt)),extraReducers:t=>{Ye(t,g.SPOTS),t.addCase(xe.fulfilled,(e,r)=>{ze.like.fulfilled(e,{result:r.payload.result,listItemId:r.payload.subjectId})})}}),pe=Gt.actions;var Vn=Gt.reducer;const jn=Vt(g.SPOT_VIDEOS),Ke=He(g.SPOT_VIDEOS,X.SpotVideos),Bt={listWithCount:{data:[],totalCount:0},paging:{take:5,skip:0},loading:!1,error:!1},Wt=W({name:"spotVideo",initialState:Bt,reducers:dt(te({},Oe(Bt)),{prependVideo:(t,e)=>{t.listWithCount.data.unshift(e.payload)}}),extraReducers:t=>{Ye(t,g.SPOT_VIDEOS),t.addCase(Ke.fulfilled,(e,r)=>{ze.like.fulfilled(e,{result:r.payload.result,listItemId:r.payload.subjectId})})}}),Jt=Wt.actions;var Gn=Wt.reducer;const Ht=A("tempSpots/vote",async({tempSpotId:t,isReal:e,deletedVote:r},{getState:s,dispatch:n,rejectWithValue:o})=>{const i=s(),l=await x(n,i.auth.content,(c,u)=>r?c.delete_Vote(t,u):c.vote(t,u,{isReal:e}),"Error occured while voting, please try again later");return l.error?o(null):{result:l.content,tempSpotId:t}}),zt={listWithCount:{data:[],totalCount:0},paging:{take:5,skip:0},loading:!1,error:!1},Yt=W({name:"tempSpots",initialState:zt,reducers:te({},Oe(zt)),extraReducers:t=>{Ye(t,g.TEMP_SPOTS),t.addCase(Ht.fulfilled,(e,r)=>{var n;const s=ze.like.fulfilled(e,{listItemId:r.payload.tempSpotId,result:(n=r.payload.result)==null?void 0:n.votes});s.verificationProcess.isVerified=r.payload.result.verified})}}),Bn=Yt.actions;var Wn=Yt.reducer;const Ae=A("userProfile/getStats",async(t,{getState:e,dispatch:r,rejectWithValue:s})=>{const n=e(),o=await x(r,n.auth.content,(i,l)=>i.get_User_Stats(l),"Error occured while fetching stats.");return o.error?s(null):o.content});var Z;(function(t){t.SPOTS="Spots",t.SPOT_VIDEOS="SpotVideos"})(Z||(Z={}));const Kt={stats:{loading:!1,value:{spotStats:{addedCount:0,likedCount:0,commentedCount:0},spotVideoStats:{addedCount:0,likedCount:0,commentedCount:0}}},listItems:{interactionType:oe.Added,what:Z.SPOTS}},qt=W({name:"userProfile",initialState:Kt,reducers:{setInteractionType:(t,e)=>{t.listItems.interactionType=e.payload},setWhat:(t,e)=>{t.listItems.what=e.payload}},extraReducers:t=>{t.addCase(Ae.pending,e=>{e.stats.loading=!0}),t.addCase(Ae.fulfilled,(e,r)=>{e.stats.loading=!1,e.stats.value=r.payload}),t.addCase(Ae.rejected,e=>{e.stats.loading=!1,e.stats.value=Kt.stats.value})}}),Xt=qt.actions;var Jn=qt.reducer;const fe=A("mapSpots/getMarkersData",async(t,{getState:e,dispatch:r,rejectWithValue:s})=>{const n=e(),o=await x(r,n.auth.content,i=>{var l,c,u,m,h,f,S,v,w,b,P;return i.get_Perma_And_Temp_Spots_Marker_Data((m=(u=(c=(l=n.filtersState)==null?void 0:l.appliedFilter)==null?void 0:c.filter)==null?void 0:u.surfaceScore)==null?void 0:m.gtFiltering,(v=(S=(f=(h=n.filtersState)==null?void 0:h.appliedFilter)==null?void 0:f.filter)==null?void 0:S.surfaceScore)==null?void 0:v.score,(P=(b=(w=n.filtersState)==null?void 0:w.appliedFilter)==null?void 0:b.filter)==null?void 0:P.tags)});return o.error?s(null):o.content}),Pe=A("mapSpots/fetchSpot",async({markerData:t},{getState:e,dispatch:r,rejectWithValue:s})=>{const n=e(),o=t.isTempSpot?await x(r,n.auth.content,i=>i.get_Temp_Spot(t.id)):await x(r,n.auth.content,i=>i.get_Spot(t.name));return o.error?s(null):o.content}),Hn={loadingMarkers:!1,loadingSpotInModal:!1,currentSpotInModal:null,markersData:[],isSpotModalOpen:!1,isFilterModalOpen:!1},Qt=W({name:"mapSpots",initialState:Hn,reducers:{toggleSpotModal:(t,e)=>{t.isSpotModalOpen=e.payload},toggleFilterModal:(t,e)=>{t.isFilterModalOpen=e.payload}},extraReducers:t=>{t.addCase(fe.pending,e=>{e.loadingMarkers=!0}).addCase(fe.fulfilled,(e,r)=>{e.loadingMarkers=!1,e.markersData=r.payload}).addCase(fe.rejected,e=>{e.loadingMarkers=!1}).addCase(Pe.pending,e=>{e.currentSpotInModal=null,e.loadingSpotInModal=!0}).addCase(Pe.fulfilled,(e,r)=>{e.loadingSpotInModal=!1,e.currentSpotInModal=r.payload}).addCase(Pe.rejected,e=>{e.loadingSpotInModal=!1})}});var zn=Qt.reducer;const ee=Qt.actions,Yn=Mr({reducer:{auth:An,flashMsgs:xn,tempSpotsState:Wn,spotsState:Vn,spotVideosState:Gn,filtersState:Dn,mapSpotsState:zn,userProfileState:Jn},middleware:t=>t({serializableCheck:!1})}),Me=()=>_(),F=()=>y(t=>t),Kn=()=>{const[t,e]=M(""),[r,s]=M(""),n=J(),o=Me();return a(ut,{className:"mt-5",children:d(mt,{children:[d(re,{margin:"dense",children:[a(ne,{htmlFor:"email",children:"Email Address"}),a(se,{id:"email",value:t,onChange:e})]}),d(re,{margin:"dense",children:[a(ne,{htmlFor:"password",children:"Password"}),a(se,{type:"password",id:"password",value:r,onChange:s})]}),a(E,{onClick:()=>{o(Ne({loginData:{email:t,password:r},history:n}))},children:"Login"})]})})},qn=()=>{const t=_(),e=J();return p.exports.useEffect(()=>{t(At()),t(ae({message:"Logged out successfuly!",severity:"success",clearAtDate:new Date(Date.now()+5e3)})),e.push(C.HOME)},[]),a(N,{})},Xn=()=>{const[t,e]=M(""),[r,s]=M(""),[n,o]=M(""),[i,l]=M(""),c=J(),u=y(h=>h.auth),m=Me();return p.exports.useEffect(()=>{u.registerSuccess&&(m(ae({message:"Registration successful, you can login now",severity:"success"})),c.push(C.LOGIN))},[u.registerSuccess]),a(ut,{className:"mt-5",children:d(mt,{children:[d(re,{margin:"dense",children:[a(ne,{htmlFor:"email",children:"Email Address"}),a(se,{id:"email",value:t,onChange:e})]}),d(re,{margin:"dense",children:[a(ne,{htmlFor:"username",children:"Username"}),a(se,{id:"username",value:r,onChange:s})]}),d(re,{margin:"dense",children:[a(ne,{htmlFor:"password",children:"Password"}),a(se,{type:"password",id:"password",value:n,onChange:o})]}),d(re,{margin:"dense",children:[a(ne,{htmlFor:"repeat-password",children:"Repeat Password"}),a(se,{type:"password",id:"repeat-password",value:i,onChange:l})]}),a(Dr,{loading:u.registerLoading,onClick:()=>{m(ke({userName:r,password:n,confirmPassword:i,email:t}))},children:"Register"})]})})},Zt=()=>{p.exports.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[])};const Qn=()=>{const t=Rr(),[e,r]=p.exports.useState(null),[s,n]=p.exports.useState(!1);Zt(),p.exports.useEffect(()=>{(async()=>{var l;n(!0);let i=await Je(c=>c.get_Spot_And_Spot_Video_Stats(),void 0);n(!1),r((l=i.content)!=null?l:null)})()},[]);const o=i=>s?a(H,{size:20,color:"secondary"}):i!==0&&!i?"_":i;return d("div",{id:"main",className:"row m-0",children:[a("div",{className:"col d-flex align-items-center mt-5",children:a("img",{src:"./skate.png",alt:"skate-person"})}),a("div",{className:"col d-flex align-items-center",children:d("div",{children:[d("div",{className:"mb-5",children:[d("h1",{style:{color:t.palette.primary.main},children:[a(je,{id:"title-svg"}),"SkateSpot"]}),a("p",{children:"This website serves as a database of skateboarding spots from all around the world."})]}),a("div",{children:d("p",{children:[a(je,{className:"me-3"}),"View spots in form of list or map and add your own"]})}),a("div",{children:d("p",{children:[a(Lr,{className:"me-3"}),"Community spots verification system. Temp spots are verified based on number of likes and dislikes"]})}),a("div",{children:d("p",{children:[a(Ge,{className:"me-3"}),"Add videos from Instagram or YouTube to spots and see others' people clips"]})}),d("div",{id:"quick-actions",className:"mt-5",children:[a(U,{to:C.ADD_TEMP_SPOT,children:a(E,{className:"me-3",children:"Add Spot"})}),a(U,{to:C.MAP,children:a(E,{className:"me-3",children:"View on map"})}),a(U,{to:C.SPOTS,children:a(E,{className:"me-3",children:"View as a list"})})]}),d("div",{className:"mt-5",children:[a("p",{children:"Community currently added:"}),a("div",{style:{color:t.palette.secondary.main},className:"d-flex",children:!s&&!e?a("h3",{children:"Couldn't load the statistics"}):d(N,{children:[d("h3",{className:"me-4",children:[o(e==null?void 0:e.spotsCount)," Spots"]}),d("h3",{children:[o(e==null?void 0:e.spotVideosCount)," Spot Videos"]})]})})]})]})})]})},qe=()=>{const t=_();p.exports.useEffect(()=>(t($.clearFilters()),()=>{t($.clearFilters())}),[])},Zn=[{actions:Bn,listViewType:g.TEMP_SPOTS},{actions:pe,listViewType:g.SPOTS},{actions:Jt,listViewType:g.SPOT_VIDEOS}],De=()=>{let t={};return Zn.forEach(e=>{t[e.listViewType]={},Object.keys(Oe({})).forEach(r=>{t[e.listViewType][r]=e.actions[r]})}),t},er=(t,e,r)=>{const s=_(),n=y(o=>o.filtersState.appliedFilter,Be.isEqual);p.exports.useEffect(()=>{!t||e!==g.SPOTS&&n.sort.option===Y.VIDEOS||(s(De()[e].reset()),s(r?r():K()[e].fetchListItems()))},[n])},Xe=(t,e)=>{const r=D[e].getSpecificState(F()),s=_(),[n,o]=p.exports.useState(0),i=()=>{o(document.documentElement.scrollTop/(document.documentElement.scrollHeight-document.documentElement.clientHeight))};p.exports.useEffect(()=>(window.addEventListener("scroll",i),()=>{window.removeEventListener("scroll",i)}),[]),p.exports.useEffect(()=>{!r.loading&&r.listWithCount.data.length<r.listWithCount.totalCount&&n>=.8&&n<=1&&s(t())},[n])},es=t=>{const e=J(),r=_(),s=F();p.exports.useEffect(()=>{var o;r(pe.reset());const n=(o=e.location.state)==null?void 0:o.spot;return n&&n.videosCount?r(pe.setItems([n])):(async()=>{const i=await x(r,s.auth.content,(l,c)=>l.get_Spot(t));i.content&&r(pe.setItems([i.content]))})(),()=>{r(pe.reset())}},[])},ts=()=>{const t=_();return a(E,{onClick:e=>t($.applyFilters()),className:"me-2",variant:"contained",color:"primary",children:"Apply"})},rs=()=>{const t=_();return a(E,{onClick:e=>t($.clearFilters()),variant:"contained",color:"secondary",children:"Clear"})},Qe=()=>d("div",{className:"mt-3",children:[a(ts,{}),a(rs,{})]}),tr=({listViewType:t})=>{const e=y(s=>s.filtersState.filterInMaking.sort),r=_();return d("div",{className:"d-flex",children:[d(Fr,{style:{fontSize:"1rem"},className:"me-2",onChange:s=>r($.setSortingOption(s.target.value)),value:e.option,label:"Age",children:[a(Ie,{value:Y.CREATION_DATE,children:"Creation date"}),a(Ie,{value:Y.LIKES,children:"Likes"}),a(Ie,{value:Y.COMMENTS,children:"Comments"}),t===g.SPOTS&&a(Ie,{value:Y.VIDEOS,children:"Videos"})]}),d(E,{onClick:()=>r($.setSortAscending(!e.ascending)),children:[e.ascending?a(Ur,{}):a($r,{}),a(Vr,{})]})]})},ns=({listViewType:t})=>d("div",{className:"ms-3",children:[a(tr,{listViewType:t}),a(Qe,{})]}),ss=(t,e)=>{const[r,s,n]=M(""),o=_();return{comment:r,setComment:s,sendComment:()=>{!r||(o(e({listItemId:t,text:r})),n())}}},rr=({subjectId:t,parentId:e,likes:r,likeAction:s})=>{var u,m;const n=_(),o=F().auth,i=p.exports.useCallback(()=>r.reduce((h,f)=>h+Number(f.positive),0),[r]),l=()=>jr.first(r.filter(h=>{var f;return h.userId===((f=o==null?void 0:o.content)==null?void 0:f.id)})),c=async h=>{const f=l();let S=!1;f&&f.positive===h&&(S=!0),n(s({isPositive:h,deletedLike:S,subjectId:t,parentId:e}))};return[{highlited:((u=l())==null?void 0:u.positive)===!0,onClick:async()=>await c(!0),isPositive:!0,likesCount:i()},{highlited:((m=l())==null?void 0:m.positive)===!1,onClick:async()=>await c(!1),isPositive:!1,likesCount:r.length-i()}]},Re={fontSize:"1.2rem"},os=({likesCount:t,isPositive:e,onClick:r,highlited:s=!1})=>d("div",{style:{cursor:"pointer",color:"#e3e3e3"},onClick:async()=>await r(),className:"me-3",children:[d("span",{className:"me-0",children:[e?s?a(_e,{sx:Re}):a(Gr,{sx:Re}):s?a(ht,{sx:Re}):a(Br,{sx:Re})," "]}),a("span",{style:{color:"#dbd8d8",fontSize:"0.8rem"},className:"ms-0",children:t})]}),as=({commentId:t,likes:e,listItemId:r,likeAction:s})=>{const n=rr({subjectId:t,parentId:r,likes:e==null?void 0:e.map(o=>({positive:o.positive,userId:o.userId})),likeAction:s});return a("div",{className:"d-flex",children:n.map(o=>a(os,te({},o),o.isPositive.toString()))})},nr=({isTooltipOpen:t,setIsTooltipOpen:e,children:r})=>a(Wr,{onClickAway:()=>e(!1),children:a("div",{children:a(Jr,{PopperProps:{disablePortal:!0},onClose:()=>e(!1),open:t,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:a(N,{children:r}),children:a(Ce,{onClick:()=>{e(!t)},className:"ms-1 p-0",children:a(Hr,{style:{color:"#d2d2d2",fontSize:"1.1rem",cursor:"pointer"}})})})})}),is=t=>{const[e,r]=p.exports.useState(!1),s=_();return a(nr,{isTooltipOpen:e,setIsTooltipOpen:r,children:d("div",{children:[a(Ce,{onClick:()=>{r(!1),t.setIsEditingComment(!0)},className:"p-1 me-2",children:a(zr,{style:{cursor:"pointer",fontSize:"1.1rem"}})}),a(Ce,{onClick:()=>{s(t.deleteCommentAction({listItemId:t.listItemId,commentId:t.comment.id})),r(!1)},className:"p-1",children:a(pt,{style:{cursor:"pointer",fontSize:"1.1rem"}})})]})})},ls=t=>{const[e,r]=M(t.comment.text),s=_();return a("div",{children:d("div",{className:"d-flex align-items-end mb-3",children:[a(V,{color:"primary",className:"me-2 flex-grow-1",variant:"standard",multiline:!0,maxRows:4,value:e,onChange:r,onKeyDown:n=>{n.key==="Enter"}}),a(Yr,{className:"me-2",style:{cursor:"pointer"},color:e?"inherit":"disabled",onClick:()=>{t.setIsEditingComment(!1),e!==t.comment.text&&s(t.editCommentAction({listItemId:t.listItemId,commentId:t.comment.id,newText:e}))}}),a(Kr,{onClick:()=>{t.setIsEditingComment(!1)},style:{cursor:"pointer"}})]})})},cs=t=>{var n,o;const e=F().auth,[r,s]=p.exports.useState(!1);return d("div",{className:"mb-4",children:[d("div",{className:"mb-0 d-flex align-items-center",children:[a("b",{className:"me-1",children:(n=t.comment.author)==null?void 0:n.userName}),a("span",{style:{color:"#8d8d8d",fontSize:"0.8rem"},children:d("span",{children:[new Date(t.comment.createdAt).toDateString(),new Date(t.comment.editedAt).getFullYear()!==1&&a("span",{className:"ms-1",children:"[Edited]"})]})}),((o=e.content)==null?void 0:o.id)===t.comment.authorId&&a(is,{setIsEditingComment:s,comment:t.comment,listItemId:t.listItemId,deleteCommentAction:t.deleteCommentAction,editCommentAction:t.editCommentAction})]}),a("div",{className:"d-flex",children:r?a(ls,{comment:t.comment,listItemId:t.listItemId,editCommentAction:t.editCommentAction,setIsEditingComment:s}):a("p",{className:"mb-1",children:t.comment.text})}),a(as,{likeAction:t.likeAction,listItemId:t.listItemId,commentId:t.comment.id,likes:t.comment.likes||[]})]})},ds=()=>a("div",{className:"mb-4",style:{color:"#949494"},children:a("p",{className:"m-0",children:"[This comments has been deleted by user.]"})}),us=t=>{var n;const{comment:e,setComment:r,sendComment:s}=ss(t.listItemId,t.commentAction);return d("div",{className:"mt-4",children:[d("div",{className:"d-flex align-items-end mb-3",children:[a(V,{color:"primary",className:"me-2 flex-grow-1",variant:"standard",label:"Write something",multiline:!0,maxRows:4,value:e,onChange:r,onKeyDown:o=>{o.key==="Enter"&&s()}}),a(qr,{onClick:s,style:{cursor:"pointer"},color:e?"inherit":"disabled"})]}),(n=t.comments)==null?void 0:n.map(o=>o.isDeleted?a(ds,{},z()):a(cs,{deleteCommentAction:t.deleteCommentAction,editCommentAction:t.editCommentAction,listItemId:t.listItemId,comment:o,likeAction:t.likeAction},z()))]})},ie=t=>{const e=K()[t.listViewType];return a(us,{listItemId:t.listItemId,comments:t.comments,commentAction:e.comment,likeAction:e.likeComment,deleteCommentAction:e.deleteComment,editCommentAction:e.editComment})},le=({commentsCount:t,onClick:e})=>a("div",{children:d(E,{onClick:e,variant:"outlined",size:"small",className:"me-1",children:[a(Xr,{className:"me-1"}),a("span",{children:t||"0"})]})});function ms({likesCount:t,isPositive:e,onClick:r,highlited:s=!1}){return d(E,{onClick:async()=>await r(),size:"small",variant:s?"contained":"outlined",color:e?"success":"warning",className:"me-1",children:[e?a(_e,{}):a(ht,{})," ",a("span",{className:"ms-1",children:t})]})}function ce({likes:t,listItemId:e,likeAction:r}){const s=rr({subjectId:e,parentId:e,likes:t,likeAction:r});return a("div",{children:s.map(n=>a(ms,te({},n),n.isPositive.toString()))})}const sr=t=>{const e=y(o=>o.auth.content),r=_(),[s,n]=p.exports.useState(!1);return t.authorId===(e==null?void 0:e.id)?a(nr,{isTooltipOpen:s,setIsTooltipOpen:n,children:a("div",{children:a(Ce,{onClick:()=>{r(K()[t.listViewType].deleteListItem({listItemId:t.listItemId,deleteFunc:t.deleteFunc})),n(!1)},className:"p-1",children:a(pt,{style:{cursor:"pointer",fontSize:"1.1rem"}})})})}):a(N,{})};function Se({author:t}){return d("div",{style:{marginLeft:"auto"},children:[a(Qr,{})," ",t==null?void 0:t.userName]})}const Ze=t=>a("iframe",{title:"Instagram video",src:`https://www.instagram.com/p/${t.videoId}/embed`,width:"400",height:"480",frameBorder:"0",scrolling:"no"}),et=t=>a("iframe",{width:"560",height:"315",src:`https://www.youtube.com/embed/${t.videoId}`,title:"YouTube video player",frameBorder:0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),hs=q.memo(({spotVideo:t})=>{var s;const[e,r]=p.exports.useState(!1);return d("div",{className:"mb-4",children:[d("div",{className:"d-flex justify-content-between",children:[t.platformType===Q.Instagram?a(Ze,{videoId:t.embedId}):a(et,{videoId:t.embedId}),a(sr,{authorId:t.author.id,listItemId:t.id,listViewType:g.SPOT_VIDEOS,deleteFunc:(n,o)=>n.delete_Spot_Video(t.id,o)})]}),a("p",{children:t.description}),d("div",{className:"d-flex mt-2",children:[a(ce,{listItemId:t.id,likes:t.likes,likeAction:Ke}),a(le,{onClick:()=>r(!e),commentsCount:((s=t==null?void 0:t.comments)==null?void 0:s.length)||0}),a(Se,{author:t.author})]}),e&&a("div",{className:"row col-4",children:ie({listItemId:t.id,comments:t.comments,listViewType:g.SPOT_VIDEOS})}),a("hr",{})]})},(t,e)=>JSON.stringify({likes:t.spotVideo.likes,comments:t.spotVideo.comments})===JSON.stringify({likes:e.spotVideo.likes,comments:e.spotVideo.comments})),ps={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,cursor:"default"},or=t=>a(Zr,{style:{cursor:"pointer"},open:t.isOpen,onClose:()=>t.setIsOpen(!1),children:a(en,{sx:ps,children:t.children})}),ar=({fontSize:t="1rem",color:e,className:r,children:s})=>a("i",{className:`fa fa-map-marker ${r}`,style:{fontSize:t,color:e},children:s}),ge=({position:t,size:e=30,color:r="rgb(0,50,255)",text:s,flyToMarkerZoom:n=null,animateFly:o=!0,onMouseEnter:i,onMouseLeave:l,onClick:c,children:u})=>{const m=Te();return p.exports.useEffect(()=>{n!=null&&(o?m.flyTo(t,n):m.setView(t,n))},[t]),a(tn,{eventHandlers:{mouseover:h=>i&&i(h),mouseout:h=>l&&l(h),click:h=>c&&c(h)},position:t,icon:new ft.exports.DivIcon({html:St.exports.renderToStaticMarkup(a(ar,{fontSize:e.toString()+"px",color:r,children:s})),iconSize:[e/1.75,e],iconAnchor:[e/1.75/2,e]}),children:u})},tt=({children:t,whenReady:e,style:r=null})=>d(rn,{style:r||{height:600},center:{lat:12.12,lng:12.12},zoom:2,whenReady:()=>e&&e(),children:[a(nn,{attribution:'\xA9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t]}),fs=({address:t})=>d("div",{children:[a(tt,{children:a(ge,{flyToMarkerZoom:16,animateFly:!1,position:t.coords})}),d("p",{children:[t.country," ",t.city," ",t.streetName&&","," ",t.streetName," ",t.streetName&&t.streetNumber]})]}),Le=t=>a(or,{isOpen:t.isMapModalOpen,setIsOpen:t.setIsMapModalOpen,children:a(fs,{address:t.address})}),Ss=({setIsOpen:t,disabled:e,children:r})=>a("div",{children:a(E,{disabled:e!=null?e:!1,onClick:()=>t(!0),size:"small",variant:"outlined",children:r})}),Fe=t=>a(Ss,{disabled:t.disabled,setIsOpen:t.setIsMapModalOpen,children:a(gt,{})});function de({obstacles:t,style:e}){return a("div",{style:{fontSize:"0.2rem"},children:t==null?void 0:t.map(r=>a(sn,{style:e,label:r,variant:"outlined",className:"me-1"},z()))})}const Ue=({images:t,height:e=600,width:r=800})=>t&&t.length?a("div",{children:a(on,{showThumbnails:!1,showPlayButton:!1,items:t.map(s=>({original:s.base64,originalWidth:r,originalHeight:e}))})}):a("div",{children:"No images were added for this spot."});function ue({surfaceScore:t,style:e}){return a("div",{className:"me-1",children:a(vt,{style:e,variant:"outlined",label:`${t}/10`,icon:a(an,{style:{color:(e==null?void 0:e.color)||"inherit"}})})})}const gs=t=>{const[e,r,s]=M(""),[n,o,i]=M(""),[l,c]=p.exports.useState(null),u=_(),m=F(),[h,f]=p.exports.useState(!1),S=()=>{c(null);let T="";try{e.indexOf("youtube")!==-1?(T=v(e),T&&c({type:Q.YouTube,id:T})):e.indexOf("instagram")!==-1&&(T=w(e),T&&c({type:Q.Instagram,id:T}))}catch{b()}finally{T||b()}},v=T=>{let O=T.slice(T.indexOf("?v=")+3);return O.indexOf("/")!==-1&&(O=O.slice(0,O.indexOf("/"))),O},w=T=>{let O=T.slice(T.indexOf("/p/")+3);return O.indexOf("/")!==-1&&(O=O.slice(0,O.indexOf("/"))),O},b=()=>{u(ae({message:"The url is invalid.",severity:"warning"}))},P=async()=>{f(!0);const T=await x(u,m.auth.content,(O,B)=>O.add_Spot_Video(t.spotName,B,{description:n,embedId:l.id,platformType:l.type}));return f(!1),{resContent:T.content}},G=async()=>{const{resContent:T}=await P();!T||(u(Jt.prependVideo(T)),s(),i(),c(null),t.setIsOpen(!1))};return a(or,{isOpen:t.isOpen,setIsOpen:t.setIsOpen,children:d("div",{children:[d("div",{className:"d-flex",children:[a("div",{className:"col-5 me-2",children:a(V,{value:e,onChange:r,fullWidth:!0,label:"Copy and paste link to a Instagram or YouTube video ",variant:"standard"})}),a(E,{onClick:S,size:"small",variant:"contained",children:"Load"})]}),l&&d("div",{className:"mt-4",style:{fontSize:"1.10rem"},children:[a("p",{children:"This is the preview of the video. If you can see it you are good to go otherwise please insert correct link."}),l.type===Q.Instagram?a(Ze,{videoId:l.id}):a(et,{videoId:l.id}),a("div",{className:"col-5 mt-2 mb-3",children:a(V,{value:n,onChange:o,rows:3,multiline:!0,fullWidth:!0,variant:"standard",label:"Description"})})]}),d("div",{className:"mt-2",children:[a(E,{disabled:!l,className:"me-2",color:"primary",variant:"contained",onClick:async()=>{await G()},children:h?a(H,{}):"Submit"}),a(E,{onClick:()=>{c(null),s(),i(),t.setIsOpen(!1)},color:"warning",variant:"contained",children:"Cancel"})]})]})})},vs=t=>a("div",{className:"me-1",children:a(It,{size:"small",onClick:()=>t.setIsAddSpotVideoModalOpen(!0),variant:"outlined",children:a(ln,{})})}),Is=q.memo(({spot:t})=>{var l;const[e,r]=p.exports.useState(!1),[s,n]=p.exports.useState(!1),[o,i]=p.exports.useState(!1);return d("div",{className:"mb-4",children:[a("h4",{children:t.name}),a("p",{children:t.description}),a(Ue,{images:t.images}),d("div",{className:"d-flex mt-2",children:[a(ce,{listItemId:t.id,likes:t.likes,likeAction:xe}),a(le,{onClick:()=>n(!s),commentsCount:((l=t==null?void 0:t.comments)==null?void 0:l.length)||0}),a(vs,{setIsAddSpotVideoModalOpen:i}),a(Fe,{setIsMapModalOpen:r}),d("div",{className:"ms-3 d-flex",children:[a(ue,{surfaceScore:t.surfaceScore}),a(de,{obstacles:t.obstacles})]}),a(Se,{author:t.author})]}),s&&a("div",{className:"row col-4",children:ie({listItemId:t.id,comments:t.comments,listViewType:g.SPOTS})}),a("hr",{}),a(Le,{isMapModalOpen:e,setIsMapModalOpen:r,address:t.address}),a(gs,{isOpen:o,setIsOpen:i,spotName:t.name})]})},(t,e)=>JSON.stringify({likes:t.spot.likes,comments:t.spot.comments})===JSON.stringify({likes:e.spot.likes,comments:e.spot.comments})),_s=()=>{var u,m,h;const t=F(),e=_(),r=y(f=>f.filtersState.appliedFilter.sort,Be.isEqual),n=J().location.pathname.split("/"),o=C.SPOTS.replace("/",""),i=n[n.indexOf(o)+1];es(i);const l=(u=t.spotsState.listWithCount.data)==null?void 0:u[0],c=()=>jn({fetchFunc:(f,S,v)=>f.get_Spot_Videos_Of_Spot(i,S,v,r.option,r.ascending,void 0)});return p.exports.useEffect(()=>()=>{e(De().spotVideos.reset())},[]),Xe(c,g.SPOT_VIDEOS),qe(),er(!0,g.SPOT_VIDEOS,c),d("div",{className:"mt-5",style:{fontSize:"1rem"},children:[d("div",{className:"row mt-5 mx-0",children:[a("div",{className:"col-3"}),a("div",{className:"col-6",children:l&&a(Is,{spot:l})})]}),d("div",{className:"row mx-0",children:[a("div",{className:"col-2",children:a(ns,{listViewType:g.SPOT_VIDEOS})}),a("div",{className:"col-1"}),d("div",{className:"col-6",children:[a("h4",{className:"mb-5",children:"Videos"}),(h=(m=t.spotVideosState.listWithCount)==null?void 0:m.data)==null?void 0:h.map(f=>a(hs,{spotVideo:f},f.createdAt)),t.spotVideosState.loading&&a(H,{color:"secondary"})]})]})]})},ir=()=>{const t=y(o=>o.filtersState.filterInMaking.filter.surfaceScore),e=_(),[r,s]=p.exports.useState(t.score),n=o=>{o>10?o=10:o<1&&(o=1),e($.setSurfaceScore(o)),s(o)};return d("div",{className:"mt-4",children:[a("p",{className:"m-0",children:"Surface score"}),d("div",{className:"d-flex align-items-center",children:[a(cn,{onChange:()=>e($.toggleSurfaceScore()),checked:t.enabled}),a(E,{disabled:!t.enabled,className:"py-0",onClick:()=>e($.toggleSurfaceScoreGt()),style:{fontSize:"1.2rem"},children:t.gtFiltering?"\u2265":"<"}),a(_t,{disabled:!t.enabled,min:1,max:10,onChangeCommitted:o=>n(r),onChange:(o,i)=>s(i),value:r}),a(V,{disabled:!t.enabled,variant:"standard",className:"ms-3",value:r,size:"small",onChange:o=>n(Number(o.target.value)),type:"number",InputProps:{inputProps:{max:10,min:1}}})]})]})},lr=()=>{const t=y(r=>r.filtersState.filterInMaking.filter.tags.tags),e=_();return d("div",{className:"mt-4",children:[a("p",{className:"m-0",children:"Tags"}),a(Lt,{tags:t,setTags:r=>{e($.setTags(r))}})]})},Cs=({listViewType:t})=>d("div",{className:"ms-3",children:[a(tr,{listViewType:t}),a(ir,{}),a(lr,{}),a(Qe,{})]}),cr=t=>{t.history.push(C.SPOT_DEDICATED_PAGE.replace($e.SPOT_NAME,t.spot.name),{spot:t.spot})},dr=t=>a("div",{children:d(It,{onClick:t.onClick,variant:"outlined",size:"small",className:"me-1",children:[a(Ge,{className:"me-1"}),a("span",{children:t.videosCount||"0"})]})}),rt=({spotName:t})=>a(U,{style:{textDecoration:"none",color:"#9abeff"},to:C.SPOT_DEDICATED_PAGE.replace($e.SPOT_NAME,t),children:a("h4",{children:t})}),nt=t=>d("div",{className:"d-flex mb-1 justify-content-between",children:[t.children,a(sr,{authorId:t.authorId,listItemId:t.listItemId,listViewType:t.listViewType,deleteFunc:t.deleteFunc})]}),ur=q.memo(({spot:t})=>{var i;const[e,r]=p.exports.useState(!1),[s,n]=p.exports.useState(!1),o=J();return d("div",{className:"mb-4",children:[a(nt,{authorId:t.author.id,listItemId:t.id,listViewType:g.SPOTS,deleteFunc:(l,c)=>l.delete_Spot(t.id,c),children:a(rt,{spotName:t.name})}),a("p",{children:t.description}),a(Ue,{images:t.images}),d("div",{className:"d-flex mt-2",children:[a(ce,{listItemId:t.id,likes:t.likes,likeAction:xe}),a(le,{onClick:()=>n(!s),commentsCount:((i=t==null?void 0:t.comments)==null?void 0:i.length)||0}),a(dr,{videosCount:t.videosCount,onClick:()=>cr({history:o,spot:t})}),a(Fe,{setIsMapModalOpen:r}),d("div",{className:"ms-3 d-flex",children:[a(ue,{surfaceScore:t.surfaceScore}),a(de,{obstacles:t.obstacles})]}),a(Se,{author:t.author})]}),s&&a("div",{className:"row col-4",children:ie({listItemId:t.id,comments:t.comments,listViewType:g.SPOTS})}),a("hr",{}),a(Le,{isMapModalOpen:e,setIsMapModalOpen:r,address:t.address})]})},(t,e)=>JSON.stringify({likes:t.spot.likes,comments:t.spot.comments})===JSON.stringify({likes:e.spot.likes,comments:e.spot.comments})),mr=q.memo(({spotVideo:t})=>{var o,i;const[e,r]=p.exports.useState(!1),[s,n]=p.exports.useState(!1);return d("div",{className:"mb-4",children:[a(nt,{authorId:t.author.id,listItemId:t.id,listViewType:g.SPOT_VIDEOS,deleteFunc:(l,c)=>l.delete_Spot_Video(t.id,c),children:t.spot?a(rt,{spotName:(o=t==null?void 0:t.spot)==null?void 0:o.name}):a("h4",{style:{color:"rgb(148,148,148)"},children:"[Spot deleted]"})}),t.platformType===Q.Instagram?a(Ze,{videoId:t.embedId}):a(et,{videoId:t.embedId}),a("p",{children:t.description}),d("div",{className:"d-flex mt-2",children:[a(ce,{listItemId:t.id,likes:t.likes,likeAction:Ke}),a(le,{onClick:()=>n(!s),commentsCount:((i=t==null?void 0:t.comments)==null?void 0:i.length)||0}),a(Fe,{disabled:!t.spot,setIsMapModalOpen:r}),t.spot&&d("div",{className:"ms-3 d-flex",children:[a(ue,{surfaceScore:t.spot.surfaceScore}),a(de,{obstacles:t.spot.obstacles})]}),a(Se,{author:t.author})]}),s&&a("div",{className:"row col-4",children:ie({listItemId:t.id,comments:t.comments,listViewType:g.SPOT_VIDEOS})}),a("hr",{}),t.spot&&a(Le,{isMapModalOpen:e,setIsMapModalOpen:r,address:t.spot.address})]})},(t,e)=>JSON.stringify({likes:t.spotVideo.likes,comments:t.spotVideo.comments})===JSON.stringify({likes:e.spotVideo.likes,comments:e.spotVideo.comments})),hr=({isPositive:t,deletedLike:e,subjectId:r})=>Ht({tempSpotId:r,isReal:t,deletedVote:e}),Ts=q.memo(({tempSpot:t})=>{var o,i;const[e,r]=p.exports.useState(!1),[s,n]=p.exports.useState(!1);return d("div",{className:"mb-4",children:[a(nt,{authorId:t.author.id,listItemId:t.id,listViewType:g.TEMP_SPOTS,deleteFunc:(l,c)=>l.delete_Temp_Spot(t.id,c),children:a("h4",{children:t.name})}),a("p",{children:t.description}),a(Ue,{images:t.images}),d("div",{className:"d-flex mt-2",children:[a(ce,{listItemId:t.id,likes:t.verificationProcess.votes.map(l=>({userId:l.voterId,positive:l.isReal})),likeAction:hr}),a(le,{onClick:()=>n(!s),commentsCount:(i=(o=t.verificationProcess)==null?void 0:o.discussion)==null?void 0:i.length}),a(Fe,{setIsMapModalOpen:r}),d("div",{className:"ms-3 d-flex",children:[a(ue,{surfaceScore:t.surfaceScore}),a(de,{obstacles:t.obstacles})]}),a(Se,{author:t.author})]}),s&&a("div",{className:"row col-4",children:ie({listItemId:t.id,comments:t.verificationProcess.discussion,listViewType:g.TEMP_SPOTS})}),a("hr",{}),a(Le,{isMapModalOpen:e,setIsMapModalOpen:r,address:t.address})]})},(t,e)=>JSON.stringify(t.tempSpot.verificationProcess)===JSON.stringify(e.tempSpot.verificationProcess)),st=({listViewType:t})=>{const e=_(),[r,s]=p.exports.useState(!1);p.exports.useEffect(()=>{s(!0),e(K()[t].fetchListItems())},[]),Xe(K()[t].fetchListItems,t),qe(),er(r,t);const n=y(i=>i[t+"State"]),o=i=>{switch(t){case g.SPOTS:return a(ur,{spot:i},i.id);case g.SPOT_VIDEOS:return a(mr,{spotVideo:i},i.id);case g.TEMP_SPOTS:return a(Ts,{tempSpot:i},i.id)}};return a(N,{children:d("div",{className:"row m-0 mt-5",style:{fontSize:"1rem"},children:[a("div",{className:"col-2",children:a("div",{className:"col-2",style:{position:"fixed"},children:a(Cs,{listViewType:t})})}),a("div",{className:"col-1"}),d("div",{className:"col-6",children:[!n.loading&&!n.error&&n.listWithCount.data.length===0&&a("p",{children:"There is nothing to view here \u{1F625}"}),n.listWithCount.data.map(i=>o(i)),n.loading&&a(H,{color:"secondary"})]})]})})},Es=t=>{const e=y(r=>r.filtersState.appliedFilter,Be.isEqual);p.exports.useEffect(()=>{t()},[e])},j={tempSpot:{color:"#ff640a",name:"Temp Spot"},spot:{color:"#00b360",name:"Spot"},selected:{color:"#1f4eb9",name:"Selected"}},ys=({displaySelectedMarkerLegend:t,map:e})=>{p.exports.useEffect(()=>{const r=new ft.exports.Control({position:"bottomleft"});r.onAdd=()=>{const s=Ct.DomUtil.create("div");return s.innerHTML=St.exports.renderToStaticMarkup(a("div",{className:"p-1",style:{background:"rgba(255,255,255, 0.5)",color:"black",marginBottom:"5rem"},children:a("ul",{className:"p-0 m-0",style:{listStyleType:"none"},children:Object.keys(j).filter(n=>!(n==="selected"&&!t)).map(n=>d("li",{className:"mb-1",children:[a(ar,{className:"me-1",fontSize:"1.5rem",color:j[n].color}),a("span",{children:j[n].name})]},n))})})),s},e.addControl(r)},[])},pr=t=>a(ge,{color:t.color?t.color:t.spotMarkerData.isTempSpot?j.tempSpot.color:j.spot.color,position:t.spotMarkerData.address.coords,onClick:t.onClick,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,size:t.size,children:t.children}),fr=({displaySelectedMarkerLegend:t=!1})=>(ys({displaySelectedMarkerLegend:t,map:Te()}),a(N,{})),ws=({ref:t})=>{const e=Te();p.exports.useEffect(()=>{if(!!t.current)return Ct.DomEvent.disableScrollPropagation(t.current),t.current.onmouseenter=r=>e.dragging.disable(),t.current.onmouseleave=r=>e.dragging.enable(),()=>{e.dragging.enable()}},[t])},Sr=({outsideOfIds:t,funcToExecute:e})=>{Tt({click(r){r.originalEvent.path.map(s=>s.id).some(s=>t.indexOf(s)!==-1)||e(r)}})},gr=({hide:t,style:e,children:r,className:s})=>{var o;const n=p.exports.useRef(null);return ws({ref:n}),Sr({outsideOfIds:t?[t.mainContainerId,...t.dontHideOnIds]:[],funcToExecute:t?i=>t.funcToHide(i):()=>{}}),a("div",{style:e,ref:n,id:(o=t==null?void 0:t.mainContainerId)!=null?o:z(),className:"on-top-of-map "+(s!=null?s:""),children:r})},ot="filter-btn",bs=()=>{const t=_(),e=y(r=>r.mapSpotsState.isFilterModalOpen);return a(Ee,{onClick:r=>{t(ee.toggleFilterModal(!e))},className:"on-top-of-map ms-2",id:ot,children:a(dn,{})})},at="filters-modal",Ns=()=>{const t=_();return Sr({outsideOfIds:[at,ot,vr],funcToExecute:e=>{t(ee.toggleFilterModal(!1))}}),d("div",{className:"pt-2 pb-4 px-4 mt-2",id:at,children:[a("div",{className:"d-flex justify-content-end",children:a(Ee,{onClick:e=>t(ee.toggleFilterModal(!1)),className:"m-0 p-0",children:a(Et,{})})}),a(ir,{}),a(lr,{}),a(Qe,{})]})},ks=({marker:t})=>a(un,{className:"leaflet-tooltip",direction:"top",offset:[0,-30],children:d("div",{style:{color:"white"},children:[a("p",{children:t.name}),d("div",{className:"d-flex",children:[a(ue,{style:{fontSize:"0.7rem"},surfaceScore:t.surfaceScore}),a(de,{style:{fontSize:"0.7rem",padding:0},obstacles:t.obstacles})]})]})}),xs=t=>{var e;return{address:t.address,author:t.author,comments:t.verificationProcess.discussion,createdAt:t.createdAt,description:t.description,id:t.id,images:t.images,likes:(e=t.verificationProcess.votes)==null?void 0:e.map(r=>({positive:r.isReal,userId:r.voterId})),name:t.name,obstacles:t.obstacles,surfaceScore:t.surfaceScore,videosCount:0}};const Os=()=>{var f;const t=_(),[e,r]=mn(),s=p.exports.useRef(null),[n,o]=p.exports.useState(!1),i=y(S=>S.mapSpotsState),l=y(S=>{var v;return(v=S.spotsState.listWithCount.data)==null?void 0:v[0]}),c=y(S=>{var v;return(v=S.tempSpotsState.listWithCount.data)==null?void 0:v[0]});p.exports.useEffect(()=>{s.current&&e(s.current)},[s]);const u=J(),m=i.currentSpotInModal?!!i.currentSpotInModal.verificationProcess:!1,h=l||c?m?xs(c):l:null;return p.exports.useEffect(()=>{const S=De()[m?g.TEMP_SPOTS:g.SPOTS];return i.currentSpotInModal&&t(S.setItems([i.currentSpotInModal])),()=>{t(S.reset())}},[i.currentSpotInModal]),d(N,{children:[i.loadingSpotInModal&&a(H,{size:72,className:"align-self-center",style:{marginTop:"auto",marginBottom:"auto"}}),h&&!i.loadingSpotInModal&&d("div",{style:{position:"relative"},children:[h.images&&h.images.length>0&&a("div",{style:{backgroundColor:"black"},children:a(Ue,{images:h.images,height:300,width:r.width})}),d("div",{className:`${h.images&&h.images.length?"mt-3":"mt-5"} ms-3`,children:[a(rt,{spotName:h.name}),a("p",{children:h.description}),d("div",{className:"d-flex mt-5 mb-3",children:[a(ue,{surfaceScore:h.surfaceScore}),a(de,{obstacles:h.obstacles})]}),d("div",{className:"d-flex",children:[a(ce,{likes:h.likes,listItemId:h.id,likeAction:m?hr:xe}),a(le,{onClick:()=>o(!n),commentsCount:(f=h.comments)==null?void 0:f.length}),!m&&a(dr,{videosCount:h.videosCount,onClick:()=>cr({history:u,spot:h})})]}),n&&ie({listItemId:h.id,comments:h.comments,listViewType:m?g.TEMP_SPOTS:g.SPOTS})]}),a("div",{style:{position:"absolute",left:0,top:0},children:a(Ee,{onClick:S=>t(ee.toggleSpotModal(!1)),className:"mt-2 ms-2 p-0",children:a(Et,{})})})]})]})},vr="spot-preview-modal",As=()=>{const t=_(),e=y(o=>o.mapSpotsState),[r,s]=p.exports.useState(z());qe(),Es(()=>t(fe())),Zt(),p.exports.useEffect(()=>{s(z())},[e.markersData.length]);const n=o=>{var i;return((i=e.currentSpotInModal)==null?void 0:i.name)==o&&e.isSpotModalOpen};return a("div",{style:{height:"100%",position:"relative"},children:d(tt,{style:{height:"100%"},children:[d(gr,{className:"col-2",style:{backgroundColor:"transparent",top:"15%"},children:[a(bs,{}),e.isFilterModalOpen&&a(Ns,{})]}),e.isSpotModalOpen&&a(gr,{className:"col-12 col-md-5 col-lg-4 d-flex flex-column",hide:{mainContainerId:vr,dontHideOnIds:[ot,at],funcToHide:()=>t(ee.toggleSpotModal(!1))},children:a(Os,{})}),a(yt,{showCoverageOnHover:!1,children:e.markersData.length&&e.markersData.map(o=>a(pr,{spotMarkerData:o,color:n(o.name)?j.selected.color:void 0,size:n(o.name)?35:void 0,onClick:()=>{var i;((i=e.currentSpotInModal)==null?void 0:i.id)===o.id&&e.isSpotModalOpen?t(ee.toggleSpotModal(!1)):(t(Pe({markerData:o})),t(ee.toggleSpotModal(!0)))},children:a(ks,{marker:o})},o.id))},r),a(fr,{displaySelectedMarkerLegend:!0})]})})},Ps=async(t,e,r,s,n,o,i)=>await(async()=>{var u,m,h,f,S;let c={name:e,description:r,address:(s==null?void 0:s.coords)?{streetName:(u=s==null?void 0:s.address)==null?void 0:u.streetName,streetNumber:(m=s==null?void 0:s.address)==null?void 0:m.streetNumber,postCode:(h=s==null?void 0:s.address)==null?void 0:h.postCode,city:(f=s==null?void 0:s.address)==null?void 0:f.city,country:(S=s==null?void 0:s.address)==null?void 0:S.country,coords:s==null?void 0:s.coords}:void 0,surfaceScore:n,obstacles:o.filter(v=>v.isSelected).map(v=>R[v.obstacleType]),base64Images:t};return await Je((v,w)=>v.create_Spot(w,c),i.content)})(),Ms=t=>d("div",{children:[d("p",{children:[t.country," ",t.city]}),d("p",{children:[t.streetName," ",t.streetName&&t.streetNumber]})]}),Ds=({children:t,displaySelectedMarkerLegend:e=!1})=>{const r=_(),s=y(n=>n.mapSpotsState.markersData);return p.exports.useEffect(()=>{r(fe())},[]),a("div",{children:d(tt,{children:[a(yt,{showCoverageOnHover:!1,children:s.length&&s.map(n=>a(pr,{spotMarkerData:n,children:d(hn,{children:[a("b",{children:n.name}),Ms(n.address)]})},n.name))}),t,a(fr,{displaySelectedMarkerLegend:e})]})})},Ir=t=>({city:t.address.city||t.address.town||t.address.village,country:t.address.country,postCode:t.address.postcode,streetName:t.address.road,streetNumber:t.address.house_number,display:t.display_name});class ve{constructor(e,r){L(this,"coords");L(this,"address");this.coords=e,this.address=r}getKey(e){return`${this.coords.lat}${this.coords.lng}-${e}`}toString(){var e,r;return(r=(e=this.address)==null?void 0:e.display)!=null?r:""}static FromGeocode(e){return new ve({lat:e.lat,lng:e.lon},Ir(e))}}const Rs=async t=>{const e=`https://nominatim.openstreetmap.org/reverse?lat=${t.lat}&lon=${t.lng}&format=json`;let r;try{const n=await(await fetch(e)).json();n.address&&(r=Ir(n))}catch(s){console.log(s)}finally{return new ve(t,r)}},Ls=({setLocation:t,showClickMarker:e,setShowClickMarker:r})=>{const[s,n]=p.exports.useState(null);return Tt({click(o){n(o.latlng),r(!0),Rs(o.latlng).then(i=>{t(i)})}}),s&&e?a(ge,{color:j.selected.color,position:s}):null},Fs=({setGeocodeLocations:t,setLocation:e,setShowClickMarker:r,setShowMore:s})=>{const[n,o]=M("");_();const i=async()=>{if(s(!1),!n)return;const l=await fetch(`https://nominatim.openstreetmap.org/search?q=
        ${encodeURIComponent(n)}&format=json&addressdetails=1`);if(l.status!==200)return;const c=await l.json()||[];t(c.map(u=>ve.FromGeocode(u))),e(c.length>0?ve.FromGeocode(c[0]):null),r(!1)};return d(N,{children:[a("div",{children:"Search by address"}),d("div",{className:"d-flex mb-2 align-items-end",children:[a(V,{className:"me-1",value:n,onChange:o,type:"text",label:"Address",variant:"standard",onKeyDown:l=>{l.key==="Enter"&&i()}}),a(E,{style:{height:"100%"},size:"small",variant:"contained",className:"px-2 py-2",onClick:i,children:"Search"})]})]})},Us=t=>{let e=[[91,91],[-91,-91]];return t.forEach(r=>{r.coords.lat<e[0][0]&&(e[0][0]=r.coords.lat),r.coords.lat>e[1][0]&&(e[1][0]=r.coords.lat),r.coords.lng<e[0][1]&&(e[0][1]=r.coords.lng),r.coords.lng>e[1][1]&&(e[1][1]=r.coords.lng)}),e},$s=({showMore:t,fromGeocodeLocations:e,setHoveredAddress:r,hoveredAddress:s,pickAddress:n,location:o})=>{const i=Te();return p.exports.useEffect(()=>{t&&e&&i.fitBounds(Us(e),{animate:!0,duration:1.5,padding:[4,4]})},[t,e]),a("div",{children:(()=>t?e==null?void 0:e.map((c,u)=>a(ge,{size:s===u?40:30,text:`${(u+1).toString()}`,color:j.selected.color,position:c.coords,onMouseEnter:h=>r(u),onMouseLeave:h=>r(null),onClick:h=>n(u)},c.getKey(u))):a(ge,{color:j.selected.color,position:o.coords,flyToMarkerZoom:12}))()})},it=(t,e)=>{const[r,s]=p.exports.useState("");return p.exports.useEffect(()=>{const o=t();if(s(o),o){const i=setTimeout(()=>s(""),1e4);return()=>clearTimeout(i)}},e),()=>{if(r)return a("p",{className:"text-danger text-sm",children:r})}},Vs=({fromGeocodeLocations:t,showMore:e,setShowMore:r,hoveredAddress:s,setHoveredAddress:n,location:o,pickAddress:i})=>{const l=it(()=>o?"":"No address found",[o]),c=m=>{const h=Number(m.currentTarget.innerText.substr(0,m.currentTarget.innerText.indexOf(".")))-1;n(h)};return a("div",{children:(()=>o?e?t.map((m,h)=>a("div",{children:a(E,{style:s===h?{backgroundColor:"#363636"}:void 0,onClick:f=>i(h),onMouseEnter:c,onMouseLeave:()=>n(null),children:`${h+1}. ${m.toString()}`})},m.getKey(h))):d("div",{children:[a("span",{children:o.toString()}),a(E,{onClick:()=>r(!0),children:"Show more"})]}):l())()})},js=(t,e)=>{const[r,s]=p.exports.useState("");return p.exports.useEffect(()=>{const o=t();s(o)},e),()=>{if(r)return a("p",{className:"text-info text-sm",children:r})}},Gs=({location:t})=>{const e=js(()=>(t==null?void 0:t.address)?"":"No address found but location of spot has been saved",[t]);return a("div",{children:(()=>(t==null?void 0:t.address)?a("p",{className:"text-sm",children:t.toString()}):e())()})},Bs=({location:t,setLocation:e})=>{const[r,s]=p.exports.useState(null),[n,o]=p.exports.useState(!0),[i,l]=p.exports.useState(!1),[c,u]=p.exports.useState(null),m=h=>{l(!1),e(r[h])};return d(N,{children:[a("p",{children:"Select spot on map"}),d(Ds,{displaySelectedMarkerLegend:!0,children:[a(Ls,{showClickMarker:n,setShowClickMarker:o,setLocation:e}),!n&&t&&a($s,{showMore:i,fromGeocodeLocations:r,setHoveredAddress:u,hoveredAddress:c,pickAddress:m,location:t})]}),a("div",{className:"mt-2",children:a(Fs,{setGeocodeLocations:s,setLocation:e,setShowClickMarker:o,setShowMore:l})}),n&&t&&a(Gs,{location:t}),!n&&a(Vs,{fromGeocodeLocations:r,showMore:i,setShowMore:l,hoveredAddress:c,setHoveredAddress:u,location:t,pickAddress:m})]})},_r=t=>Math.round(new TextEncoder().encode(t).length/1024/1024*100)/100,Cr=t=>Math.round(t.reduce((e,r)=>Array.isArray(r)?e+Cr(r):e+_r(r),0)*100)/100,Tr=({children:t,uploadedItems:e,setUploadedItems:r,otherUploadedItemsCount:s,uploadLimit:n,uploadedItemPluralized:o,onUploadBtnClick:i,uploadedCount:l,setUploadedCount:c,showUploadButton:u=!0,renderItem:m})=>{const h=it(()=>{const S=l+s;let v="";if(s>=n)v=`You can't upload more ${o} because you've reached the images limit.`;else if(S>n){const w=n-s;v=`Only ${w} ${o} of ${l} were uploaded because of the limit`,c(w)}return v},[e]);function f(){if(e.length)return d("div",{children:[d("p",{className:"mb-1",children:["Uploaded ",o,": ",e.length]}),a("div",{className:"d-flex flex-wrap",children:e.map((S,v)=>d(E,{className:"p-1 me-3 mb-2 text-sm",onClick:w=>r([...e.filter((b,P)=>P!==v)]),children:[a(pn,{style:{textTransform:"none"},children:m(S)}),a("i",{className:"fa fa-times-circle ms-2","aria-hidden":"true"})]},z()))})]})}return d("div",{className:"mb-2",children:[d("div",{className:"d-flex",children:[d("div",{className:"order-2",children:[a(E,{hidden:!u,variant:"contained",onClick:i,className:"me-1",children:"Upload Files"}),e.length!==0&&a(E,{variant:"contained",color:"warning",onClick:S=>{r([]),c(0)},children:"Remove all"})]}),t]}),h(),f()]})},Er=t=>d(N,{children:[a("img",{alt:"Your uploaded spot img",style:{maxWidth:100,maxHeight:100,width:"auto",height:"auto"},src:t}),d("span",{children:[" ",_r(t),"MBs"]})]}),Ws=["image/png","image/jpg","image/jpeg","image/webp"],Js=({images:t,setImages:e,imagesLimit:r,otherImagesCount:s})=>{const[n,o]=p.exports.useState(0),i=p.exports.useRef(null);return a(Tr,{uploadedItems:t,setUploadedItems:e,uploadLimit:r,uploadedItemPluralized:"images",onUploadBtnClick:()=>{var c;return(c=i.current)==null?void 0:c.click()},uploadedCount:n,setUploadedCount:o,renderItem:Er,otherUploadedItemsCount:s,children:a("input",{ref:i,onChange:c=>{var v,w;const u=r-s,m=(w=(v=c.target.files)==null?void 0:v.length)!=null?w:0;let h=[],f=0;Array.from(c.target.files||[]).forEach((b,P)=>{if(P+1>u)return;const G=new FileReader;G.addEventListener("load",T=>{h.push(T.target.result),f++}),G.addEventListener("error",()=>f++),G.addEventListener("abort",()=>f++),G.readAsDataURL(b)});const S=setInterval(()=>{(f===m||m>u&&f===u)&&(o(m),e(h),clearInterval(S))},100);c.target.value=null},style:{display:"none"},type:"file",accept:Ws.join(", "),multiple:!0})})},Hs=({images:t,setImages:e,otherImagesCount:r,imagesLimit:s})=>{const[n,o]=p.exports.useState(0),[i,l,c]=M(""),[u,m]=p.exports.useState(""),h=it(()=>u,[u]),f=F().auth,S=()=>t.length+r<s&&i!=="",v=b=>{e([...t,b])},w=async()=>{var b;if(!!S())if(m(""),i.startsWith("data:image"))v(i),c();else try{const P=await new We().get_Base64_Images([i],"Bearer "+((b=f==null?void 0:f.content)==null?void 0:b.jwToken));P.content[0].success?(v(P.content[0].base64),c()):m(`The url contains invalid image - ${i}`)}catch{m("Couldn't load your image now, try later.")}};return a(Tr,{uploadedItems:t,setUploadedItems:e,otherUploadedItemsCount:r,uploadLimit:s,uploadedItemPluralized:"images",onUploadBtnClick:()=>{},uploadedCount:n,setUploadedCount:o,showUploadButton:!1,renderItem:Er,children:d(N,{children:[d("div",{className:"order-1",children:[a(V,{value:i,onKeyDown:b=>{b.key==="Enter"&&w()},onChange:l,variant:"standard",label:"Url"}),a(Ee,{onClick:w,disabled:!S(),className:"align-self-end ms-2",children:a(fn,{className:"fa fa-plus-circle","aria-hidden":"true"})})]}),h()]})})},lt=10,yr=20,zs=q.memo(({fromLinkImages:t,setFromLinkImages:e,fromFileImages:r,setFromFileImages:s})=>d(N,{children:[a("p",{className:"m-0",children:"Upload spot images"}),(()=>{const o=t.length+r.length,i=Cr([t,r]);return d("p",{style:{fontSize:"0.85rem"},className:"text-info m-0",children:[`Uploaded ${o}/${lt}, `,a("span",{className:i>yr?"text-danger":"",children:`Size ${i}/${yr}MBs`})]})})(),a("div",{className:"mt-4 mb-3",children:a(Js,{images:r,setImages:s,imagesLimit:lt,otherImagesCount:t.length})}),a("div",{children:a(Hs,{images:t,setImages:e,imagesLimit:lt,otherImagesCount:r.length})})]})),Ys=()=>{const[t,e]=M(""),[r,s]=M(""),[n,o]=p.exports.useState(5),[i,l]=p.exports.useState(null),[c,u]=p.exports.useState([]),[m,h]=p.exports.useState([]),[f,S]=p.exports.useState(""),[v,w]=p.exports.useState(Rt),[b,P]=p.exports.useState(!1),G=F().auth,T=_(),O=async()=>{if(b)return;P(!0);const B=await Ps(c.concat(m),t,r,i,n,v,G);P(!1),B.error?S(B.error.message):(S(""),T(ae({clearAtDate:new Date(Date.now()+1e4),message:"Thank you! Your spot has been added to verification.",severity:"success"})))};return d("div",{className:"container pb-5",children:[a("div",{className:"mb-4 col-2",children:a(V,{value:t,onChange:e,required:!0,fullWidth:!0,variant:"standard",label:"Name"})}),a("div",{className:"mb-4 col-2",children:a(V,{value:r,onChange:s,rows:3,multiline:!0,fullWidth:!0,variant:"standard",label:"Description"})}),d("div",{className:"mb-4 col-2",children:[a("p",{className:"m-0",children:"Surface score"}),a(_t,{defaultValue:n,onChange:B=>o(Number(B.target.value)),"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,min:1,max:10,marks:[{value:1,label:"The worst"},{value:10,label:"The best"}]})]}),a("div",{className:"mb-5",children:a(Bs,{location:i,setLocation:l})}),d("div",{className:"mb-5",children:[a("p",{className:"m-0",children:"Select at least one tag"}),a(Lt,{tags:v,setTags:w})]}),a("div",{className:"mb-5",children:a(zs,{fromLinkImages:m,setFromLinkImages:h,fromFileImages:c,setFromFileImages:u})}),f!==""&&a("p",{className:"text-sm text-danger",children:f.split(`
`).map(B=>a("p",{children:B},z()))}),a(E,{onClick:O,size:"large",variant:"contained",children:b?a(H,{color:"secondary"}):"Submit"})]})},Ks=({listViewType:t,fetchFunc:e,userInteractionType:r})=>{const s=_();p.exports.useEffect(()=>{s(De()[t].reset()),s(K()[t].fetchListItemsCustomFunc({fetchFunc:e}))},[t,r]),Xe(K()[t].fetchListItemsCustomFunc({fetchFunc:e}),t);const n=y(i=>i[t+"State"]),o=i=>{switch(t){case g.SPOTS:return a(ur,{spot:i},i.id);case g.SPOT_VIDEOS:return a(mr,{spotVideo:i},i.id)}};return d("div",{className:"container m-0 mt-5",style:{fontSize:"1rem"},children:[!n.loading&&!n.error&&n.listWithCount.data.length===0&&a("p",{children:"There is nothing to view here \u{1F625}"}),n.listWithCount.data.map(i=>o(i)),n.loading&&d(N,{children:[a("span",{children:"Loading activities "}),a(H,{color:"secondary"})]})]})},wr={listItems:[{label:"Spots",icon:a(gt,{}),value:Z.SPOTS},{label:"Videos",icon:a(Ge,{}),value:Z.SPOT_VIDEOS}],interactions:[{label:"Added",icon:a(wt,{}),value:oe.Added},{label:"Liked",icon:a(_e,{}),value:oe.Liked},{label:"Commented",icon:a(bt,{}),value:oe.Commented}]},qs=()=>{const t=y(r=>r.userProfileState),e=_();return d("div",{className:"w-100",style:{position:"fixed",bottom:0,left:0,zIndex:100},children:[a(Nt,{onChange:(r,s)=>e(Xt.setWhat(s)),value:t.listItems.what,showLabels:!0,children:wr.listItems.map(r=>a(kt,{value:r.value,label:r.label,icon:r.icon},r.value))}),a(Nt,{onChange:(r,s)=>e(Xt.setInteractionType(s)),value:t.listItems.interactionType,showLabels:!0,children:wr.interactions.map(r=>a(kt,{value:r.value,label:r.label,icon:r.icon},r.value))})]})},Xs=()=>{const t=y(r=>r.userProfileState),e=y(r=>{var s;return(s=r.auth.content)==null?void 0:s.jwToken});return d("div",{children:[a("h1",{children:"Activites"}),a("div",{style:{paddingBottom:"10rem"},children:a(Ks,{fetchFunc:(r,s,n)=>t.listItems.what===Z.SPOTS?r.get_User_Related_Spots(t.listItems.interactionType,s,n,"Bearer "+e):r.get_User_Related_Spot_Videos(t.listItems.interactionType,s,n,"Bearer "+e),userInteractionType:t.listItems.interactionType,listViewType:t.listItems.what===Z.SPOTS?g.SPOTS:g.SPOT_VIDEOS})}),a(qs,{})]})},Qs=()=>{const t=_(),e=y(s=>s.userProfileState.stats);p.exports.useEffect(()=>{t(Ae())},[]);const r=s=>[{key:"Added",icon:a(wt,{}),count:s.addedCount},{key:"Liked",icon:a(_e,{}),count:s.likedCount},{key:"Commented",icon:a(bt,{}),count:s.commentedCount}];return d("div",{className:"mb-5",children:[a("h1",{children:"Stats"}),e.loading?d(N,{children:[a("span",{children:"Loading stats "}),a(H,{color:"secondary"})]}):d(N,{children:[a(br,{label:"Spots",stats:r(e.value.spotStats)}),a(br,{label:"Spot Videos",stats:r(e.value.spotVideoStats)})]})]})},br=t=>d("div",{className:"mb-3",children:[a("p",{style:{fontSize:"1rem"},className:"m-0",children:t.label}),a("div",{children:t.stats.map(e=>a(vt,{className:"me-2 px-2 py-1",icon:e.icon,label:e.count},e.key))})]}),Zs=()=>d("div",{className:"container",children:[a(Qs,{}),a(Xs,{})]});var $e;(function(t){t.SPOT_NAME=":spotName"})($e||($e={}));var C;(function(t){t.HOME="/",t.LOGIN="/auth/login",t.REGISTER="/auth/register",t.ADD_TEMP_SPOT="/temp/add",t.TEMP_SPOTS="/temp",t.SPOTS="/spot",t.LOGOUT="/logout",t.MAP="/map",t.SPOT_VIDEO="/video",t.SPOT_DEDICATED_PAGE="/spot/:spotName",t.USER_PROFILE="/user"})(C||(C={}));const Nr=[{linkName:"SkateSpot",path:C.HOME,component:Qn,accessedBy:[k.ALL],renderLink:!1},{linkName:"Login",path:C.LOGIN,component:Kn,accessedBy:[k.NOT_SIGNED_IN],renderLink:!1},{linkName:"Register",path:C.REGISTER,component:Xn,accessedBy:[k.NOT_SIGNED_IN],renderLink:!1},{linkName:"Add Spot",path:C.ADD_TEMP_SPOT,component:Ys,accessedBy:[k.SIGNED_IN],renderLink:!0},{linkName:"Temp Spots",path:C.TEMP_SPOTS,component:()=>a(st,{listViewType:g.TEMP_SPOTS}),accessedBy:[k.ALL],renderLink:!0},{linkName:"Spots",path:C.SPOTS,component:()=>a(st,{listViewType:g.SPOTS}),accessedBy:[k.ALL],renderLink:!0},{linkName:"Videos",path:C.SPOT_VIDEO,component:()=>a(st,{listViewType:g.SPOT_VIDEOS}),accessedBy:[k.ALL],renderLink:!0},{linkName:null,path:C.SPOT_DEDICATED_PAGE,component:_s,accessedBy:[k.ALL],renderLink:!1},{linkName:"Map",path:C.MAP,component:As,accessedBy:[k.ALL],renderLink:!0},{linkName:null,path:C.USER_PROFILE,component:Zs,accessedBy:[k.SIGNED_IN],renderLink:!1},{linkName:"Logout",path:C.LOGOUT,component:qn,accessedBy:[k.SIGNED_IN],renderLink:!1}];const eo=()=>{const t=F().auth,e=J(),r=()=>Nr.filter(s=>s.renderLink).map(s=>xt(s,t)?a(U,{style:{fontWeight:e.location.pathname.endsWith(s.path)?700:400},to:s.path,children:s.linkName},s.path):null);return d("div",{id:"nav",className:"d-flex justify-content-between",children:[d("div",{children:[a("b",{children:d(U,{to:C.HOME,children:[a(je,{})," SkateSpot"]})}),r()]}),t.content?d("div",{children:[a(U,{to:C.USER_PROFILE,children:t.content.userName}),a(U,{to:C.LOGOUT,children:"Logout"})]}):d("div",{children:[a(U,{to:C.REGISTER,children:"Register"}),a(U,{to:C.LOGIN,children:"Login"})]})]})},to=()=>{const t=_(),e=y(r=>r.auth);return p.exports.useEffect(()=>{t(ae({message:e.content?"You can't do this":"Please login first",severity:"info",clearAtDate:new Date(Date.now()+5e3)}))},[]),a(Sn,{to:C.HOME})};const ro=({clearDate:t})=>{const e=100,r=50,s=t-Date.now(),[n,o]=p.exports.useState(e);return p.exports.useEffect(()=>{o(e);const i=setInterval(()=>{const l=t-r-Date.now();if(o((l<0?0:l)*e/s),l<=0){clearInterval(i);return}},r);return()=>clearInterval(i)},[t]),a(gn,{variant:"determinate",value:n})},no=()=>{const t=Me(),e=F();return e.flashMsgs.length!==0?a("div",{style:{position:"fixed",zIndex:1e4,opacity:.95},children:e.flashMsgs.map(r=>d(vn,{className:"mt-1",variant:"filled",severity:r.severity,onClose:()=>t(kn(r.clearAtDate)),children:[r.message,a(ro,{clearDate:r.clearAtDate.getTime()})]},r.clearAtDate.getTime()))}):a(N,{})},so=()=>{const t=Me();p.exports.useEffect(()=>{const e=localStorage.getItem(be);if(e)try{const r=JSON.parse(atob(e.split(".")[1]));oo(r)||t(On({id:r.uid,userName:r.sub,email:r.email,roles:r.roles,isVerified:!1,jwToken:e,issuedOn:new Date(r.nbf*1e3),expiresOn:new Date(r.exp*1e3)}))}catch(r){console.log("Can't set auth state from local storage. Malformed state",r)}},[])},oo=t=>new Date().getTime()>t.exp*1e3,ao=()=>{const t=F();return so(),d(N,{children:[a(no,{}),d(In,{children:[a(eo,{}),a(_n,{children:(()=>Nr.map(r=>a(Cn,{path:r.path,exact:!0,render:()=>xt(r,t.auth)?a(r.component,{}):a(to,{})},r.linkName)))()})]})]})};Tn.render(a(q.StrictMode,{children:a(En,{store:Yn,children:a(yn,{theme:wn({palette:{mode:"dark"}}),children:a(ao,{})})})}),document.getElementById("root"));
