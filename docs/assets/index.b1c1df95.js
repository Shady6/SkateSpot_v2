var Fr=Object.defineProperty,Ur=Object.defineProperties;var $r=Object.getOwnPropertyDescriptors;var pt=Object.getOwnPropertySymbols;var Vr=Object.prototype.hasOwnProperty,Br=Object.prototype.propertyIsEnumerable;var Ve=(t,e,r)=>e in t?Fr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,X=(t,e)=>{for(var r in e||(e={}))Vr.call(e,r)&&Ve(t,r,e[r]);if(pt)for(var r of pt(e))Br.call(e,r)&&Ve(t,r,e[r]);return t},Be=(t,e)=>Ur(t,$r(e));var L=(t,e,r)=>(Ve(t,typeof e!="symbol"?e+"":e,r),r);import{r as p,c as J,a as A,j as a,B as E,F as y,b as jr,u as _,d as w,e as B,C as ft,f as d,g as St,h as re,I as ne,i as se,L as Gr,k as je,l as ve,m as Wr,n as Ge,o as N,p as H,_ as We,M as Jr,q as Hr,s as ce,t as Je,v as gt,S as zr,w as Ie,x as Yr,y as Kr,z as qr,A as Xr,D as Ce,E as Qr,G as vt,H as Zr,J as It,T as en,K as _e,N as tn,O as rn,P as Ct,Q as j,R as nn,U as sn,V as on,W as z,X as an,Y as Te,Z as ln,$ as _t,a0 as Tt,a1 as cn,a2 as dn,a3 as yt,a4 as un,a5 as G,a6 as Et,a7 as mn,a8 as hn,a9 as pn,aa as He,ab as fn,ac as Sn,ad as wt,ae as kt,af as bt,ag as gn,ah as Nt,ai as xt,aj as vn,ak as In,al as Ot,am as At,an as Pt,ao as Mt,ap as Cn,aq as _n,ar as Tn,as as yn,at as En,au as ye,av as wn,aw as kn,ax as bn,ay as Nn,az as xn,aA as On,aB as An,aC as Pn,aD as Mn,aE as Dn,aF as Rn}from"./vendor.aaa3c4e4.js";const Ln=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}};Ln();var x;(function(t){t.ALL="All",t.SIGNED_IN="SignedInRoles",t.NOT_SIGNED_IN="NoRole",t.BASIC="Basic",t.MODERATOR="Moderator",t.ADMIN="Admin",t.SUPER_ADMIN="SuperAdmin"})(x||(x={}));const ze=(t,e)=>t.accessedBy.includes(x.ALL)||t.accessedBy.includes(x.SIGNED_IN)&&e.content||!e.content&&t.accessedBy.includes(x.NOT_SIGNED_IN)||e.content&&t.accessedBy.some(r=>{var s,n;return(n=(s=e.content)==null?void 0:s.roles)==null?void 0:n.some(o=>o===r)}),M=t=>{const[e,r]=p.exports.useState(t);return[e,s=>{r(s.target.value)},()=>r("")]};class Fn{constructor(e,r){L(this,"http");L(this,"baseUrl");L(this,"jsonParseReviver");this.http=r||window,this.baseUrl=e!=null?e:""}seed_Fake_Spots(e,r){let s=this.baseUrl+"/api/admin/seed/spots?";if(e===null)throw new Error("The parameter 'count' cannot be null.");e!==void 0&&(s+="count="+encodeURIComponent(""+e)+"&"),s=s.replace(/[?&]$/,"");let n={method:"POST",headers:{Authorization:r!=null?""+r:""}};return this.http.fetch(s,n).then(o=>this.processSeed_Fake_Spots(o))}processSeed_Fake_Spots(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}seed_Fake_Temp_Spots(e,r){let s=this.baseUrl+"/api/admin/seed/tempSpots?";if(e===null)throw new Error("The parameter 'count' cannot be null.");e!==void 0&&(s+="count="+encodeURIComponent(""+e)+"&"),s=s.replace(/[?&]$/,"");let n={method:"POST",headers:{Authorization:r!=null?""+r:""}};return this.http.fetch(s,n).then(o=>this.processSeed_Fake_Temp_Spots(o))}processSeed_Fake_Temp_Spots(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}comment(e,r,s,n){let o=this.baseUrl+"/api/{subjectType}/{subjectId}/comments";if(e==null)throw new Error("The parameter 'subjectType' must be defined.");if(o=o.replace("{subjectType}",encodeURIComponent(""+e)),r==null)throw new Error("The parameter 'subjectId' must be defined.");o=o.replace("{subjectId}",encodeURIComponent(""+r)),o=o.replace(/[?&]$/,"");let l={body:JSON.stringify(n),method:"POST",headers:{Authorization:s!=null?""+s:"","Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(o,l).then(c=>this.processComment(c))}processComment(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}edit_Comment(e,r,s,n,o){let i=this.baseUrl+"/api/{subjectType}/{subjectId}/comments/{commentId}";if(e==null)throw new Error("The parameter 'subjectType' must be defined.");if(i=i.replace("{subjectType}",encodeURIComponent(""+e)),r==null)throw new Error("The parameter 'subjectId' must be defined.");if(i=i.replace("{subjectId}",encodeURIComponent(""+r)),s==null)throw new Error("The parameter 'commentId' must be defined.");i=i.replace("{commentId}",encodeURIComponent(""+s)),i=i.replace(/[?&]$/,"");let c={body:JSON.stringify(o),method:"PUT",headers:{Authorization:n!=null?""+n:"","Content-Type":"application/json"}};return this.http.fetch(i,c).then(m=>this.processEdit_Comment(m))}processEdit_Comment(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Comment(e,r,s,n){let o=this.baseUrl+"/api/{SubjectType}/{SubjectId}/comments/{CommentId}";if(e==null)throw new Error("The parameter 'subjectId' must be defined.");if(o=o.replace("{SubjectId}",encodeURIComponent(""+e)),r==null)throw new Error("The parameter 'subjectType' must be defined.");if(o=o.replace("{SubjectType}",encodeURIComponent(""+r)),s==null)throw new Error("The parameter 'commentId' must be defined.");o=o.replace("{CommentId}",encodeURIComponent(""+s)),o=o.replace(/[?&]$/,"");let i={method:"DELETE",headers:{Authorization:n!=null?""+n:""}};return this.http.fetch(o,i).then(l=>this.processDelete_Comment(l))}processDelete_Comment(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Token(e){let r=this.baseUrl+"/api/identity/token";r=r.replace(/[?&]$/,"");let n={body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(r,n).then(o=>this.processGet_Token(o))}processGet_Token(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}logout(e){let r=this.baseUrl+"/api/identity/logout";r=r.replace(/[?&]$/,"");let s={method:"DELETE",headers:{Authorization:e!=null?""+e:""}};return this.http.fetch(r,s).then(n=>this.processLogout(n))}processLogout(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}register(e){let r=this.baseUrl+"/api/identity/register";r=r.replace(/[?&]$/,"");let n={body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(r,n).then(o=>this.processRegister(o))}processRegister(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}confirm_Email(e,r){let s=this.baseUrl+"/api/identity/confirm-email?";if(e===null)throw new Error("The parameter 'userId' cannot be null.");if(e!==void 0&&(s+="userId="+encodeURIComponent(""+e)+"&"),r===null)throw new Error("The parameter 'code' cannot be null.");r!==void 0&&(s+="code="+encodeURIComponent(""+r)+"&"),s=s.replace(/[?&]$/,"");let n={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(s,n).then(o=>this.processConfirm_Email(o))}processConfirm_Email(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}forgot_Password(e){let r=this.baseUrl+"/api/identity/forgot-password";r=r.replace(/[?&]$/,"");let n={body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json"}};return this.http.fetch(r,n).then(o=>this.processForgot_Password(o))}processForgot_Password(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}reset_Password(e){let r=this.baseUrl+"/api/identity/reset-password";r=r.replace(/[?&]$/,"");let n={body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(r,n).then(o=>this.processReset_Password(o))}processReset_Password(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Base64_Images(e,r){let s=this.baseUrl+"/api/ImageProxy/base64?";if(e===null)throw new Error("The parameter 'imagesUrls' cannot be null.");e!==void 0&&e&&e.forEach(o=>{s+="imagesUrls="+encodeURIComponent(""+o)+"&"}),s=s.replace(/[?&]$/,"");let n={method:"GET",headers:{Authorization:r!=null?""+r:"",Accept:"text/plain"}};return this.http.fetch(s,n).then(o=>this.processGet_Base64_Images(o))}processGet_Base64_Images(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}like(e,r,s,n){let o=this.baseUrl+"/api/{subjectType}/{subjectId}/Likes";if(e==null)throw new Error("The parameter 'subjectType' must be defined.");if(o=o.replace("{subjectType}",encodeURIComponent(""+e)),r==null)throw new Error("The parameter 'subjectId' must be defined.");o=o.replace("{subjectId}",encodeURIComponent(""+r)),o=o.replace(/[?&]$/,"");let l={body:JSON.stringify(n),method:"POST",headers:{Authorization:s!=null?""+s:"","Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(o,l).then(c=>this.processLike(c))}processLike(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Like(e,r,s){let n=this.baseUrl+"/api/{subjectType}/{subjectId}/Likes";if(e==null)throw new Error("The parameter 'subjectId' must be defined.");if(n=n.replace("{subjectId}",encodeURIComponent(""+e)),r==null)throw new Error("The parameter 'subjectType' must be defined.");n=n.replace("{subjectType}",encodeURIComponent(""+r)),n=n.replace(/[?&]$/,"");let o={method:"DELETE",headers:{Authorization:s!=null?""+s:"",Accept:"text/plain"}};return this.http.fetch(n,o).then(i=>this.processDelete_Like(i))}processDelete_Like(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Spots(e,r,s,n,o,i,l){let c=this.baseUrl+"/api/spots?";if(e===null)throw new Error("The parameter 'take' cannot be null.");if(e!==void 0&&(c+="take="+encodeURIComponent(""+e)+"&"),r===null)throw new Error("The parameter 'offset' cannot be null.");if(r!==void 0&&(c+="offset="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'sorting_Option' cannot be null.");if(s!==void 0&&(c+="Sorting.Option="+encodeURIComponent(""+s)+"&"),n===null)throw new Error("The parameter 'sorting_Ascending' cannot be null.");if(n!==void 0&&(c+="Sorting.Ascending="+encodeURIComponent(""+n)+"&"),o===null)throw new Error("The parameter 'filtering_SurfaceFilter_GreaterThan' cannot be null.");if(o!==void 0&&(c+="Filtering.SurfaceFilter.GreaterThan="+encodeURIComponent(""+o)+"&"),i===null)throw new Error("The parameter 'filtering_SurfaceFilter_Score' cannot be null.");if(i!==void 0&&(c+="Filtering.SurfaceFilter.Score="+encodeURIComponent(""+i)+"&"),l===null)throw new Error("The parameter 'filtering_ObstaclesFilter_Obstacles' cannot be null.");l!==void 0&&l&&l.forEach(h=>{c+="Filtering.ObstaclesFilter.Obstacles="+encodeURIComponent(""+h)+"&"}),c=c.replace(/[?&]$/,"");let m={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(c,m).then(h=>this.processGet_Spots(h))}processGet_Spots(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Spot(e){let r=this.baseUrl+"/api/spots/{spotName}";if(e==null)throw new Error("The parameter 'spotName' must be defined.");r=r.replace("{spotName}",encodeURIComponent(""+e)),r=r.replace(/[?&]$/,"");let s={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(r,s).then(n=>this.processGet_Spot(n))}processGet_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Perma_And_Temp_Spots_Marker_Data(e,r,s){let n=this.baseUrl+"/api/spots/marker?";if(e===null)throw new Error("The parameter 'surfaceFilter_GreaterThan' cannot be null.");if(e!==void 0&&(n+="SurfaceFilter.GreaterThan="+encodeURIComponent(""+e)+"&"),r===null)throw new Error("The parameter 'surfaceFilter_Score' cannot be null.");if(r!==void 0&&(n+="SurfaceFilter.Score="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'obstaclesFilter_Obstacles' cannot be null.");s!==void 0&&s&&s.forEach(i=>{n+="ObstaclesFilter.Obstacles="+encodeURIComponent(""+i)+"&"}),n=n.replace(/[?&]$/,"");let o={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(n,o).then(i=>this.processGet_Perma_And_Temp_Spots_Marker_Data(i))}processGet_Perma_And_Temp_Spots_Marker_Data(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Spot(e,r){let s=this.baseUrl+"/api/spots/{Id}";if(e==null)throw new Error("The parameter 'id' must be defined.");s=s.replace("{Id}",encodeURIComponent(""+e)),s=s.replace(/[?&]$/,"");let n={method:"DELETE",headers:{Authorization:r!=null?""+r:""}};return this.http.fetch(s,n).then(o=>this.processDelete_Spot(o))}processDelete_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Spot_And_Spot_Video_Stats(){let e=this.baseUrl+"/api/spots/stats";e=e.replace(/[?&]$/,"");let r={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(e,r).then(s=>this.processGet_Spot_And_Spot_Video_Stats(s))}processGet_Spot_And_Spot_Video_Stats(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Spot_Videos(e,r,s,n,o,i,l,c){let m=this.baseUrl+"/api/spotVideos?";if(e===null)throw new Error("The parameter 'take' cannot be null.");if(e!==void 0&&(m+="take="+encodeURIComponent(""+e)+"&"),r===null)throw new Error("The parameter 'offset' cannot be null.");if(r!==void 0&&(m+="offset="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'sorting_Option' cannot be null.");if(s!==void 0&&(m+="Sorting.Option="+encodeURIComponent(""+s)+"&"),n===null)throw new Error("The parameter 'sorting_Ascending' cannot be null.");if(n!==void 0&&(m+="Sorting.Ascending="+encodeURIComponent(""+n)+"&"),o===null)throw new Error("The parameter 'filtering_SurfaceFilter_GreaterThan' cannot be null.");if(o!==void 0&&(m+="Filtering.SurfaceFilter.GreaterThan="+encodeURIComponent(""+o)+"&"),i===null)throw new Error("The parameter 'filtering_SurfaceFilter_Score' cannot be null.");if(i!==void 0&&(m+="Filtering.SurfaceFilter.Score="+encodeURIComponent(""+i)+"&"),l===null)throw new Error("The parameter 'filtering_ObstaclesFilter_Obstacles' cannot be null.");l!==void 0&&l&&l.forEach(u=>{m+="Filtering.ObstaclesFilter.Obstacles="+encodeURIComponent(""+u)+"&"}),m=m.replace(/[?&]$/,"");let h={method:"GET",headers:{Authorization:c!=null?""+c:"",Accept:"text/plain"}};return this.http.fetch(m,h).then(u=>this.processGet_Spot_Videos(u))}processGet_Spot_Videos(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Spot_Videos_Of_Spot(e,r,s,n,o,i){let l=this.baseUrl+"/api/spots/{spotName}/spotVideos?";if(e==null)throw new Error("The parameter 'spotName' must be defined.");if(l=l.replace("{spotName}",encodeURIComponent(""+e)),r===null)throw new Error("The parameter 'take' cannot be null.");if(r!==void 0&&(l+="take="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'offset' cannot be null.");if(s!==void 0&&(l+="offset="+encodeURIComponent(""+s)+"&"),n===null)throw new Error("The parameter 'option' cannot be null.");if(n!==void 0&&(l+="Option="+encodeURIComponent(""+n)+"&"),o===null)throw new Error("The parameter 'ascending' cannot be null.");o!==void 0&&(l+="Ascending="+encodeURIComponent(""+o)+"&"),l=l.replace(/[?&]$/,"");let c={method:"GET",headers:{Authorization:i!=null?""+i:"",Accept:"text/plain"}};return this.http.fetch(l,c).then(m=>this.processGet_Spot_Videos_Of_Spot(m))}processGet_Spot_Videos_Of_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}add_Spot_Video(e,r,s){let n=this.baseUrl+"/api/spots/{spotName}/spotVideos";if(e==null)throw new Error("The parameter 'spotName' must be defined.");n=n.replace("{spotName}",encodeURIComponent(""+e)),n=n.replace(/[?&]$/,"");let i={body:JSON.stringify(s),method:"POST",headers:{Authorization:r!=null?""+r:"","Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(n,i).then(l=>this.processAdd_Spot_Video(l))}processAdd_Spot_Video(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Spot_Video(e,r){let s=this.baseUrl+"/api/spotVideos/{spotVideoId}";if(e==null)throw new Error("The parameter 'spotVideoId' must be defined.");s=s.replace("{spotVideoId}",encodeURIComponent(""+e)),s=s.replace(/[?&]$/,"");let n={method:"DELETE",headers:{Authorization:r!=null?""+r:""}};return this.http.fetch(s,n).then(o=>this.processDelete_Spot_Video(o))}processDelete_Spot_Video(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}create_Spot(e,r){let s=this.baseUrl+"/api/TempSpots";s=s.replace(/[?&]$/,"");let o={body:JSON.stringify(r),method:"POST",headers:{Authorization:e!=null?""+e:"","Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(s,o).then(i=>this.processCreate_Spot(i))}processCreate_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Temp_Spots(e,r,s,n,o,i,l){let c=this.baseUrl+"/api/TempSpots?";if(e===null)throw new Error("The parameter 'take' cannot be null.");if(e!==void 0&&(c+="take="+encodeURIComponent(""+e)+"&"),r===null)throw new Error("The parameter 'offset' cannot be null.");if(r!==void 0&&(c+="offset="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'sorting_Option' cannot be null.");if(s!==void 0&&(c+="Sorting.Option="+encodeURIComponent(""+s)+"&"),n===null)throw new Error("The parameter 'sorting_Ascending' cannot be null.");if(n!==void 0&&(c+="Sorting.Ascending="+encodeURIComponent(""+n)+"&"),o===null)throw new Error("The parameter 'filtering_SurfaceFilter_GreaterThan' cannot be null.");if(o!==void 0&&(c+="Filtering.SurfaceFilter.GreaterThan="+encodeURIComponent(""+o)+"&"),i===null)throw new Error("The parameter 'filtering_SurfaceFilter_Score' cannot be null.");if(i!==void 0&&(c+="Filtering.SurfaceFilter.Score="+encodeURIComponent(""+i)+"&"),l===null)throw new Error("The parameter 'filtering_ObstaclesFilter_Obstacles' cannot be null.");l!==void 0&&l&&l.forEach(h=>{c+="Filtering.ObstaclesFilter.Obstacles="+encodeURIComponent(""+h)+"&"}),c=c.replace(/[?&]$/,"");let m={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(c,m).then(h=>this.processGet_Temp_Spots(h))}processGet_Temp_Spots(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_Temp_Spot(e){let r=this.baseUrl+"/api/TempSpots/{id}";if(e==null)throw new Error("The parameter 'id' must be defined.");r=r.replace("{id}",encodeURIComponent(""+e)),r=r.replace(/[?&]$/,"");let s={method:"GET",headers:{Accept:"text/plain"}};return this.http.fetch(r,s).then(n=>this.processGet_Temp_Spot(n))}processGet_Temp_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Temp_Spot(e,r){let s=this.baseUrl+"/api/TempSpots/{id}";if(e==null)throw new Error("The parameter 'id' must be defined.");s=s.replace("{id}",encodeURIComponent(""+e)),s=s.replace(/[?&]$/,"");let n={method:"DELETE",headers:{Authorization:r!=null?""+r:""}};return this.http.fetch(s,n).then(o=>this.processDelete_Temp_Spot(o))}processDelete_Temp_Spot(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_User_Stats(e){let r=this.baseUrl+"/api/user/stats";r=r.replace(/[?&]$/,"");let s={method:"GET",headers:{Authorization:e!=null?""+e:"",Accept:"text/plain"}};return this.http.fetch(r,s).then(n=>this.processGet_User_Stats(n))}processGet_User_Stats(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_User_Related_Spots(e,r,s,n){let o=this.baseUrl+"/api/user/Spots/{interactionType}?";if(e==null)throw new Error("The parameter 'interactionType' must be defined.");if(o=o.replace("{interactionType}",encodeURIComponent(""+e)),r===null)throw new Error("The parameter 'take' cannot be null.");if(r!==void 0&&(o+="take="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'skip' cannot be null.");s!==void 0&&(o+="skip="+encodeURIComponent(""+s)+"&"),o=o.replace(/[?&]$/,"");let i={method:"GET",headers:{Authorization:n!=null?""+n:"",Accept:"text/plain"}};return this.http.fetch(o,i).then(l=>this.processGet_User_Related_Spots(l))}processGet_User_Related_Spots(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}get_User_Related_Spot_Videos(e,r,s,n){let o=this.baseUrl+"/api/user/Videos/{interactionType}?";if(e==null)throw new Error("The parameter 'interactionType' must be defined.");if(o=o.replace("{interactionType}",encodeURIComponent(""+e)),r===null)throw new Error("The parameter 'take' cannot be null.");if(r!==void 0&&(o+="take="+encodeURIComponent(""+r)+"&"),s===null)throw new Error("The parameter 'skip' cannot be null.");s!==void 0&&(o+="skip="+encodeURIComponent(""+s)+"&"),o=o.replace(/[?&]$/,"");let i={method:"GET",headers:{Authorization:n!=null?""+n:"",Accept:"text/plain"}};return this.http.fetch(o,i).then(l=>this.processGet_User_Related_Spot_Videos(l))}processGet_User_Related_Spot_Videos(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}vote(e,r,s){let n=this.baseUrl+"/api/tempSpots/{tempSpotId}/vote";if(e==null)throw new Error("The parameter 'tempSpotId' must be defined.");n=n.replace("{tempSpotId}",encodeURIComponent(""+e)),n=n.replace(/[?&]$/,"");let i={body:JSON.stringify(s),method:"POST",headers:{Authorization:r!=null?""+r:"","Content-Type":"application/json",Accept:"text/plain"}};return this.http.fetch(n,i).then(l=>this.processVote(l))}processVote(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}delete_Vote(e,r){let s=this.baseUrl+"/api/tempSpots/{tempSpotId}/vote";if(e==null)throw new Error("The parameter 'tempSpotId' must be defined.");s=s.replace("{tempSpotId}",encodeURIComponent(""+e)),s=s.replace(/[?&]$/,"");let n={method:"DELETE",headers:{Authorization:r!=null?""+r:"",Accept:"text/plain"}};return this.http.fetch(s,n).then(o=>this.processDelete_Vote(o))}processDelete_Vote(e){const r=e.status;let s={};return e.headers&&e.headers.forEach&&e.headers.forEach((n,o)=>s[o]=n),r===200?e.text().then(n=>{let o=null;return o=n===""?null:JSON.parse(n,this.jsonParseReviver),o}):r!==200&&r!==204?e.text().then(n=>C("An unexpected server error occurred.",r,n,s)):Promise.resolve(null)}}var de;(function(t){t.Spots="Spots",t.SpotVideos="SpotVideos",t.TempSpots="TempSpots"})(de||(de={}));var Ee;(function(t){t.DEFAULT_ERROR="DEFAULT_ERROR",t.ALREADY_EXISTS="ALREADY_EXISTS",t.VOTING_FINISHED="VOTING_FINISHED",t.DOESNT_EXIST="DOESNT_EXIST",t.NOT_OWNED="NOT_OWNED",t.EMAIL_NOT_VERIFIED="EMAIL_NOT_VERIFIED",t.CANT_DO_THAT="CANT_DO_THAT",t.IMAGES_MAXED="IMAGES_MAXED",t.TOO_MANY_IMAGES="TOO_MANY_IMAGES",t.BAD_INPUT="BAD_INPUT",t.UNAUTHORIZED="UNAUTHORIZED",t.FORBIDDEN="FORBIDDEN"})(Ee||(Ee={}));var Q;(function(t){t.Spots="Spots",t.SpotVideos="SpotVideos",t.Comments="Comments"})(Q||(Q={}));var R;(function(t){t.Ledge="Ledge",t.Stairs="Stairs",t.Quater="Quater",t.Kicker="Kicker",t.Downhill="Downhill",t.Rail="Rail",t.Bank="Bank",t.Flatground="Flatground",t.Manualpad="Manualpad",t.Skatepark="Skatepark"})(R||(R={}));var Y;(function(t){t.CREATION_DATE="CREATION_DATE",t.LIKES="LIKES",t.COMMENTS="COMMENTS",t.VIDEOS="VIDEOS"})(Y||(Y={}));var oe;(function(t){t.Added="Added",t.Liked="Liked",t.Commented="Commented"})(oe||(oe={}));var Z;(function(t){t.Instagram="Instagram",t.YouTube="YouTube"})(Z||(Z={}));class Dt extends Error{constructor(e,r,s,n,o){super();L(this,"message");L(this,"status");L(this,"response");L(this,"headers");L(this,"result");L(this,"isApiException",!0);this.message=e,this.status=r,this.response=s,this.headers=n,this.result=o}static isApiException(e){return e.isApiException===!0}}function C(t,e,r,s,n){throw n!=null?n:new Dt(t,e,r,s,null)}const we=J({name:"flashMsg",initialState:[],reducers:{setFlashMsg:(t,e)=>{t.push(e.payload)},clearFlashMsg:(t,e)=>t.filter(r=>r.clearAtDate!==e.payload)}}),ae=A("flashMsg/createFlashMsgWithTimeout",async(t,{dispatch:e})=>{var s;(s=t.clearAtDate)!=null||(t.clearAtDate=new Date(Date.now()+1e4)),e(we.actions.setFlashMsg(t));const r=setTimeout(()=>{e(we.actions.clearFlashMsg(t.clearAtDate)),clearTimeout(r)},t.clearAtDate.getTime()-Date.now())}),{clearFlashMsg:Un}=we.actions;var $n=we.reducer;class Ye extends Fn{constructor(){super("https://skatespot.azurewebsites.net")}}const Ke=async(t,e)=>{try{const r=await t(new Ye,"Bearer "+(e==null?void 0:e.jwToken));return r===void 0?{content:void 0,error:void 0}:r}catch(r){return r instanceof Dt?JSON.parse(r.response):new Promise(s=>{s({content:void 0,error:{statusCode:Ee.DEFAULT_ERROR}})})}},O=async(t,e,r,s,n=1e4)=>{var i,l;const o=await Ke(r,e);return o.error&&t(ae({message:((i=o==null?void 0:o.error)==null?void 0:i.statusCode)!==Ee.DEFAULT_ERROR?(l=o.error)==null?void 0:l.message:s||"Something went wrong, try again later.",severity:"error",clearAtDate:new Date(Date.now()+n)})),o},ke="SkateSpotJWT",be=A("auth/login",async({loginData:t,history:e},{rejectWithValue:r,dispatch:s})=>{const n=await O(s,void 0,o=>o.get_Token(t));return n.error?r(null):(localStorage.setItem(ke,n.content.jwToken),e.push(I.HOME),n.content)}),Ne=A("auth/register",async(t,{rejectWithValue:e,dispatch:r})=>{if((await O(r,void 0,n=>n.register(t))).error)return e(null)}),Rt=A("auth/logout",async()=>{const t=localStorage.getItem(ke);localStorage.removeItem(ke),t&&await new Ye().logout("Bearer "+t)}),Lt={loginLoading:!1,registerSuccess:!1,registerLoading:!1},Ft=J({name:"auth",initialState:Lt,reducers:{setAuthStateFromLocalStorage:(t,e)=>{Ut(t,e.payload)}},extraReducers:t=>{t.addCase(be.pending,e=>{e.loginLoading=!0}).addCase(be.fulfilled,(e,r)=>{Ut(e,r.payload)}).addCase(be.rejected,e=>{e.loginLoading=!1}).addCase(Ne.pending,e=>{e.registerLoading=!0}).addCase(Ne.fulfilled,e=>{e.registerSuccess=!0,e.registerLoading=!1}).addCase(Ne.rejected,e=>{e.registerLoading=!1}).addCase(Rt.pending,()=>Lt)}}),Ut=(t,e)=>{Array.isArray(e.roles)||(e.roles=[e.roles]),t.content=e,t.loginLoading=!1},{setAuthStateFromLocalStorage:Vn}=Ft.actions;var Bn=Ft.reducer;const jn=({name:t,isSelected:e,toggleSelection:r})=>a(E,{style:e?{backgroundColor:"#9df990"}:void 0,className:"me-1 mt-1 px-2",onClick:r,variant:e?"contained":"text",children:t}),$t=[{obstacleType:R.Skatepark,isSelected:!1},{obstacleType:R.Ledge,isSelected:!1},{obstacleType:R.Rail,isSelected:!1},{obstacleType:R.Stairs,isSelected:!1},{obstacleType:R.Bank,isSelected:!1},{obstacleType:R.Kicker,isSelected:!1},{obstacleType:R.Manualpad,isSelected:!1},{obstacleType:R.Flatground,isSelected:!1},{obstacleType:R.Quater,isSelected:!1},{obstacleType:R.Downhill,isSelected:!1}],Vt=({tags:t,setTags:e})=>{const r=s=>{e(t.map(n=>({obstacleType:n.obstacleType,isSelected:n.obstacleType===s.obstacleType?!n.isSelected:n.isSelected})))};return a(y,{children:t.map(s=>a(jn,{name:s.obstacleType,isSelected:s.isSelected,toggleSelection:()=>r(s)},s.obstacleType))})},Bt={sort:{option:Y.CREATION_DATE,ascending:!1},filter:{surfaceScore:{enabled:!1,gtFiltering:!0,score:5},tags:{enabled:!1,tags:$t}}},Gn={sort:Bt.sort,filter:void 0},jt={appliedFilter:Gn,filterInMaking:Bt},Gt=J({name:"filters",initialState:jt,reducers:{applyFilters:t=>{var e,r,s,n;t.appliedFilter.sort=t.filterInMaking.sort,t.filterInMaking.filter.surfaceScore.enabled&&((r=(e=t.appliedFilter).filter)!=null||(e.filter={}),t.appliedFilter.filter.surfaceScore={score:t.filterInMaking.filter.surfaceScore.score,gtFiltering:t.filterInMaking.filter.surfaceScore.gtFiltering}),t.filterInMaking.filter.tags.enabled&&((n=(s=t.appliedFilter).filter)!=null||(s.filter={}),t.appliedFilter.filter.tags=t.filterInMaking.filter.tags.tags.filter(o=>o.isSelected).map(o=>o.obstacleType)),!t.filterInMaking.filter.surfaceScore.enabled&&!t.filterInMaking.filter.tags.enabled&&(t.appliedFilter.filter=void 0)},clearFilters:t=>jt,setSortingOption:(t,e)=>{t.filterInMaking.sort.option=e.payload},setSortAscending:(t,e)=>{t.filterInMaking.sort.ascending=e.payload},toggleSurfaceScore:t=>{t.filterInMaking.filter.surfaceScore.enabled=!t.filterInMaking.filter.surfaceScore.enabled},toggleSurfaceScoreGt:t=>{t.filterInMaking.filter.surfaceScore.gtFiltering=!t.filterInMaking.filter.surfaceScore.gtFiltering},setSurfaceScore:(t,e)=>{t.filterInMaking.filter.surfaceScore.score=e.payload},setTags:(t,e)=>{t.filterInMaking.filter.tags.enabled=e.payload.some(r=>r.isSelected),t.filterInMaking.filter.tags.tags=e.payload}}}),U=Gt.actions;var Wn=Gt.reducer;const D={spots:{fetchListItems:(t,e,r,s)=>{var n,o,i,l,c,m,h;return t.get_Spots(e,r,(n=s.sort)==null?void 0:n.option,(o=s.sort)==null?void 0:o.ascending,(l=(i=s.filter)==null?void 0:i.surfaceScore)==null?void 0:l.gtFiltering,(m=(c=s.filter)==null?void 0:c.surfaceScore)==null?void 0:m.score,(h=s.filter)==null?void 0:h.tags)},getSpecificState:t=>t.spotsState,name:"spots",commentSubjectType:de.Spots},tempSpots:{fetchListItems:(t,e,r,s)=>{var n,o,i,l,c,m,h;return t.get_Temp_Spots(e,r,(n=s.sort)==null?void 0:n.option,(o=s.sort)==null?void 0:o.ascending,(l=(i=s.filter)==null?void 0:i.surfaceScore)==null?void 0:l.gtFiltering,(m=(c=s.filter)==null?void 0:c.surfaceScore)==null?void 0:m.score,(h=s.filter)==null?void 0:h.tags)},getSpecificState:t=>t.tempSpotsState,name:"tempSpots",commentSubjectType:de.TempSpots},spotVideos:{fetchListItems:(t,e,r,s)=>{var n,o,i,l,c,m,h;return t.get_Spot_Videos(e,r,(n=s.sort)==null?void 0:n.option,(o=s.sort)==null?void 0:o.ascending,(l=(i=s.filter)==null?void 0:i.surfaceScore)==null?void 0:l.gtFiltering,(m=(c=s.filter)==null?void 0:c.surfaceScore)==null?void 0:m.score,(h=s.filter)==null?void 0:h.tags,void 0)},getSpecificState:t=>t.spotVideosState,name:"spotVideos",commentSubjectType:de.SpotVideos}};var g;(function(t){t.SPOTS="spots",t.TEMP_SPOTS="tempSpots",t.SPOT_VIDEOS="spotVideos"})(g||(g={}));const qe=(t,e)=>A(`${D[t].name}/like${e===Q.Comments?"/"+Q.Comments:""}`,async({isPositive:r,deletedLike:s,subjectId:n,parentId:o},{getState:i,dispatch:l,rejectWithValue:c})=>{const m=i(),h=await O(l,m.auth.content,(u,f)=>s?u.delete_Like(n,e,f):u.like(e,n,f,{positive:r}),"Error occured while liking, please try again later");return h.error?c(null):{result:h.content,likeSubjectType:e,subjectId:n,parentId:o}}),xe=qe(g.SPOTS,Q.Spots),Jn=t=>A(`${D[t].name}/comment`,async({listItemId:e,text:r},{getState:s,dispatch:n,rejectWithValue:o})=>{const i=s(),l=await O(n,i.auth.content,(c,m)=>c.comment(D[t].commentSubjectType,e,m,{text:r}),"Couldn't add comment, please try again later");return l.error?o(null):{comment:l.content,listItemId:e}}),Hn=t=>A(`${D[t].name}/deleteComment`,async({listItemId:e,commentId:r},{getState:s,dispatch:n,rejectWithValue:o})=>{const i=s();return(await O(n,i.auth.content,(c,m)=>c.delete_Comment(e,D[t].commentSubjectType,r,m),"Couldn't delete comment, please try again later")).error?o(null):{listItemId:e,commentId:r}}),zn=t=>A(`${D[t].name}/deleteListItem`,async({listItemId:e,deleteFunc:r},{getState:s,dispatch:n,rejectWithValue:o})=>{const i=s();return(await O(n,i.auth.content,(c,m)=>r(c,m))).error?o(null):{listItemId:e}}),Yn=t=>A(`${D[t].name}/editComment`,async({listItemId:e,commentId:r,newText:s},{getState:n,dispatch:o,rejectWithValue:i})=>{const l=n();return(await O(o,l.auth.content,(m,h)=>m.edit_Comment(D[t].commentSubjectType,e,r,h,{newText:s}),"Couldn't edit comment, please try again later")).error?i(null):{listItemId:e,commentId:r,newText:s}}),Kn=t=>A(`${D[t].name}/fetchListItems`,async(e,{getState:r,dispatch:s,rejectWithValue:n})=>{const o=r(),i=D[t].getSpecificState(o),l=await O(s,o.auth.content,c=>D[t].fetchListItems(c,i.paging.take,i.paging.skip,o.filtersState.appliedFilter),"Error occured while loading next records, please try again later.");return l.error?n(null):l.content}),Wt=t=>A(`${D[t].name}/fetchListItems`,async({fetchFunc:e},{getState:r,dispatch:s,rejectWithValue:n})=>{const o=r(),i=D[t].getSpecificState(o),l=await O(s,o.auth.content,c=>e(c,i.paging.take,i.paging.skip),"Error occured while loading next records, please try again later.");return l.error?n(null):l.content}),ue={fetchListItems:Kn,fetchListItemsCustomFunc:Wt,comment:Jn,deleteComment:Hn,editComment:Yn,likeComment:qe,deleteListItem:zn},K=()=>{let t={};return Object.keys(g).forEach(e=>{t[g[e]]={},Object.keys(ue).forEach(r=>{ue[r].name===ue.likeComment.name?t[g[e]][r]=ue[r](g[e],Q.Comments):t[g[e]][r]=ue[r](g[e])})}),t},Xe={like:{fulfilled:(t,e)=>{var o;const{result:r,listItemId:s}=e,n=(o=t.listWithCount.data)==null?void 0:o.find(i=>i.id===s);return n.verificationProcess?n.verificationProcess.votes=r:n.likes=r,n}}},Oe=t=>({reset:()=>t,setItems:(e,r)=>{e.listWithCount={data:r.payload,totalCount:e.listWithCount.totalCount}}}),Qe=(t,e)=>{const r=K()[e];t.addCase(r.fetchListItems.pending,s=>{s.loading=!0,s.error=!1}).addCase(r.fetchListItems.fulfilled,(s,{payload:n})=>{var o,i,l;s.loading=!1,s.error=!1,((o=n==null?void 0:n.data)==null?void 0:o.length)!==0&&((l=(i=s==null?void 0:s.listWithCount)==null?void 0:i.data)==null||l.push(...n.data),s.listWithCount.totalCount=n.totalCount,s.paging.skip+=s.paging.take)}).addCase(r.fetchListItems.rejected,s=>{s.error=!0,s.loading=!1}).addCase(r.comment.fulfilled,(s,{payload:n})=>{var c,m,h;const{comment:o,listItemId:i}=n,l=(c=s.listWithCount.data)==null?void 0:c.find(u=>u.id===i);l.verificationProcess?(m=l.verificationProcess.discussion)==null||m.unshift(o):(h=l.comments)==null||h.unshift(o)}).addCase(r.deleteComment.fulfilled,(s,{payload:n})=>{var m,h,u,f;const{commentId:o,listItemId:i}=n,l=(m=s.listWithCount.data)==null?void 0:m.find(S=>S.id===i);let c=((u=(h=l.verificationProcess)==null?void 0:h.discussion)==null?void 0:u.find(S=>S.id===o))||((f=l.comments)==null?void 0:f.find(S=>S.id===o));c.text="",c.isDeleted=!0,c.author={id:"",userName:void 0},c.authorId=void 0}).addCase(r.editComment.fulfilled,(s,{payload:n})=>{var h,u,f,S;const{commentId:o,listItemId:i,newText:l}=n,c=(h=s.listWithCount.data)==null?void 0:h.find(v=>v.id===i);let m=((f=(u=c.verificationProcess)==null?void 0:u.discussion)==null?void 0:f.find(v=>v.id===o))||((S=c.comments)==null?void 0:S.find(v=>v.id===o));m.text=l}).addCase(r.likeComment.fulfilled,(s,{payload:n})=>{var h,u,f;const{result:o,subjectId:i,parentId:l}=n,c=(h=s.listWithCount.data)==null?void 0:h.find(S=>S.id===l);let m;c.verificationProcess?m=(u=c.verificationProcess.discussion)==null?void 0:u.find(S=>S.id===i):m=(f=c.comments)==null?void 0:f.find(S=>S.id===i),m.likes=o}).addCase(r.deleteListItem.fulfilled,(s,{payload:n})=>{s.listWithCount.data=s.listWithCount.data.filter(o=>o.id!==n.listItemId),s.listWithCount.totalCount--})},Jt={listWithCount:{data:[],totalCount:0},paging:{take:5,skip:0},loading:!1,error:!1},Ht=J({name:"spots",initialState:Jt,reducers:X({},Oe(Jt)),extraReducers:t=>{Qe(t,g.SPOTS),t.addCase(xe.fulfilled,(e,r)=>{Xe.like.fulfilled(e,{result:r.payload.result,listItemId:r.payload.subjectId})})}}),me=Ht.actions;var qn=Ht.reducer;const Xn=Wt(g.SPOT_VIDEOS),Ze=qe(g.SPOT_VIDEOS,Q.SpotVideos),zt={listWithCount:{data:[],totalCount:0},paging:{take:5,skip:0},loading:!1,error:!1},Yt=J({name:"spotVideo",initialState:zt,reducers:Be(X({},Oe(zt)),{prependVideo:(t,e)=>{t.listWithCount.data.unshift(e.payload)}}),extraReducers:t=>{Qe(t,g.SPOT_VIDEOS),t.addCase(Ze.fulfilled,(e,r)=>{Xe.like.fulfilled(e,{result:r.payload.result,listItemId:r.payload.subjectId})})}}),Kt=Yt.actions;var Qn=Yt.reducer;const qt=A("tempSpots/vote",async({tempSpotId:t,isReal:e,deletedVote:r},{getState:s,dispatch:n,rejectWithValue:o})=>{const i=s(),l=await O(n,i.auth.content,(c,m)=>r?c.delete_Vote(t,m):c.vote(t,m,{isReal:e}),"Error occured while voting, please try again later");return l.error?o(null):{result:l.content,tempSpotId:t}}),Xt={listWithCount:{data:[],totalCount:0},paging:{take:5,skip:0},loading:!1,error:!1},Qt=J({name:"tempSpots",initialState:Xt,reducers:X({},Oe(Xt)),extraReducers:t=>{Qe(t,g.TEMP_SPOTS),t.addCase(qt.fulfilled,(e,r)=>{var n;const s=Xe.like.fulfilled(e,{listItemId:r.payload.tempSpotId,result:(n=r.payload.result)==null?void 0:n.votes});s.verificationProcess.isVerified=r.payload.result.verified})}}),Zn=Qt.actions;var es=Qt.reducer;const Ae=A("userProfile/getStats",async(t,{getState:e,dispatch:r,rejectWithValue:s})=>{const n=e(),o=await O(r,n.auth.content,(i,l)=>i.get_User_Stats(l),"Error occured while fetching stats.");return o.error?s(null):o.content});var ee;(function(t){t.SPOTS="Spots",t.SPOT_VIDEOS="SpotVideos"})(ee||(ee={}));const Zt={stats:{loading:!1,value:{spotStats:{addedCount:0,likedCount:0,commentedCount:0},spotVideoStats:{addedCount:0,likedCount:0,commentedCount:0}}},listItems:{interactionType:oe.Added,what:ee.SPOTS}},er=J({name:"userProfile",initialState:Zt,reducers:{setInteractionType:(t,e)=>{t.listItems.interactionType=e.payload},setWhat:(t,e)=>{t.listItems.what=e.payload}},extraReducers:t=>{t.addCase(Ae.pending,e=>{e.stats.loading=!0}),t.addCase(Ae.fulfilled,(e,r)=>{e.stats.loading=!1,e.stats.value=r.payload}),t.addCase(Ae.rejected,e=>{e.stats.loading=!1,e.stats.value=Zt.stats.value})}}),tr=er.actions;var ts=er.reducer;const he=A("mapSpots/getMarkersData",async(t,{getState:e,dispatch:r,rejectWithValue:s})=>{const n=e(),o=await O(r,n.auth.content,i=>{var l,c,m,h,u,f,S,v,k,b,P;return i.get_Perma_And_Temp_Spots_Marker_Data((h=(m=(c=(l=n.filtersState)==null?void 0:l.appliedFilter)==null?void 0:c.filter)==null?void 0:m.surfaceScore)==null?void 0:h.gtFiltering,(v=(S=(f=(u=n.filtersState)==null?void 0:u.appliedFilter)==null?void 0:f.filter)==null?void 0:S.surfaceScore)==null?void 0:v.score,(P=(b=(k=n.filtersState)==null?void 0:k.appliedFilter)==null?void 0:b.filter)==null?void 0:P.tags)});return o.error?s(null):o.content}),Pe=A("mapSpots/fetchSpot",async({markerData:t},{getState:e,dispatch:r,rejectWithValue:s})=>{const n=e(),o=t.isTempSpot?await O(r,n.auth.content,i=>i.get_Temp_Spot(t.id)):await O(r,n.auth.content,i=>i.get_Spot(t.name));return o.error?s(null):o.content}),rs={loadingMarkers:!1,loadingSpotInModal:!1,currentSpotInModal:null,markersData:[],isSpotModalOpen:!1,isFilterModalOpen:!1},rr=J({name:"mapSpots",initialState:rs,reducers:{toggleSpotModal:(t,e)=>{t.isSpotModalOpen=e.payload},toggleFilterModal:(t,e)=>{t.isFilterModalOpen=e.payload}},extraReducers:t=>{t.addCase(he.pending,e=>{e.loadingMarkers=!0}).addCase(he.fulfilled,(e,r)=>{e.loadingMarkers=!1,e.markersData=r.payload}).addCase(he.rejected,e=>{e.loadingMarkers=!1}).addCase(Pe.pending,e=>{e.currentSpotInModal=null,e.loadingSpotInModal=!0}).addCase(Pe.fulfilled,(e,r)=>{e.loadingSpotInModal=!1,e.currentSpotInModal=r.payload}).addCase(Pe.rejected,e=>{e.loadingSpotInModal=!1})}});var ns=rr.reducer;const te=rr.actions,ss=jr({reducer:{auth:Bn,flashMsgs:$n,tempSpotsState:es,spotsState:qn,spotVideosState:Qn,filtersState:Wn,mapSpotsState:ns,userProfileState:ts},middleware:t=>t({serializableCheck:!1})}),Me=()=>_(),F=()=>w(t=>t),os=()=>{const[t,e]=M(""),[r,s]=M(""),n=B(),o=Me();return a(ft,{className:"mt-5",children:d(St,{children:[d(re,{margin:"dense",children:[a(ne,{htmlFor:"email",children:"Email Address"}),a(se,{id:"email",value:t,onChange:e})]}),d(re,{margin:"dense",children:[a(ne,{htmlFor:"password",children:"Password"}),a(se,{type:"password",id:"password",value:r,onChange:s})]}),a(E,{onClick:()=>{o(be({loginData:{email:t,password:r},history:n}))},children:"Login"})]})})},as=()=>{const t=_(),e=B();return p.exports.useEffect(()=>{t(Rt()),t(ae({message:"Logged out successfuly!",severity:"success",clearAtDate:new Date(Date.now()+5e3)})),e.push(I.HOME)},[]),a(y,{})},is=()=>{const[t,e]=M(""),[r,s]=M(""),[n,o]=M(""),[i,l]=M(""),c=B(),m=w(u=>u.auth),h=Me();return p.exports.useEffect(()=>{m.registerSuccess&&(h(ae({message:"Registration successful, you can login now",severity:"success"})),c.push(I.LOGIN))},[m.registerSuccess]),a(ft,{className:"mt-5",children:d(St,{children:[d(re,{margin:"dense",children:[a(ne,{htmlFor:"email",children:"Email Address"}),a(se,{id:"email",value:t,onChange:e})]}),d(re,{margin:"dense",children:[a(ne,{htmlFor:"username",children:"Username"}),a(se,{id:"username",value:r,onChange:s})]}),d(re,{margin:"dense",children:[a(ne,{htmlFor:"password",children:"Password"}),a(se,{type:"password",id:"password",value:n,onChange:o})]}),d(re,{margin:"dense",children:[a(ne,{htmlFor:"repeat-password",children:"Repeat Password"}),a(se,{type:"password",id:"repeat-password",value:i,onChange:l})]}),a(Gr,{loading:m.registerLoading,onClick:()=>{h(Ne({userName:r,password:n,confirmPassword:i,email:t}))},children:"Register"})]})})},nr=()=>{p.exports.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[])};const ls=()=>{const t=je(),[e,r]=p.exports.useState(null),[s,n]=p.exports.useState(!1);nr(),p.exports.useEffect(()=>{(async()=>{var l;n(!0);let i=await Ke(c=>c.get_Spot_And_Spot_Video_Stats(),void 0);n(!1),r((l=i.content)!=null?l:null)})()},[]);const o=i=>s?a(H,{size:20,color:"secondary"}):i!==0&&!i?"_":i;return d("div",{id:"main",className:"row mt-3",children:[a("div",{className:"col d-lg-block d-none",children:a("img",{className:"ms-3",src:"./skate.png",alt:"skate-person"})}),a("div",{className:"col d-flex align-items-center justify-content-center justify-content-lg-start",children:d("div",{className:" px-lg-0 px-3",children:[d("div",{className:"mb-5",children:[d("h1",{style:{color:t.palette.primary.main},children:[a(ve,{id:"title-svg"}),"SkateSpot"]}),a("p",{children:"This website serves as a database of skateboarding spots from all around the world."})]}),a("div",{children:d("p",{children:[a(ve,{className:"me-3"}),"View spots in form of list or map and add your own"]})}),a("div",{children:d("p",{children:[a(Wr,{className:"me-3"}),"Community spots verification system. Temp spots are verified based on number of likes and dislikes"]})}),a("div",{children:d("p",{children:[a(Ge,{className:"me-3"}),"Add videos from Instagram or YouTube to spots and see others' people clips"]})}),d("div",{id:"quick-actions",className:"mt-2",children:[a(N,{to:I.ADD_TEMP_SPOT,children:a(E,{className:"me-3",children:"Add Spot"})}),a(N,{to:I.MAP,children:a(E,{className:"me-3",children:"View Map"})}),a(N,{to:I.SPOTS,children:a(E,{className:"me-0",children:"View List"})})]}),d("div",{className:"mt-5",children:[a("p",{children:"Community currently added:"}),a("div",{style:{color:t.palette.secondary.main},className:"d-flex",children:!s&&!e?a("h3",{children:"Couldn't load the statistics"}):d(y,{children:[d("h3",{className:"me-4",children:[o(e==null?void 0:e.spotsCount)," Spots"]}),d("h3",{children:[o(e==null?void 0:e.spotVideosCount)," Spot Videos"]})]})})]})]})})]})},et=()=>{const t=_();p.exports.useEffect(()=>(t(U.clearFilters()),()=>{t(U.clearFilters())}),[])},cs=[{actions:Zn,listViewType:g.TEMP_SPOTS},{actions:me,listViewType:g.SPOTS},{actions:Kt,listViewType:g.SPOT_VIDEOS}],De=()=>{let t={};return cs.forEach(e=>{t[e.listViewType]={},Object.keys(Oe({})).forEach(r=>{t[e.listViewType][r]=e.actions[r]})}),t},sr=(t,e,r)=>{const s=_(),n=w(o=>o.filtersState.appliedFilter,We.isEqual);p.exports.useEffect(()=>{!t||e!==g.SPOTS&&n.sort.option===Y.VIDEOS||(s(De()[e].reset()),s(r?r():K()[e].fetchListItems()))},[n])},tt=(t,e)=>{const r=D[e].getSpecificState(F()),s=_(),[n,o]=p.exports.useState(0),i=()=>{o(document.documentElement.scrollTop/(document.documentElement.scrollHeight-document.documentElement.clientHeight))};p.exports.useEffect(()=>(window.addEventListener("scroll",i),()=>{window.removeEventListener("scroll",i)}),[]),p.exports.useEffect(()=>{!r.loading&&r.listWithCount.data.length<r.listWithCount.totalCount&&n>=.8&&n<=1&&s(t())},[n])},ds=t=>{const e=B(),r=_(),s=F();p.exports.useEffect(()=>{var o;r(me.reset());const n=(o=e.location.state)==null?void 0:o.spot;return n&&n.videosCount?r(me.setItems([n])):(async()=>{const i=await O(r,s.auth.content,(l,c)=>l.get_Spot(t));i.content&&r(me.setItems([i.content]))})(),()=>{r(me.reset())}},[])};const Re=t=>{var e;return a(Jr,{style:{cursor:"pointer",opacity:(e=t.opacity)!=null?e:.9},open:t.isOpen,onClose:()=>t.setIsOpen(!1),children:d(Hr,{id:"modal-skatespot",children:[a(ce,{onClick:()=>t.setIsOpen(!1),className:"d-flex ms-auto",children:a(Je,{})}),t.children]})})},or=t=>(je(),a(ce,{style:{position:"fixed",right:"1rem",bottom:"1rem",background:"#1f8dc0",opacity:.7},children:a(gt,{})})),us=({onClick:t})=>{const e=_();return a(E,{onClick:r=>{e(U.applyFilters()),t&&t()},className:"me-2",variant:"contained",color:"primary",children:"Apply"})},ms=({onClick:t})=>{const e=_();return a(E,{onClick:r=>{e(U.clearFilters()),t&&t()},variant:"contained",color:"secondary",children:"Clear"})},rt=({onApplyClick:t,onClearClick:e})=>d("div",{className:"mt-3",children:[a(us,{onClick:t}),a(ms,{onClick:e})]}),ar=({listViewType:t})=>{const e=w(s=>s.filtersState.filterInMaking.sort),r=_();return d("div",{className:"d-flex",children:[d(zr,{style:{fontSize:"1rem"},className:"me-2",onChange:s=>r(U.setSortingOption(s.target.value)),value:e.option,label:"Age",children:[a(Ie,{value:Y.CREATION_DATE,children:"Creation date"}),a(Ie,{value:Y.LIKES,children:"Likes"}),a(Ie,{value:Y.COMMENTS,children:"Comments"}),t===g.SPOTS&&a(Ie,{value:Y.VIDEOS,children:"Videos"})]}),d(E,{onClick:()=>r(U.setSortAscending(!e.ascending)),children:[e.ascending?a(Yr,{}):a(Kr,{}),a(qr,{})]})]})},ir=({listViewType:t,onApplyClick:e,onClearClick:r})=>d("div",{className:"ms-3",children:[a(ar,{listViewType:t}),a(rt,{onApplyClick:e,onClearClick:r})]}),hs=t=>{const[e,r]=p.exports.useState(!1);return d(y,{children:[a("div",{onClick:()=>r(!e),children:a(or,{})}),a(Re,{isOpen:e,setIsOpen:r,opacity:1,children:a("div",{className:"pb-3 pe-4",children:a(ir,{onApplyClick:()=>r(!1),onClearClick:()=>r(!1),listViewType:g.SPOT_VIDEOS})})})]})},ps=(t,e)=>{const[r,s,n]=M(""),o=_();return{comment:r,setComment:s,sendComment:()=>{!r||(o(e({listItemId:t,text:r})),n())}}},lr=({subjectId:t,parentId:e,likes:r,likeAction:s})=>{var m,h;const n=_(),o=F().auth,i=p.exports.useCallback(()=>r.reduce((u,f)=>u+Number(f.positive),0),[r]),l=()=>Xr.first(r.filter(u=>{var f;return u.userId===((f=o==null?void 0:o.content)==null?void 0:f.id)})),c=async u=>{const f=l();let S=!1;f&&f.positive===u&&(S=!0),n(s({isPositive:u,deletedLike:S,subjectId:t,parentId:e}))};return[{highlited:((m=l())==null?void 0:m.positive)===!0,onClick:async()=>await c(!0),isPositive:!0,likesCount:i()},{highlited:((h=l())==null?void 0:h.positive)===!1,onClick:async()=>await c(!1),isPositive:!1,likesCount:r.length-i()}]},Le={fontSize:"1.2rem"},fs=({likesCount:t,isPositive:e,onClick:r,highlited:s=!1})=>d("div",{style:{cursor:"pointer",color:"#e3e3e3"},onClick:async()=>await r(),className:"me-3",children:[d("span",{className:"me-0",children:[e?s?a(Ce,{sx:Le}):a(Qr,{sx:Le}):s?a(vt,{sx:Le}):a(Zr,{sx:Le})," "]}),a("span",{style:{color:"#dbd8d8",fontSize:"0.8rem"},className:"ms-0",children:t})]}),Ss=({commentId:t,likes:e,listItemId:r,likeAction:s})=>{const n=lr({subjectId:t,parentId:r,likes:e==null?void 0:e.map(o=>({positive:o.positive,userId:o.userId})),likeAction:s});return a("div",{className:"d-flex",children:n.map(o=>a(fs,X({},o),o.isPositive.toString()))})},cr=({isTooltipOpen:t,setIsTooltipOpen:e,children:r})=>a(It,{onClickAway:()=>e(!1),children:a("div",{children:a(en,{PopperProps:{disablePortal:!0},onClose:()=>e(!1),open:t,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:a(y,{children:r}),children:a(_e,{onClick:()=>{e(!t)},className:"ms-1 p-0",children:a(tn,{style:{color:"#d2d2d2",fontSize:"1.1rem",cursor:"pointer"}})})})})}),gs=t=>{const[e,r]=p.exports.useState(!1),s=_();return a(cr,{isTooltipOpen:e,setIsTooltipOpen:r,children:d("div",{children:[a(_e,{onClick:()=>{r(!1),t.setIsEditingComment(!0)},className:"p-1 me-2",children:a(rn,{style:{cursor:"pointer",fontSize:"1.1rem"}})}),a(_e,{onClick:()=>{s(t.deleteCommentAction({listItemId:t.listItemId,commentId:t.comment.id})),r(!1)},className:"p-1",children:a(Ct,{style:{cursor:"pointer",fontSize:"1.1rem"}})})]})})},vs=t=>{const[e,r]=M(t.comment.text),s=_();return a("div",{children:d("div",{className:"d-flex align-items-end mb-3",children:[a(j,{color:"primary",className:"me-2 flex-grow-1",variant:"standard",multiline:!0,maxRows:4,value:e,onChange:r,onKeyDown:n=>{n.key==="Enter"}}),a(nn,{className:"me-2",style:{cursor:"pointer"},color:e?"inherit":"disabled",onClick:()=>{t.setIsEditingComment(!1),e!==t.comment.text&&s(t.editCommentAction({listItemId:t.listItemId,commentId:t.comment.id,newText:e}))}}),a(sn,{onClick:()=>{t.setIsEditingComment(!1)},style:{cursor:"pointer"}})]})})},Is=t=>{var n,o;const e=F().auth,[r,s]=p.exports.useState(!1);return d("div",{className:"mb-4",children:[d("div",{className:"mb-0 d-flex align-items-center",children:[a("b",{className:"me-1",children:(n=t.comment.author)==null?void 0:n.userName}),a("span",{style:{color:"#8d8d8d",fontSize:"0.8rem"},children:d("span",{children:[new Date(t.comment.createdAt).toDateString(),new Date(t.comment.editedAt).getFullYear()!==1&&a("span",{className:"ms-1",children:"[Edited]"})]})}),((o=e.content)==null?void 0:o.id)===t.comment.authorId&&a(gs,{setIsEditingComment:s,comment:t.comment,listItemId:t.listItemId,deleteCommentAction:t.deleteCommentAction,editCommentAction:t.editCommentAction})]}),a("div",{className:"d-flex",children:r?a(vs,{comment:t.comment,listItemId:t.listItemId,editCommentAction:t.editCommentAction,setIsEditingComment:s}):a("p",{className:"mb-1",children:t.comment.text})}),a(Ss,{likeAction:t.likeAction,listItemId:t.listItemId,commentId:t.comment.id,likes:t.comment.likes||[]})]})},Cs=()=>a("div",{className:"mb-4",style:{color:"#949494"},children:a("p",{className:"m-0",children:"[This comments has been deleted by user.]"})}),_s=t=>{var n;const{comment:e,setComment:r,sendComment:s}=ps(t.listItemId,t.commentAction);return d("div",{className:"mt-4",children:[d("div",{className:"d-flex align-items-end mb-3",children:[a(j,{color:"primary",className:"me-2 flex-grow-1",variant:"standard",label:"Write something",multiline:!0,maxRows:4,value:e,onChange:r,onKeyDown:o=>{o.key==="Enter"&&s()}}),a(on,{onClick:s,style:{cursor:"pointer"},color:e?"inherit":"disabled"})]}),(n=t.comments)==null?void 0:n.map(o=>o.isDeleted?a(Cs,{},z()):a(Is,{deleteCommentAction:t.deleteCommentAction,editCommentAction:t.editCommentAction,listItemId:t.listItemId,comment:o,likeAction:t.likeAction},z()))]})},ie=t=>{const e=K()[t.listViewType];return a(_s,{listItemId:t.listItemId,comments:t.comments,commentAction:e.comment,likeAction:e.likeComment,deleteCommentAction:e.deleteComment,editCommentAction:e.editComment})},Ts=({commentsCount:t,onClick:e})=>a("div",{children:d(E,{onClick:e,variant:"outlined",size:"small",className:"me-1",children:[a(an,{className:"me-1"}),a("span",{children:t||"0"})]})});function ys({likesCount:t,isPositive:e,onClick:r,highlited:s=!1}){return d(E,{onClick:async()=>await r(),size:"small",variant:s?"contained":"outlined",color:e?"success":"warning",className:"me-1",children:[e?a(Ce,{}):a(vt,{})," ",a("span",{className:"ms-1",children:t})]})}function Es({likes:t,listItemId:e,likeAction:r}){const s=lr({subjectId:e,parentId:e,likes:t,likeAction:r});return a("div",{className:"d-flex",children:s.map(n=>a(ys,X({},n),n.isPositive.toString()))})}const dr=({fontSize:t="1rem",color:e,className:r,children:s})=>a("i",{className:`fa fa-map-marker ${r}`,style:{fontSize:t,color:e},children:s}),pe=({position:t,size:e=30,color:r="rgb(0,50,255)",text:s,flyToMarkerZoom:n=null,animateFly:o=!0,onMouseEnter:i,onMouseLeave:l,onClick:c,children:m})=>{const h=Te();return p.exports.useEffect(()=>{n!=null&&(o?h.flyTo(t,n):h.setView(t,n))},[t]),a(ln,{eventHandlers:{mouseover:u=>i&&i(u),mouseout:u=>l&&l(u),click:u=>c&&c(u)},position:t,icon:new _t.exports.DivIcon({html:Tt.exports.renderToStaticMarkup(a(dr,{fontSize:e.toString()+"px",color:r,children:s})),iconSize:[e/1.75,e],iconAnchor:[e/1.75/2,e]}),children:m})},nt=({children:t,whenReady:e,style:r=null})=>d(cn,{style:r||{height:"60vh"},center:{lat:12.12,lng:12.12},zoom:2,whenReady:()=>e&&e(),children:[a(dn,{attribution:'\xA9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t]}),ws=({address:t})=>d("div",{children:[a(nt,{children:a(pe,{flyToMarkerZoom:16,animateFly:!1,position:t.coords})}),d("p",{className:"mt-2",children:[t.country," ",t.city," ",t.streetName&&","," ",t.streetName," ",t.streetName&&t.streetNumber]})]}),ks=t=>a(Re,{isOpen:t.isMapModalOpen,setIsOpen:t.setIsMapModalOpen,children:a(ws,{address:t.address})}),bs=({setIsOpen:t,disabled:e,children:r})=>a("div",{children:a(E,{disabled:e!=null?e:!1,onClick:()=>t(!0),size:"small",variant:"outlined",children:r})}),Ns=t=>a(bs,{disabled:t.disabled,setIsOpen:t.setIsMapModalOpen,children:a(yt,{})}),ur=t=>{const[e,r]=p.exports.useState(!1);return d("div",{className:"d-flex",children:[t.children,!t.removeLikesBtn&&d("div",{className:"order-1",children:[a(Es,{listItemId:t.listItemId,likes:t.likes,likeAction:t.likeAction})," "]}),!t.removeCommentsBtn&&a("div",{className:"order-2",children:a(Ts,{onClick:t.onCommentBtnClick,commentsCount:t.commentsCount})}),!t.removeMapModalBtn&&a("div",{className:"order-3",children:a(Ns,{disabled:!t.address,setIsMapModalOpen:r})}),t.address&&a(ks,{isMapModalOpen:e,setIsMapModalOpen:r,address:t.address})]})},mr=t=>{const e=w(o=>o.auth.content),r=_(),[s,n]=p.exports.useState(!1);return t.authorId===(e==null?void 0:e.id)?a("div",{style:{position:"relative"},children:a(cr,{isTooltipOpen:s,setIsTooltipOpen:n,children:a("div",{children:a(_e,{onClick:()=>{r(K()[t.listViewType].deleteListItem({listItemId:t.listItemId,deleteFunc:t.deleteFunc})),n(!1)},className:"p-1",children:a(Ct,{style:{cursor:"pointer",fontSize:"1.1rem"}})})})})}):a(y,{})};function hr({author:t}){return d("div",{className:"mt-2 mt-sm-0",children:[a(un,{})," ",t==null?void 0:t.userName]})}const st=t=>a("iframe",{style:t.style||{height:600},title:"Instagram video",src:`https://www.instagram.com/p/${t.videoId}/embed`,frameBorder:"0",scrolling:"no"}),ot=t=>a("iframe",{style:t.style||{width:"100%",height:400},src:`https://www.youtube.com/embed/${t.videoId}`,title:"YouTube video player",frameBorder:0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),xs=G.memo(({spotVideo:t})=>{var s;const[e,r]=p.exports.useState(!1);return d("div",{className:"mb-4",children:[d("div",{children:[a("div",{className:"text-end mb-2",children:a(mr,{authorId:t.author.id,listItemId:t.id,listViewType:g.SPOT_VIDEOS,deleteFunc:(n,o)=>n.delete_Spot_Video(t.id,o)})}),t.platformType===Z.Instagram?a(st,{videoId:t.embedId}):a(ot,{videoId:t.embedId})]}),a("p",{children:t.description}),d("div",{className:"d-flex flex-wrap justify-content-between mt-2",children:[a(ur,{listItemId:t.id,likes:t.likes,likeAction:Ze,onCommentBtnClick:()=>r(!e),commentsCount:((s=t==null?void 0:t.comments)==null?void 0:s.length)||0,removeMapModalBtn:!0}),a(hr,{author:t.author})]}),e&&ie({listItemId:t.id,comments:t.comments,listViewType:g.SPOT_VIDEOS}),a("hr",{})]})},(t,e)=>JSON.stringify({likes:t.spotVideo.likes,comments:t.spotVideo.comments})===JSON.stringify({likes:e.spotVideo.likes,comments:e.spotVideo.comments}));function pr({surfaceScore:t,style:e}){return a(Et,{className:"me-1 mt-1",style:e,variant:"outlined",label:`${t}/10`,icon:a(mn,{style:{color:(e==null?void 0:e.color)||"inherit"}})})}function fr({obstacles:t,style:e}){return a(y,{children:t==null?void 0:t.map(r=>a(hn,{style:e,label:r,variant:"outlined",className:"me-1 mt-1"},z()))})}const Os=({surfaceScore:t,obstacles:e})=>a("div",{children:d("div",{className:"d-flex flex-wrap",children:[a(pr,{surfaceScore:t}),a(fr,{obstacles:e})]})}),fe=t=>d("div",{className:"mt-2",children:[t.surfaceScore&&t.obstacles&&a(Os,{surfaceScore:t.surfaceScore,obstacles:t.obstacles}),d("div",{className:"d-flex flex-wrap justify-content-between mt-2",children:[a(ur,{likes:t.likes,listItemId:t.listItemId,likeAction:t.likeAction,commentsCount:t.commentsCount,onCommentBtnClick:t.onCommentBtnClick,address:t.address,removeLikesBtn:t.removeLikesBtn,removeCommentsBtn:t.removeCommentsBtn,removeMapModalBtn:t.removeMapModalBtn,children:t.customActions}),a(hr,{author:t.author})]})]}),Se=t=>d("div",{className:"d-flex mb-1 justify-content-between",children:[t.children,a(mr,{authorId:t.authorId,listItemId:t.listItemId,listViewType:t.listViewType,deleteFunc:t.deleteFunc})]}),Fe=({images:t,height:e=600,width:r=800})=>t&&t.length?a("div",{style:{background:"black"},children:a(pn,{showThumbnails:!1,showPlayButton:!1,items:t.map(s=>({original:s.base64,originalWidth:r,originalHeight:e,fullscreen:s.base64}))})}):a("div",{children:"No images were added for this spot."}),Sr=()=>{const[t,e]=p.exports.useState({width:void 0,height:void 0});return p.exports.useEffect(()=>{const r=()=>{e({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[]),t},As=t=>{const[e,r,s]=M(""),[n,o,i]=M(""),[l,c]=p.exports.useState(null),m=_(),h=F(),[u,f]=p.exports.useState(!1),S=je(),v=Sr(),k=()=>{c(null);let T="";try{e.indexOf("youtube")!==-1?(T=b(e),T&&c({type:Z.YouTube,id:T})):e.indexOf("instagram")!==-1&&(T=P(e),T&&c({type:Z.Instagram,id:T}))}catch{$()}finally{T||$()}},b=T=>{let V=T.slice(T.indexOf("?v=")+3);return V.indexOf("/")!==-1&&(V=V.slice(0,V.indexOf("/"))),V},P=T=>{let V=T.indexOf("/p/")!==-1?T.indexOf("/p/")+3:T.indexOf("/tv/")+4,q=T.slice(V);return q.indexOf("/")!==-1&&(q=q.slice(0,q.indexOf("/"))),q},$=()=>{m(ae({message:"The url is invalid.",severity:"warning"}))},le=async()=>{f(!0);const T=await O(m,h.auth.content,(V,q)=>V.add_Spot_Video(t.spotName,q,{description:n,embedId:l.id,platformType:l.type}));return f(!1),{resContent:T.content}},$e=async()=>{const{resContent:T}=await le();!T||(m(Kt.prependVideo(T)),s(),i(),c(null),t.setIsOpen(!1))};return a(Re,{isOpen:t.isOpen,setIsOpen:t.setIsOpen,children:d("div",{className:"p-3",children:[d("div",{className:"d-flex",children:[a("div",{className:"col me-2",children:a(j,{value:e,onChange:r,fullWidth:!0,label:"Copy and paste link to a Instagram or YouTube video ",variant:"standard"})}),a(E,{onClick:k,size:"small",variant:"contained",children:"Load"})]}),l&&d("div",{className:"mt-4",style:{fontSize:"1.10rem"},children:[a("p",{children:"This is the preview of the video. If you can see it you are good to go otherwise please insert correct link."}),a("div",{children:l.type===Z.Instagram?a("div",{style:{height:v.width&&v.width<=S.breakpoints.values.sm?200:"auto",overflowY:"auto"},children:a(st,{videoId:l.id})}):a(ot,{style:v.width&&v.width<=S.breakpoints.values.sm?{height:200}:void 0,videoId:l.id})}),a("div",{className:"col mt-2 mb-3",children:a(j,{value:n,onChange:o,rows:3,multiline:!0,fullWidth:!0,variant:"standard",label:"Description"})})]}),d("div",{className:"mt-2",children:[a(E,{disabled:!l,className:"me-2",color:"primary",variant:"contained",onClick:async()=>{await $e()},children:u?a(H,{}):"Submit"}),a(E,{onClick:()=>{c(null),s(),i(),t.setIsOpen(!1)},color:"warning",variant:"contained",children:"Cancel"})]})]})})},Ps=t=>a("div",{className:"me-1",children:a(He,{size:"small",onClick:()=>t.setIsAddSpotVideoModalOpen(!0),variant:"outlined",children:a(fn,{})})}),Ms=G.memo(({spot:t})=>{var o;const[e,r]=p.exports.useState(!1),[s,n]=p.exports.useState(!1);return d("div",{className:"mb-4",children:[a(Se,{authorId:t.author.id,listItemId:t.id,listViewType:g.SPOTS,deleteFunc:(i,l)=>i.delete_Spot(t.id,l),children:a("h4",{children:t.name})}),a("p",{children:t.description}),a(Fe,{images:t.images}),a(fe,{commentsCount:((o=t==null?void 0:t.comments)==null?void 0:o.length)||0,address:t.address,surfaceScore:t.surfaceScore,obstacles:t.obstacles,author:t.author,onCommentBtnClick:()=>r(!e),listItemId:t.id,likes:t.likes,likeAction:xe,customActions:a("div",{className:"order-3",children:a(Ps,{setIsAddSpotVideoModalOpen:n})})}),e&&ie({listItemId:t.id,comments:t.comments,listViewType:g.SPOTS}),a("hr",{}),a(As,{isOpen:s,setIsOpen:n,spotName:t.name})]})},(t,e)=>JSON.stringify({likes:t.spot.likes,comments:t.spot.comments})===JSON.stringify({likes:e.spot.likes,comments:e.spot.comments})),Ds=()=>{var m,h,u;const t=F(),e=_(),r=w(f=>f.filtersState.appliedFilter.sort,We.isEqual),n=B().location.pathname.split("/"),o=I.SPOTS.replace("/",""),i=n[n.indexOf(o)+1];ds(i);const l=(m=t.spotsState.listWithCount.data)==null?void 0:m[0],c=()=>Xn({fetchFunc:(f,S,v)=>f.get_Spot_Videos_Of_Spot(i,S,v,r.option,r.ascending,void 0)});return p.exports.useEffect(()=>()=>{e(De().spotVideos.reset())},[]),tt(c,g.SPOT_VIDEOS),et(),sr(!0,g.SPOT_VIDEOS,c),d("div",{className:"mt-5",style:{fontSize:"1rem"},children:[d("div",{className:"row mt-5 mx-0",children:[a("div",{className:"col-3 d-none d-lg-block"}),a("div",{className:"col-12 col-lg-6 justify-content-center d-flex",children:l&&a(Ms,{spot:l})})]}),d("div",{className:"row mx-0",children:[a("div",{className:"col-3 d-none d-lg-block",children:a(ir,{listViewType:g.SPOT_VIDEOS})}),d("div",{style:{position:"relative"},className:"col-12 col-lg-6 d-flex flex-column",children:[a("h4",{className:"mb-5",children:"Videos"}),d(y,{children:[(u=(h=t.spotVideosState.listWithCount)==null?void 0:h.data)==null?void 0:u.map(f=>a(xs,{spotVideo:f},f.createdAt)),a("div",{className:"d-block d-lg-none",children:a(hs,{})})]}),t.spotVideosState.loading&&a(H,{className:"align-self-center",color:"secondary"})]})]})]})},gr=()=>{const t=w(o=>o.filtersState.filterInMaking.filter.surfaceScore),e=_(),[r,s]=p.exports.useState(t.score),n=o=>{o>10?o=10:o<1&&(o=1),e(U.setSurfaceScore(o)),s(o)};return d("div",{className:"mt-4",children:[a("p",{className:"m-0",children:"Surface score"}),d("div",{className:"d-flex align-items-center",children:[a(Sn,{onChange:()=>e(U.toggleSurfaceScore()),checked:t.enabled}),a(E,{disabled:!t.enabled,className:"py-0",onClick:()=>e(U.toggleSurfaceScoreGt()),style:{fontSize:"1.2rem"},children:t.gtFiltering?"\u2265":"<"}),a(wt,{disabled:!t.enabled,min:1,max:10,onChangeCommitted:o=>n(r),onChange:(o,i)=>s(i),value:r}),a(j,{disabled:!t.enabled,variant:"standard",className:"ms-3",value:r,size:"small",onChange:o=>n(Number(o.target.value)),type:"number",InputProps:{inputProps:{max:10,min:1}}})]})]})},vr=()=>{const t=w(r=>r.filtersState.filterInMaking.filter.tags.tags),e=_();return d("div",{className:"mt-4",children:[a("p",{className:"m-0",children:"Tags"}),a(Vt,{tags:t,setTags:r=>{e(U.setTags(r))}})]})},Ir=({listViewType:t,onApplyClick:e,onClearClick:r})=>d("div",{className:"ms-3",children:[a(ar,{listViewType:t}),a(gr,{}),a(vr,{}),a(rt,{onApplyClick:e,onClearClick:r})]}),Rs=t=>{const[e,r]=p.exports.useState(!1);return d(y,{children:[a("div",{onClick:()=>r(!e),children:a(or,{})}),a(Re,{isOpen:e,setIsOpen:r,opacity:1,children:a("div",{className:"pb-3 pe-4",children:a(Ir,{onApplyClick:()=>r(!1),onClearClick:()=>r(!1),listViewType:t.listViewType})})})]})},Cr=t=>{t.history.push(I.SPOT_DEDICATED_PAGE.replace(Ue.SPOT_NAME,t.spot.name),{spot:t.spot})},at=({spotName:t})=>a(N,{style:{textDecoration:"none",color:"#9abeff"},to:I.SPOT_DEDICATED_PAGE.replace(Ue.SPOT_NAME,t),children:a("h4",{children:t})}),_r=t=>a("div",{children:d(He,{onClick:t.onClick,variant:"outlined",size:"small",className:"me-1",children:[a(Ge,{className:"me-1"}),a("span",{children:t.videosCount||"0"})]})}),Tr=G.memo(({spot:t})=>{var n;const[e,r]=p.exports.useState(!1),s=B();return d("div",{className:"mb-4",children:[a(Se,{authorId:t.author.id,listItemId:t.id,listViewType:g.SPOTS,deleteFunc:(o,i)=>o.delete_Spot(t.id,i),children:a(at,{spotName:t.name})}),a("p",{children:t.description}),a(Fe,{images:t.images}),a(fe,{commentsCount:((n=t==null?void 0:t.comments)==null?void 0:n.length)||0,address:t.address,surfaceScore:t.surfaceScore,obstacles:t.obstacles,author:t.author,onCommentBtnClick:()=>r(!e),listItemId:t.id,likes:t.likes,likeAction:xe,customActions:a("div",{className:"order-3",children:a(_r,{videosCount:t.videosCount,onClick:()=>Cr({history:s,spot:t})})})}),e&&ie({listItemId:t.id,comments:t.comments,listViewType:g.SPOTS}),a("hr",{})]})},(t,e)=>JSON.stringify({likes:t.spot.likes,comments:t.spot.comments})===JSON.stringify({likes:e.spot.likes,comments:e.spot.comments})),yr=G.memo(({spotVideo:t})=>{var s,n,o,i,l;const[e,r]=p.exports.useState(!1);return d("div",{className:"mb-4",children:[a(Se,{authorId:t.author.id,listItemId:t.id,listViewType:g.SPOT_VIDEOS,deleteFunc:(c,m)=>c.delete_Spot_Video(t.id,m),children:t.spot?a(at,{spotName:(s=t==null?void 0:t.spot)==null?void 0:s.name}):a("h4",{style:{color:"rgb(148,148,148)"},children:"[Spot deleted]"})}),t.platformType===Z.Instagram?a(st,{videoId:t.embedId}):a(ot,{videoId:t.embedId}),a("p",{children:t.description}),a(fe,{listItemId:t.id,likes:t.likes,likeAction:Ze,onCommentBtnClick:()=>r(!e),commentsCount:((n=t==null?void 0:t.comments)==null?void 0:n.length)||0,surfaceScore:(o=t.spot)==null?void 0:o.surfaceScore,obstacles:(i=t.spot)==null?void 0:i.obstacles,address:(l=t.spot)==null?void 0:l.address,author:t==null?void 0:t.author}),e&&ie({listItemId:t.id,comments:t.comments,listViewType:g.SPOT_VIDEOS}),a("hr",{})]})},(t,e)=>JSON.stringify({likes:t.spotVideo.likes,comments:t.spotVideo.comments})===JSON.stringify({likes:e.spotVideo.likes,comments:e.spotVideo.comments})),Er=({isPositive:t,deletedLike:e,subjectId:r})=>qt({tempSpotId:r,isReal:t,deletedVote:e}),Ls=G.memo(({tempSpot:t})=>{var s,n;const[e,r]=p.exports.useState(!1);return d("div",{className:"mb-4",children:[a(Se,{authorId:t.author.id,listItemId:t.id,listViewType:g.TEMP_SPOTS,deleteFunc:(o,i)=>o.delete_Temp_Spot(t.id,i),children:a("h4",{children:t.name})}),a("p",{children:t.description}),a(Fe,{images:t.images}),a(fe,{listItemId:t.id,commentsCount:((n=(s=t.verificationProcess)==null?void 0:s.discussion)==null?void 0:n.length)||0,address:t.address,surfaceScore:t.surfaceScore,obstacles:t.obstacles,author:t.author,onCommentBtnClick:()=>r(!e),likeAction:Er,likes:t.verificationProcess.votes.map(o=>({userId:o.voterId,positive:o.isReal}))}),e&&ie({listItemId:t.id,comments:t.verificationProcess.discussion,listViewType:g.TEMP_SPOTS}),a("hr",{})]})},(t,e)=>JSON.stringify(t.tempSpot.verificationProcess)===JSON.stringify(e.tempSpot.verificationProcess)),it=({listViewType:t})=>{const e=_(),[r,s]=p.exports.useState(!1);p.exports.useEffect(()=>{s(!0),e(K()[t].fetchListItems())},[]),tt(K()[t].fetchListItems,t),et(),sr(r,t);const n=w(i=>i[t+"State"]),o=i=>{switch(t){case g.SPOTS:return a(Tr,{spot:i},i.id);case g.SPOT_VIDEOS:return a(yr,{spotVideo:i},i.id);case g.TEMP_SPOTS:return a(Ls,{tempSpot:i},i.id)}};return a(y,{children:d("div",{className:"row m-0 mt-5",style:{fontSize:"1rem"},children:[a("div",{className:"col-3",children:a("div",{className:"col-3 d-none d-lg-block",style:{position:"fixed"},children:a(Ir,{listViewType:t})})}),a("div",{className:"col-1 d-none d-lg-block"}),d("div",{className:"col-12 col-lg-6 justify-content-center d-flex flex-column",children:[!n.loading&&!n.error&&n.listWithCount.data.length===0&&a("p",{children:"There is nothing to view here \u{1F625}"}),d(y,{children:[n.listWithCount.data.map(i=>o(i)),a("div",{className:"d-block d-lg-none",children:a(Rs,{listViewType:t})})]}),n.loading&&a(H,{color:"secondary"})]})]})})},W={tempSpot:{color:"#ff640a",name:"Temp Spot"},spot:{color:"#00b360",name:"Spot"},selected:{color:"#1f4eb9",name:"Selected"}},Fs=({displaySelectedMarkerLegend:t,map:e})=>{p.exports.useEffect(()=>{const r=new _t.exports.Control({position:"bottomleft"});r.onAdd=()=>{const s=kt.DomUtil.create("div");return s.innerHTML=Tt.exports.renderToStaticMarkup(a("div",{className:"p-1",style:{background:"rgba(255,255,255, 0.5)",color:"black",marginBottom:"0rem"},children:a("ul",{className:"p-0 m-0",style:{listStyleType:"none"},children:Object.keys(W).filter(n=>!(n==="selected"&&!t)).map(n=>d("li",{className:"mb-1",children:[a(dr,{className:"me-1",fontSize:"1.5rem",color:W[n].color}),a("span",{children:W[n].name})]},n))})})),s},e.addControl(r)},[])},Us=t=>{const e=w(r=>r.filtersState.appliedFilter,We.isEqual);p.exports.useEffect(()=>{t()},[e])},wr=t=>a(pe,{color:t.color?t.color:t.spotMarkerData.isTempSpot?W.tempSpot.color:W.spot.color,position:t.spotMarkerData.address.coords,onClick:t.onClick,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,size:t.size,children:t.children}),kr=({displaySelectedMarkerLegend:t=!1})=>(Fs({displaySelectedMarkerLegend:t,map:Te()}),a(y,{})),$s=({ref:t})=>{const e=Te();p.exports.useEffect(()=>{if(!!t.current)return kt.DomEvent.disableScrollPropagation(t.current),t.current.onmouseenter=r=>e.dragging.disable(),t.current.onmouseleave=r=>e.dragging.enable(),()=>{e.dragging.enable()}},[t])},br=({outsideOfIds:t,funcToExecute:e})=>{bt({click(r){r.originalEvent.path.map(s=>s.id).some(s=>t.indexOf(s)!==-1)||e(r)}})},lt=({hide:t,style:e,children:r,className:s,setRefCurrent:n})=>{var i;const o=p.exports.useRef(null);return $s({ref:o}),br({outsideOfIds:t?[t.mainContainerId,...t.dontHideOnIds]:[],funcToExecute:t?l=>t.funcToHide(l):()=>{}}),p.exports.useEffect(()=>{o.current&&n&&n(o.current)},[o]),a("div",{style:e,ref:o,id:(i=t==null?void 0:t.mainContainerId)!=null?i:z(),className:"on-top-of-map "+(s!=null?s:""),children:r})},ct="filter-btn",Vs=()=>{const t=_(),e=w(r=>r.mapSpotsState.isFilterModalOpen);return a(ce,{onClick:r=>{t(te.toggleFilterModal(!e))},className:"on-top-of-map ms-2",id:ct,children:a(gt,{})})},dt="filters-modal",Bs=()=>{const t=_();return br({outsideOfIds:[dt,ct,Nr],funcToExecute:e=>{t(te.toggleFilterModal(!1))}}),d("div",{className:"pt-2 pb-4 px-4 mt-2",id:dt,children:[a("div",{className:"d-flex justify-content-end",children:a(ce,{onClick:e=>t(te.toggleFilterModal(!1)),className:"m-0 p-0",children:a(Je,{})})}),a(gr,{}),a(vr,{}),a(rt,{})]})},js=({marker:t})=>a(gn,{className:"leaflet-tooltip",direction:"top",offset:[0,-30],children:d("div",{style:{color:"white"},children:[a("p",{children:t.name}),d("div",{className:"d-flex",children:[a(pr,{style:{fontSize:"0.7rem"},surfaceScore:t.surfaceScore}),a(fr,{style:{fontSize:"0.7rem",padding:0},obstacles:t.obstacles})]})]})}),Gs=t=>{var e;return{address:t.address,author:t.author,comments:t.verificationProcess.discussion,createdAt:t.createdAt,description:t.description,id:t.id,images:t.images,likes:(e=t.verificationProcess.votes)==null?void 0:e.map(r=>({positive:r.isReal,userId:r.voterId})),name:t.name,obstacles:t.obstacles,surfaceScore:t.surfaceScore,videosCount:0}};const Ws=()=>{const t=_(),[e,r]=Nt(),s=p.exports.useRef(null),[n,o]=p.exports.useState(!1),i=w(f=>f.mapSpotsState),l=w(f=>{var S;return(S=f.spotsState.listWithCount.data)==null?void 0:S[0]}),c=w(f=>{var S;return(S=f.tempSpotsState.listWithCount.data)==null?void 0:S[0]});p.exports.useEffect(()=>{s.current&&e(s.current)},[s]);const m=B(),h=i.currentSpotInModal?!!i.currentSpotInModal.verificationProcess:!1,u=l||c?h?Gs(c):l:null;return p.exports.useEffect(()=>{const f=De()[h?g.TEMP_SPOTS:g.SPOTS];return i.currentSpotInModal&&t(f.setItems([i.currentSpotInModal])),()=>{t(f.reset())}},[i.currentSpotInModal]),d(y,{children:[i.loadingSpotInModal&&a(H,{size:72,className:"align-self-center",style:{marginTop:"auto",marginBottom:"auto"}}),u&&!i.loadingSpotInModal&&d("div",{style:{position:"relative"},children:[u.images&&u.images.length>0&&a("div",{style:{backgroundColor:"black"},children:a(Fe,{images:u.images,height:300,width:r.width})}),d("div",{className:`${u.images&&u.images.length?"mt-3":"mt-5"} ms-3`,children:[a(Se,{authorId:u.author.id,listItemId:u.id,listViewType:g.TEMP_SPOTS,deleteFunc:(f,S)=>h?f.delete_Temp_Spot(u.id,S):f.delete_Spot(u.id,S),children:h?a("h4",{children:u.name}):a(at,{spotName:u.name})}),a("p",{children:u.description}),a(fe,{likes:u.likes,listItemId:u.id,likeAction:h?Er:xe,surfaceScore:u.surfaceScore,obstacles:u.obstacles,onCommentBtnClick:()=>o(!n),commentsCount:u.comments.length,removeMapModalBtn:!0,author:u.author,customActions:h?void 0:a("div",{className:"order-3",children:a(_r,{videosCount:u.videosCount,onClick:()=>Cr({history:m,spot:u})})})}),n&&ie({listItemId:u.id,comments:u.comments,listViewType:h?g.TEMP_SPOTS:g.SPOTS})]}),a("div",{style:{position:"absolute",left:0,top:0},children:a(ce,{onClick:f=>t(te.toggleSpotModal(!1)),className:"mt-2 ms-2 p-0",children:a(Je,{style:{filter:"drop-shadow(1px 1px 2px rgb(0 0 0 / 0.6))"}})})})]})]})},Nr="spot-preview-modal",Js=()=>{const t=_(),e=w(l=>l.mapSpotsState),[r,s]=p.exports.useState(z());et(),Us(()=>t(he())),nr(),p.exports.useEffect(()=>{s(z())},[e.markersData.length]);const[n,o]=Nt();p.exports.useEffect(()=>(document.body.style.marginTop="0rem",()=>{document.body.style.marginTop="4rem"}),[]);const i=l=>{var c;return((c=e.currentSpotInModal)==null?void 0:c.name)==l&&e.isSpotModalOpen};return a("div",{style:{height:"100%",position:"relative",paddingTop:"4rem"},children:d(nt,{style:{height:"100%"},children:[a(lt,{setRefCurrent:n,style:{backgroundColor:"transparent",top:"15%"},children:a(Vs,{})}),a(lt,{className:"col-12 col-md-5 col-xl-3",style:{top:`calc(15% + ${o.height}px + 1rem)`},children:e.isFilterModalOpen&&a(Bs,{})}),e.isSpotModalOpen&&a(lt,{className:"col-12 col-md-5 col-xl-4 d-flex flex-column",hide:{mainContainerId:Nr,dontHideOnIds:[ct,dt],funcToHide:()=>t(te.toggleSpotModal(!1))},children:a(Ws,{})}),a(xt,{showCoverageOnHover:!1,children:e.markersData.length&&e.markersData.map(l=>a(wr,{spotMarkerData:l,color:i(l.name)?W.selected.color:void 0,size:i(l.name)?35:void 0,onClick:()=>{var c;((c=e.currentSpotInModal)==null?void 0:c.id)===l.id&&e.isSpotModalOpen?t(te.toggleSpotModal(!1)):(t(Pe({markerData:l})),t(te.toggleSpotModal(!0)))},children:a(js,{marker:l})},l.id))},r),a(kr,{displaySelectedMarkerLegend:!0})]})})},Hs=async(t,e,r,s,n,o,i)=>await(async()=>{var m,h,u,f,S;let c={name:e,description:r,address:(s==null?void 0:s.coords)?{streetName:(m=s==null?void 0:s.address)==null?void 0:m.streetName,streetNumber:(h=s==null?void 0:s.address)==null?void 0:h.streetNumber,postCode:(u=s==null?void 0:s.address)==null?void 0:u.postCode,city:(f=s==null?void 0:s.address)==null?void 0:f.city,country:(S=s==null?void 0:s.address)==null?void 0:S.country,coords:s==null?void 0:s.coords}:void 0,surfaceScore:n,obstacles:o.filter(v=>v.isSelected).map(v=>R[v.obstacleType]),base64Images:t};return await Ke((v,k)=>v.create_Spot(k,c),i.content)})(),zs=t=>d("div",{children:[d("p",{children:[t.country," ",t.city]}),d("p",{children:[t.streetName," ",t.streetName&&t.streetNumber]})]}),Ys=({children:t,displaySelectedMarkerLegend:e=!1})=>{const r=_(),s=w(n=>n.mapSpotsState.markersData);return p.exports.useEffect(()=>{r(he())},[]),a("div",{children:d(nt,{children:[a(xt,{showCoverageOnHover:!1,children:s.length&&s.map(n=>a(wr,{spotMarkerData:n,children:d(vn,{children:[a("b",{children:n.name}),zs(n.address)]})},n.name))}),t,a(kr,{displaySelectedMarkerLegend:e})]})})},xr=t=>({city:t.address.city||t.address.town||t.address.village,country:t.address.country,postCode:t.address.postcode,streetName:t.address.road,streetNumber:t.address.house_number,display:t.display_name});class ge{constructor(e,r){L(this,"coords");L(this,"address");this.coords=e,this.address=r}getKey(e){return`${this.coords.lat}${this.coords.lng}-${e}`}toString(){var e,r;return(r=(e=this.address)==null?void 0:e.display)!=null?r:""}static FromGeocode(e){return new ge({lat:e.lat,lng:e.lon},xr(e))}}const Ks=async t=>{const e=`https://nominatim.openstreetmap.org/reverse?lat=${t.lat}&lon=${t.lng}&format=json`;let r;try{const n=await(await fetch(e)).json();n.address&&(r=xr(n))}catch(s){console.log(s)}finally{return new ge(t,r)}},qs=({setLocation:t,showClickMarker:e,setShowClickMarker:r})=>{const[s,n]=p.exports.useState(null);return bt({click(o){n(o.latlng),r(!0),Ks(o.latlng).then(i=>{t(i)})}}),s&&e?a(pe,{color:W.selected.color,position:s}):null},Xs=({setGeocodeLocations:t,setLocation:e,setShowClickMarker:r,setShowMore:s})=>{const[n,o]=M("");_();const i=async()=>{if(s(!1),!n)return;const l=await fetch(`https://nominatim.openstreetmap.org/search?q=
        ${encodeURIComponent(n)}&format=json&addressdetails=1`);if(l.status!==200)return;const c=await l.json()||[];t(c.map(m=>ge.FromGeocode(m))),e(c.length>0?ge.FromGeocode(c[0]):null),r(!1)};return d(y,{children:[a("div",{children:"Search by address"}),d("div",{className:"d-flex mb-2 align-items-end",children:[a(j,{className:"me-1",value:n,onChange:o,type:"text",label:"Address",variant:"standard",onKeyDown:l=>{l.key==="Enter"&&i()}}),a(E,{style:{height:"100%"},size:"small",variant:"contained",className:"px-2 py-2",onClick:i,children:"Search"})]})]})},Qs=t=>{let e=[[91,91],[-91,-91]];return t.forEach(r=>{r.coords.lat<e[0][0]&&(e[0][0]=r.coords.lat),r.coords.lat>e[1][0]&&(e[1][0]=r.coords.lat),r.coords.lng<e[0][1]&&(e[0][1]=r.coords.lng),r.coords.lng>e[1][1]&&(e[1][1]=r.coords.lng)}),e},Zs=({showMore:t,fromGeocodeLocations:e,setHoveredAddress:r,hoveredAddress:s,pickAddress:n,location:o})=>{const i=Te();return p.exports.useEffect(()=>{t&&e&&i.fitBounds(Qs(e),{animate:!0,duration:1.5,padding:[4,4]})},[t,e]),a("div",{children:(()=>t?e==null?void 0:e.map((c,m)=>a(pe,{size:s===m?40:30,text:`${(m+1).toString()}`,color:W.selected.color,position:c.coords,onMouseEnter:u=>r(m),onMouseLeave:u=>r(null),onClick:u=>n(m)},c.getKey(m))):a(pe,{color:W.selected.color,position:o.coords,flyToMarkerZoom:12}))()})},ut=(t,e)=>{const[r,s]=p.exports.useState("");return p.exports.useEffect(()=>{const o=t();if(s(o),o){const i=setTimeout(()=>s(""),1e4);return()=>clearTimeout(i)}},e),()=>{if(r)return a("p",{className:"text-danger text-sm",children:r})}},eo=({fromGeocodeLocations:t,showMore:e,setShowMore:r,hoveredAddress:s,setHoveredAddress:n,location:o,pickAddress:i})=>{const l=ut(()=>o?"":"No address found",[o]),c=h=>{const u=Number(h.currentTarget.innerText.substr(0,h.currentTarget.innerText.indexOf(".")))-1;n(u)};return a("div",{children:(()=>o?e?t.map((h,u)=>a("div",{children:a(E,{style:s===u?{backgroundColor:"#363636"}:void 0,onClick:f=>i(u),onMouseEnter:c,onMouseLeave:()=>n(null),children:`${u+1}. ${h.toString()}`})},h.getKey(u))):d("div",{children:[a("span",{children:o.toString()}),a(E,{onClick:()=>r(!0),children:"Show more"})]}):l())()})},to=(t,e)=>{const[r,s]=p.exports.useState("");return p.exports.useEffect(()=>{const o=t();s(o)},e),()=>{if(r)return a("p",{className:"text-info text-sm",children:r})}},ro=({location:t})=>{const e=to(()=>(t==null?void 0:t.address)?"":"No address found but location of spot has been saved",[t]);return a("div",{children:(()=>(t==null?void 0:t.address)?a("p",{className:"text-sm",children:t.toString()}):e())()})},no=({location:t,setLocation:e})=>{const[r,s]=p.exports.useState(null),[n,o]=p.exports.useState(!0),[i,l]=p.exports.useState(!1),[c,m]=p.exports.useState(null),h=u=>{l(!1),e(r[u])};return d(y,{children:[a("p",{children:"Select spot on map"}),d(Ys,{displaySelectedMarkerLegend:!0,children:[a(qs,{showClickMarker:n,setShowClickMarker:o,setLocation:e}),!n&&t&&a(Zs,{showMore:i,fromGeocodeLocations:r,setHoveredAddress:m,hoveredAddress:c,pickAddress:h,location:t})]}),a("div",{className:"mt-2",children:a(Xs,{setGeocodeLocations:s,setLocation:e,setShowClickMarker:o,setShowMore:l})}),n&&t&&a(ro,{location:t}),!n&&a(eo,{fromGeocodeLocations:r,showMore:i,setShowMore:l,hoveredAddress:c,setHoveredAddress:m,location:t,pickAddress:h})]})},Or=t=>Math.round(new TextEncoder().encode(t).length/1024/1024*100)/100,Ar=t=>Math.round(t.reduce((e,r)=>Array.isArray(r)?e+Ar(r):e+Or(r),0)*100)/100,Pr=({children:t,uploadedItems:e,setUploadedItems:r,otherUploadedItemsCount:s,uploadLimit:n,uploadedItemPluralized:o,onUploadBtnClick:i,uploadedCount:l,setUploadedCount:c,renderItem:m,uploadText:h})=>{const u=ut(()=>{const S=l+s;let v="";if(s>=n)v=`You can't upload more ${o} because you've reached the images limit.`;else if(S>n){const k=n-s;v=`Only ${k} ${o} of ${l} were uploaded because of the limit`,c(k)}return v},[e]);function f(){if(e.length)return d("div",{children:[d("p",{className:"mb-1",children:["Uploaded ",o,": ",e.length]}),a("div",{className:"d-flex flex-wrap",children:e.map((S,v)=>d(E,{className:"p-1 me-3 mb-2 text-sm",onClick:k=>r([...e.filter((b,P)=>P!==v)]),children:[a(In,{style:{textTransform:"none"},children:m(S)}),a("i",{className:"fa fa-times-circle ms-2","aria-hidden":"true"})]},z()))})]})}return d("div",{className:"mb-2",children:[d("div",{className:"d-flex flex-column",children:[d("div",{className:"order-2",children:[a(E,{variant:"contained",onClick:i,className:"me-1",children:h}),e.length!==0&&a(E,{variant:"contained",color:"warning",onClick:S=>{r([]),c(0)},children:"Remove all"})]}),t]}),u(),f()]})},Mr=t=>d(y,{children:[a("img",{alt:"Your uploaded spot img",style:{maxWidth:100,maxHeight:100,width:"auto",height:"auto"},src:t}),d("span",{children:[" ",Or(t),"MBs"]})]}),so=["image/png","image/jpg","image/jpeg","image/webp"],oo=({images:t,setImages:e,imagesLimit:r,otherImagesCount:s})=>{const[n,o]=p.exports.useState(0),i=p.exports.useRef(null);return a(Pr,{uploadedItems:t,setUploadedItems:e,uploadLimit:r,uploadedItemPluralized:"images",onUploadBtnClick:()=>{var c;return(c=i.current)==null?void 0:c.click()},uploadedCount:n,setUploadedCount:o,renderItem:Mr,otherUploadedItemsCount:s,uploadText:"Upload Files",children:a("input",{ref:i,onChange:c=>{var v,k;const m=r-s,h=(k=(v=c.target.files)==null?void 0:v.length)!=null?k:0;let u=[],f=0;Array.from(c.target.files||[]).forEach((b,P)=>{if(P+1>m)return;const $=new FileReader;$.addEventListener("load",le=>{u.push(le.target.result),f++}),$.addEventListener("error",()=>f++),$.addEventListener("abort",()=>f++),$.readAsDataURL(b)});const S=setInterval(()=>{(f===h||h>m&&f===m)&&(o(h),e(u),clearInterval(S))},100);c.target.value=null},style:{display:"none"},type:"file",accept:so.join(", "),multiple:!0})})},ao=({images:t,setImages:e,otherImagesCount:r,imagesLimit:s})=>{const[n,o]=p.exports.useState(0),[i,l,c]=M(""),[m,h]=p.exports.useState(""),u=ut(()=>m,[m]),f=F().auth,S=()=>t.length+r<s&&i!=="",v=b=>{e([...t,b])},k=async()=>{var b;if(!!S())if(h(""),i.startsWith("data:image"))v(i),c();else try{const P=await new Ye().get_Base64_Images([i],"Bearer "+((b=f==null?void 0:f.content)==null?void 0:b.jwToken));P.content[0].success?(v(P.content[0].base64),c()):h(`The url contains invalid image - ${i}`)}catch{h("Couldn't load your image now, try later.")}};return a(Pr,{uploadedItems:t,setUploadedItems:e,otherUploadedItemsCount:r,uploadLimit:s,uploadedItemPluralized:"images",onUploadBtnClick:k,uploadedCount:n,setUploadedCount:o,renderItem:Mr,uploadText:"Upload URL",children:d("div",{className:"order-1 mb-2",children:[a(j,{value:i,onKeyDown:b=>{b.key==="Enter"&&k()},onChange:l,variant:"standard",label:"Url"}),u()]})})},mt=10,Dr=20,io=G.memo(({fromLinkImages:t,setFromLinkImages:e,fromFileImages:r,setFromFileImages:s})=>d(y,{children:[a("p",{className:"m-0",children:"Upload spot images"}),(()=>{const o=t.length+r.length,i=Ar([t,r]);return d("p",{style:{fontSize:"0.85rem"},className:"text-info m-0",children:[`Uploaded ${o}/${mt}, `,a("span",{className:i>Dr?"text-danger":"",children:`Size ${i}/${Dr}MBs`})]})})(),a("div",{className:"mt-4 mb-3",children:a(oo,{images:r,setImages:s,imagesLimit:mt,otherImagesCount:t.length})}),a("div",{children:a(ao,{images:t,setImages:e,imagesLimit:mt,otherImagesCount:r.length})})]})),lo=()=>{const[t,e]=M(""),[r,s]=M(""),[n,o]=p.exports.useState(5),[i,l]=p.exports.useState(null),[c,m]=p.exports.useState([]),[h,u]=p.exports.useState([]),[f,S]=p.exports.useState(""),[v,k]=p.exports.useState($t),[b,P]=p.exports.useState(!1),$=F().auth,le=_(),$e=async()=>{if(b)return;P(!0);const T=await Hs(c.concat(h),t,r,i,n,v,$);P(!1),T.error?S(T.error.message):(S(""),le(ae({clearAtDate:new Date(Date.now()+1e4),message:"Thank you! Your spot has been added to verification.",severity:"success"})))};return d("div",{className:"container pb-5",children:[a("div",{className:"mb-4",children:a(j,{value:t,onChange:e,required:!0,fullWidth:!0,variant:"standard",label:"Name"})}),a("div",{className:"mb-4",children:a(j,{value:r,onChange:s,rows:3,multiline:!0,fullWidth:!0,variant:"standard",label:"Description"})}),d("div",{className:"mb-4",children:[a("p",{className:"m-0",children:"Surface score"}),a(wt,{value:n,onChange:T=>o(Number(T.target.value)),"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,min:1,max:10})]}),a("div",{className:"mb-5 vh-10",children:a(no,{location:i,setLocation:l})}),d("div",{className:"mb-5",children:[a("p",{className:"m-0",children:"Select at least one tag"}),a(Vt,{tags:v,setTags:k})]}),a("div",{className:"mb-5",children:a(io,{fromLinkImages:h,setFromLinkImages:u,fromFileImages:c,setFromFileImages:m})}),f!==""&&a("p",{className:"text-sm text-danger",children:f.split(`
`).map(T=>a("p",{children:T},z()))}),a(E,{onClick:$e,size:"large",variant:"contained",children:b?a(H,{color:"secondary"}):"Submit"})]})},co=({listViewType:t,fetchFunc:e,userInteractionType:r})=>{const s=_();p.exports.useEffect(()=>{s(De()[t].reset()),s(K()[t].fetchListItemsCustomFunc({fetchFunc:e}))},[t,r]),tt(K()[t].fetchListItemsCustomFunc({fetchFunc:e}),t);const n=w(i=>i[t+"State"]),o=i=>{switch(t){case g.SPOTS:return a(Tr,{spot:i},i.id);case g.SPOT_VIDEOS:return a(yr,{spotVideo:i},i.id)}};return d("div",{className:"container m-0 mt-5",style:{fontSize:"1rem"},children:[!n.loading&&!n.error&&n.listWithCount.data.length===0&&a("p",{children:"There is nothing to view here \u{1F625}"}),n.listWithCount.data.map(i=>o(i)),n.loading&&d(y,{children:[a("span",{children:"Loading activities "}),a(H,{color:"secondary"})]})]})},Rr={listItems:[{label:"Spots",icon:a(yt,{}),value:ee.SPOTS},{label:"Videos",icon:a(Ge,{}),value:ee.SPOT_VIDEOS}],interactions:[{label:"Added",icon:a(Ot,{}),value:oe.Added},{label:"Liked",icon:a(Ce,{}),value:oe.Liked},{label:"Commented",icon:a(At,{}),value:oe.Commented}]},uo=()=>{const t=w(r=>r.userProfileState),e=_();return d("div",{className:"w-100",style:{position:"fixed",bottom:0,left:0,zIndex:100},children:[a(Pt,{onChange:(r,s)=>e(tr.setWhat(s)),value:t.listItems.what,showLabels:!0,children:Rr.listItems.map(r=>a(Mt,{value:r.value,label:r.label,icon:r.icon},r.value))}),a(Pt,{onChange:(r,s)=>e(tr.setInteractionType(s)),value:t.listItems.interactionType,showLabels:!0,children:Rr.interactions.map(r=>a(Mt,{value:r.value,label:r.label,icon:r.icon},r.value))})]})},mo=()=>{const t=w(r=>r.userProfileState),e=w(r=>{var s;return(s=r.auth.content)==null?void 0:s.jwToken});return d("div",{children:[a("h1",{children:"Activites"}),a("div",{style:{paddingBottom:"10rem"},children:a(co,{fetchFunc:(r,s,n)=>t.listItems.what===ee.SPOTS?r.get_User_Related_Spots(t.listItems.interactionType,s,n,"Bearer "+e):r.get_User_Related_Spot_Videos(t.listItems.interactionType,s,n,"Bearer "+e),userInteractionType:t.listItems.interactionType,listViewType:t.listItems.what===ee.SPOTS?g.SPOTS:g.SPOT_VIDEOS})}),a(uo,{})]})},ho=()=>{const t=_(),e=w(s=>s.userProfileState.stats);p.exports.useEffect(()=>{t(Ae())},[]);const r=s=>[{key:"Added",icon:a(Ot,{}),count:s.addedCount},{key:"Liked",icon:a(Ce,{}),count:s.likedCount},{key:"Commented",icon:a(At,{}),count:s.commentedCount}];return d("div",{className:"mb-5",children:[a("h1",{className:"mb-4",children:"Stats"}),e.loading?d(y,{children:[a("span",{children:"Loading stats "}),a(H,{color:"secondary"})]}):d(y,{children:[a(Lr,{label:"Spots",stats:r(e.value.spotStats)}),a(Lr,{label:"Spot Videos",stats:r(e.value.spotVideoStats)})]})]})},Lr=t=>d("div",{className:"mb-3",children:[a("p",{style:{fontSize:"1rem"},className:"m-0 mb-2 ms-1",children:t.label}),a("div",{children:t.stats.map(e=>a(Et,{className:"me-2 px-2 py-1",icon:e.icon,label:e.count},e.key))})]}),po=()=>d("div",{className:"container",children:[a(ho,{}),a(mo,{})]});var Ue;(function(t){t.SPOT_NAME=":spotName"})(Ue||(Ue={}));var I;(function(t){t.HOME="/",t.LOGIN="/auth/login",t.REGISTER="/auth/register",t.ADD_TEMP_SPOT="/temp/add",t.TEMP_SPOTS="/temp",t.SPOTS="/spot",t.LOGOUT="/logout",t.MAP="/map",t.SPOT_VIDEO="/video",t.SPOT_DEDICATED_PAGE="/spot/:spotName",t.USER_PROFILE="/user"})(I||(I={}));const ht=[{linkName:"SkateSpot",path:I.HOME,component:ls,accessedBy:[x.ALL],renderLink:!1},{linkName:"Login",path:I.LOGIN,component:os,accessedBy:[x.NOT_SIGNED_IN],renderLink:!1},{linkName:"Register",path:I.REGISTER,component:is,accessedBy:[x.NOT_SIGNED_IN],renderLink:!1},{linkName:"Add Spot",path:I.ADD_TEMP_SPOT,component:lo,accessedBy:[x.SIGNED_IN],renderLink:!0},{linkName:"Temp Spots",path:I.TEMP_SPOTS,component:()=>a(it,{listViewType:g.TEMP_SPOTS}),accessedBy:[x.ALL],renderLink:!0},{linkName:"Spots",path:I.SPOTS,component:()=>a(it,{listViewType:g.SPOTS}),accessedBy:[x.ALL],renderLink:!0},{linkName:"Videos",path:I.SPOT_VIDEO,component:()=>a(it,{listViewType:g.SPOT_VIDEOS}),accessedBy:[x.ALL],renderLink:!0},{linkName:null,path:I.SPOT_DEDICATED_PAGE,component:Ds,accessedBy:[x.ALL],renderLink:!1},{linkName:"Map",path:I.MAP,component:Js,accessedBy:[x.ALL],renderLink:!0},{linkName:null,path:I.USER_PROFILE,component:po,accessedBy:[x.SIGNED_IN],renderLink:!1},{linkName:"Logout",path:I.LOGOUT,component:as,accessedBy:[x.SIGNED_IN],renderLink:!1}];const fo=t=>{const[e,r]=p.exports.useState(!1),s=p.exports.useRef(null),n=F().auth,o=B(),i=()=>{r(u=>!u)},l=u=>{s.current&&s.current.contains(u.target)||r(!1)},c=u=>{u.key==="Tab"?(u.preventDefault(),r(!1)):u.key==="Escape"&&r(!1)},m=G.useRef(e);G.useEffect(()=>{m.current===!0&&e===!1&&s.current.focus(),m.current=e},[e]);const h=()=>ht.filter(u=>u.renderLink).map(u=>ze(u,n)?a(N,{to:u.path,children:a(ye,{style:{fontWeight:o.location.pathname.endsWith(u.path)?700:400},onClick:l,children:u.linkName})},u.path):null).filter(u=>u);return d("div",{id:"nav",className:"d-flex justify-content-between align-items-center",children:[a("div",{children:a("b",{children:d(N,{to:I.HOME,children:[a(ve,{})," SkateSpot"]})})}),d("div",{children:[n.content&&a(N,{className:"me-2",to:I.USER_PROFILE,children:n.content.userName}),a(He,{ref:s,id:"composition-button",onClick:i,children:a(Cn,{})}),a(_n,{id:"mobile-nav",open:e,anchorEl:s.current,role:void 0,placement:"bottom-start",transition:!0,disablePortal:!0,children:({TransitionProps:u,placement:f})=>a(Tn,Be(X({},u),{style:{transformOrigin:f==="bottom-start"?"left top":"left bottom"},children:a(yn,{children:a(It,{onClickAway:l,children:d(En,{className:"py-0",autoFocusItem:e,onKeyDown:c,children:[h(),n.content?a(N,{to:I.LOGOUT,children:a(ye,{onClick:l,children:"Logout"})}):d(y,{children:[a(N,{to:I.LOGIN,children:a(ye,{onClick:l,children:"Login"})}),a(N,{to:I.REGISTER,children:a(ye,{onClick:l,children:"Register"})})]})]})})})}))})]})]})},So=()=>{const t=F().auth,e=B(),r=wn(),s=Sr(),n=()=>ht.filter(o=>o.renderLink).map(o=>ze(o,t)?a(N,{style:{fontWeight:e.location.pathname.endsWith(o.path)?700:400},to:o.path,children:o.linkName},o.path):null).filter(o=>o);return s.width&&s.width<=r.breakpoints.values.md?a(fo,{}):d("div",{id:"nav",className:"d-flex justify-content-between",children:[d("div",{children:[a("b",{children:d(N,{to:I.HOME,children:[a(ve,{})," SkateSpot"]})}),n()]}),t.content?d("div",{children:[a(N,{to:I.USER_PROFILE,children:t.content.userName}),a(N,{to:I.LOGOUT,children:"Logout"})]}):d("div",{children:[a(N,{to:I.REGISTER,children:"Register"}),a(N,{to:I.LOGIN,children:"Login"})]})]})},go=()=>{const t=_(),e=w(r=>r.auth);return p.exports.useEffect(()=>{t(ae({message:e.content?"You can't do this":"Please login first",severity:"info",clearAtDate:new Date(Date.now()+5e3)}))},[]),a(kn,{to:I.HOME})};const vo=({clearDate:t})=>{const e=100,r=50,s=t-Date.now(),[n,o]=p.exports.useState(e);return p.exports.useEffect(()=>{o(e);const i=setInterval(()=>{const l=t-r-Date.now();if(o((l<0?0:l)*e/s),l<=0){clearInterval(i);return}},r);return()=>clearInterval(i)},[t]),a(bn,{variant:"determinate",value:n})},Io=()=>{const t=Me(),e=F();return e.flashMsgs.length!==0?a("div",{style:{position:"fixed",zIndex:1e4,opacity:.95},children:e.flashMsgs.map(r=>d(Nn,{className:"mt-1",variant:"filled",severity:r.severity,onClose:()=>t(Un(r.clearAtDate)),children:[r.message,a(vo,{clearDate:r.clearAtDate.getTime()})]},r.clearAtDate.getTime()))}):a(y,{})},Co=()=>{const t=Me();p.exports.useEffect(()=>{const e=localStorage.getItem(ke);if(e)try{const r=JSON.parse(atob(e.split(".")[1]));_o(r)||t(Vn({id:r.uid,userName:r.sub,email:r.email,roles:r.roles,isVerified:!1,jwToken:e,issuedOn:new Date(r.nbf*1e3),expiresOn:new Date(r.exp*1e3)}))}catch(r){console.log("Can't set auth state from local storage. Malformed state",r)}},[])},_o=t=>new Date().getTime()>t.exp*1e3,To=()=>{const t=F();return Co(),d(y,{children:[a(Io,{}),d(xn,{children:[a(So,{}),a(On,{children:(()=>ht.map(r=>a(An,{path:r.path,exact:!0,render:()=>ze(r,t.auth)?a(r.component,{}):a(go,{})},r.linkName)))()})]})]})};Pn.render(a(G.StrictMode,{children:a(Mn,{store:ss,children:a(Dn,{theme:Rn({palette:{mode:"dark"}}),children:a(To,{})})})}),document.getElementById("root"));
